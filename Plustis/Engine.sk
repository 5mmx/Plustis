#Plustis Engine

options:
    version: 1.4

command /create [<text>]:
    trigger:
        if {service.phost} is "Online":
            if {server.created.%player%} is "true":
                send "&cYou already have a Realm!" to player
            else:
                if arg-1 is set:
                    if {servers::*} contains arg-1:
                        send "&cThis Realm alredy exists!" to player
                    else:
                        if {blacklistedsrvnames::*} contains arg-1:
                            send "&cInvalid name!"
                        else:
                            if length of arg-1 <= 8:
                                send "&aOpening creation GUI..."
                                wait 0.5 seconds
                                open chest with 2 row named "&3Create > World Options" to player
                                format slot 0 of player with bedrock named "&aVoid World" to close then run [make player execute command "psrv_create %arg-1% empty"]
                                format slot 2 of player with oak slab named "&aFlat World" to close then run [make player execute command "psrv_create %arg-1% flat"]
                                format slot 4 of player with grass block named "&aDefault" with lore "&cOnly &6[LEGEND]+" to close then run [make player execute command "psrv_create_premium %arg-1% default"]
                                format slot 6 of player with netherrack named "&aNether" with lore "&cOnly &6[LEGEND]+" to close then run [make player execute command "psrv_create_premium %arg-1% nether"]
                                format slot 8 of player with netherrack named "&aEnd" with lore "&cOnly &6[LEGEND]+" to close then run [make player execute command "psrv_create_premium %arg-1% end"]
                                format slot 10 of player with chest named "&aCustom Maps" to close then run [make player execute command "?disabled"]
                                format slot 12 of player with redstone block named "&aSandstoneFlatWorld" to close then run [make player execute command "?disabled"]
                                format slot 14 of player with redstone block named "&aExtendedFlatWorld" to close then run [make player execute command "?disabled"]
                                format slot 16 of player with barrier named "&cComing Soon..." to close
                            else:
                                send "&cRealm names can only be max &b8 char"
                else:
                    send "&3Create Your Own Realm"
                    send "&b/create <realm name>"
                    send "&3(Letters A-Z, Numbers allowed)"
                    send "&3(Max 8 letters/number)"
                    send "&3Please read &b/rules &3for Realm names rules"
        else:
            send "&cPlustis services are offline! Try again later!"

command /?disabled:
    trigger:
        send "&cCurrently disabled!"

command /psrv_create <text> <text>:
    trigger:
        if {server.created.%player%} is "true":
            send "&cYou alredy have Realm!" to player
        else:
            if {servers::*} contains arg-1:
                send "&cThis Realm alredy exists!" to player
            else:
                send "&aCreating Realm..." to player
                wait 0.5 seconds
                if arg-2 is "flat":
                    make console execute command "/mv create %arg-1% NORMAL -t FLAT"
                if arg-2 is "empty":
                    make console execute command "/mv create %arg-1% NORMAL -g voidgenerator"
                if arg-2 is "RedstoneFlat":
                    make console execute command "/mv clone PG_RedstoneFlatWorld %arg-1%"
                if arg-2 is "ExtendedFlat":
                    make console execute command "/mv clone PG_ExtendedFlat %arg-1%"
                send "&aRealm &3%arg-1% &acreated! Join now with &3/join %arg-1%" to player
                make console execute command "/mv create %arg-1%_nether NETHER"
                make console execute command "/mv create %arg-1%_the_end END"
                set {server.created.%player%} to "true"
                set {server.name.%player%} to arg-1
                set {world.type.%player%} to arg-2
                set {owner.%arg-1%} to "%player%"
                set {owner.%arg-1%_nether} to "%player%"
                set {owner.%arg-1%_the_end} to "%player%"
                add arg-1 to {servers::*}
                add 1 to {ServerNumber}
                set {status.%arg-1%} to "Offline"
                set {show.%arg-1%} to "true"
                set {whitelistst.%arg-1%} to "false"
                set {motd.%{server.name.%player%}%} to "A Plustis Realm."
                clear {whitelistst.%arg-1%::*}
                make console execute command "mv unload %arg-1%"
                wait 3 seconds
                make console execute command "mv unload %arg-1%_nether"
                wait 3 seconds
                make console execute command "mv unload %arg-1%_the_end"
                send "[**CREATED**] %player% has created Realm `%arg-1%` *(Type: %arg-2%)*" to channel with id "719181553611046962" with "MainBot"
                set {24_7_%{server.name.%player%}%} to "false"
                set {votes.%{server.name.%player%}%} to 0

                set {join.message.%{server.name.%player%}%} to "&ehas joined the game"
                set {leave.message.%{server.name.%player%}%} to "&ehas left the game"

                set {join.message.%{server.name.%player%}%_nether} to "&ehas joined the game"
                set {leave.message.%{server.name.%player%}%_nether} to "&ehas left the game"

                set {join.message.%{server.name.%player%}%_the_end} to "&ehas joined the game"
                set {leave.message.%{server.name.%player%}%_the_end} to "&ehas left the game"

                set {enabled.nether.%{server.name.%player%}%} to "true"
                set {enabled.end.%{server.name.%player%}%} to "true"
                make console execute command "/lp user %player% permission set control.use world=%{server.name.%player%}%"
                make console execute command "/lp user %player% permission set control.use world=%{server.name.%player%}%_nether"
                make console execute command "/lp user %player% permission set control.use world=%{server.name.%player%}%_the_end"
                set {slots.%{server.name.%player%}%} to 5

                make console execute command "/pwi group create %arg-1% %arg-1% %arg-1%_nether %arg-1%_the_end"

                wait 1 second

                add "Java" to {version.allowed::%{server.name.%player%}%::*}
                add "Bedrock" to {version.allowed::%{server.name.%player%}%::*}

                clear {mcversion.allowed::%{server.name.%player%}%::*}

                wait 1 second

                loop {allmcversions::*}:
                    add loop-value to {mcversion.allowed::%{server.name.%player%}%::*}

                set {version.server.%player%} to {@version}  

command /psrv_create_premium <text> <text>:
    permission: legend.rank
    trigger:
        if {server.created.%player%} is "true":
            send "&cYou alredy have a Realm!" to player
        else:
            if {servers::*} contains arg-1:
                send "&cThis Realm alredy exists!" to player
            else:
                send "&aCreating Realm..." to player
                wait 0.5 seconds
                if arg-2 is "default":
                    make console execute command "/mv create %arg-1% NORMAL"
                if arg-2 is "nether":
                    make console execute command "/mv create %arg-1% NETHER"
                if arg-2 is "end":
                    make console execute command "/mv create %arg-1% END"

                send "&aRealm &3%arg-1% &acreated! Join now with &3/join %arg-1%" to player
                make console execute command "/mv create %arg-1%_nether NETHER"
                make console execute command "/mv create %arg-1%_the_end END"
                set {server.created.%player%} to "true"
                set {server.name.%player%} to arg-1
                set {world.type.%player%} to arg-2
                set {owner.%arg-1%} to "%player%"
                add arg-1 to {servers::*}
                add 1 to {ServerNumber}
                set {status.%arg-1%} to "Offline"
                set {show.%arg-1%} to "true"
                set {whitelistst.%arg-1%} to "false"
                set {motd.%arg-1%} to "A Plustis Realm."
                clear {whitelistst.%arg-1%::*}
                make console execute command "mv unload %arg-1%"
                wait 3 seconds
                make console execute command "mv unload %arg-1%_nether"
                wait 3 seconds
                make console execute command "mv unload %arg-1%_the_end"
                send "[**CREATED**] %player% has created Realm `%arg-1%` *(Type: %arg-2%)*" to channel with id "719181553611046962" with "MainBot"
                set {24_7_%{server.name.%player%}%} to "false"
                set {votes.%{server.name.%player%}%} to 0

                set {join.message.%{server.name.%player%}%} to "&ehas joined the game"
                set {leave.message.%{server.name.%player%}%} to "&ehas left the game"
                
                set {join.message.%{server.name.%player%}%_nether} to "&ehas joined the game"
                set {leave.message.%{server.name.%player%}%_nether} to "&ehas left the game"

                set {join.message.%{server.name.%player%}%_the_end} to "&ehas joined the game"
                set {leave.message.%{server.name.%player%}%_the_end} to "&ehas left the game"

                set {enabled.nether.%{server.name.%player%}%} to "true"
                set {enabled.end.%{server.name.%player%}%} to "true"
                make console execute command "/lp user %player% permission set control.use world=%{server.name.%player%}%"
                make console execute command "/lp user %player% permission set control.use world=%{server.name.%player%}%_nether"
                make console execute command "/lp user %player% permission set control.use world=%{server.name.%player%}%_the_end"
                set {slots.%{server.name.%player%}%} to 5

                make console execute command "/pwi group create %arg-1% %arg-1% %arg-1%_nether %arg-1%_the_end"

                wait 1 second

                add "Java" to {version.allowed::%{server.name.%player%}%::*}
                add "Bedrock" to {version.allowed::%{server.name.%player%}%::*}

                clear {mcversion.allowed::%{server.name.%player%}%::*}

                wait 1 second

                loop {allmcversions::*}:
                    add loop-value to {mcversion.allowed::%{server.name.%player%}%::*}

                set {version.server.%player%} to {@version}

command /psrv_create_maps <text>:
    trigger:
        if {server.created.%player%} is "true":
            send "&cYou alredy have a Realm!" to player
        else:
            if {servers::*} contains arg-1:
                send "&cThis Realm alredy exists!" to player
            else:
                wait 0.3 seconds
                open chest with 6 row named "&3Create > World Options" to player
                format slot 47 of player with lime wool named "&aSubmit" to close then run [make player execute command "custom_maps_submit"]
                format slot 51 of player with red wool named "&cReport" to close then run [make player execute command "custom_maps_report"]
                format slot 49 of player with compass named "&eBack" to close then run [make player execute command "create %arg-1%"]

                format slot 0 of player with chest named "&eLobby" to close then run [make player execute command "psrv_create_maps_create %arg-1% Lobby"]
                format slot 1 of player with chest named "&eOldLobby" to close then run [make player execute command "psrv_create_maps_create %arg-1% OldLobby"]
                format slot 2 of player with chest named "&eVillage" to close then run [make player execute command "psrv_create_maps_create %arg-1% Village"]
                format slot 3 of player with chest named "&eCapri Island, Italy" to close then run [make player execute command "psrv_create_maps_create %arg-1% CapriIsland"]
                format slot 4 of player with chest named "&eMountain Village" to close then run [make player execute command "psrv_create_maps_create %arg-1% MountainVillage"]

command /psrv_create_maps_create <text> <text>:
    trigger:
        #if {server.created.%player%} is "true":
            #send "&cYou alredy have a Realm!" to player
        if {idk} is not set:
            send "&cSorry! This world type is not available!"
        else:
            if {servers::*} contains arg-1:
                send "&cThis Realm alredy exists!" to player
            else:
                send "&aCreating Realm..." to player
                wait 0.5 seconds
                make console execute command "/mvclone CM_%arg-2% %arg-1%"
                send "&aRealm &3%arg-1% &acreated! Join now with &3/join %arg-1%" to player
                set {server.created.%player%} to "true"
                set {server.name.%player%} to arg-1
                set {world.type.%player%} to "custom"
                set {owner.%arg-1%} to "%player%"
                add arg-1 to {servers::*}
                add 1 to {ServerNumber}
                set {status.%arg-1%} to "Offline"
                set {show.%arg-1%} to "true"
                set {whitelistst.%arg-1%} to "false"
                set {motd.%arg-1%} to "A Plustis Realm."
                clear {whitelistst.%arg-1%::*}
                make console execute command "hv unload %arg-1%"
                wait 3 seconds
                make console execute command "hv unload %arg-1%_nether"
                wait 3 seconds
                make console execute command "hv unload %arg-1%_the_end"
                send "[**CREATED**] %player% has created Realm `%arg-1%` *(Type: Custom/%arg-2%)*" to channel with id "719181553611046962" with "MainBot"
                set {24_7_%{server.name.%player%}%} to "false"
                set {votes.%{server.name.%player%}%} to 0

                set {join.message.%{server.name.%player%}%} to "&ehas joined the game"
                set {leave.message.%{server.name.%player%}%} to "&ehas left the game"

                set {join.message.%{server.name.%player%}%_nether} to "&ehas joined the game"
                set {leave.message.%{server.name.%player%}%_nether} to "&ehas left the game"

                set {join.message.%{server.name.%player%}%_the_end} to "&ehas joined the game"
                set {leave.message.%{server.name.%player%}%_the_end} to "&ehas left the game"

                set {enabled.nether.%{server.name.%player%}%} to "true"
                set {enabled.end.%{server.name.%player%}%} to "true"
                make console execute command "/lp user %player% permission set control.use world=%{server.name.%player%}%"
                make console execute command "/lp user %player% permission set control.use world=%{server.name.%player%}%_nether"
                make console execute command "/lp user %player% permission set control.use world=%{server.name.%player%}%_the_end"
                set {slots.%{server.name.%player%}%} to 5

                make console execute command "/hyperverse flag set %arg-1% nether %arg-1%_nether"
                make console execute command "/hyperverse flag set %arg-1%_nether nether %arg-1%"

                make console execute command "/hyperverse flag set %arg-1% end %arg-1%_the_end"
                make console execute command "/hyperverse flag set %arg-1%_the_end end %arg-1%"

                make console execute command "/hv flag set %arg-1% profile-group %arg-1%"
                make console execute command "/hv flag set %arg-1%_nether profile-group %arg-1%"
                make console execute command "/hv flag set %arg-1%_the_end profile-group %arg-1%"

                make console execute command "/pwi group create %arg-1% %arg-1% %arg-1%_nether %arg-1%_the_end"

                wait 3 seconds
                #make console execute command "/hv flag set %arg-1% local-respawn true"

                wait 1 second

                add "Java" to {version.allowed::%{server.name.%player%}%::*}
                add "Bedrock" to {version.allowed::%{server.name.%player%}%::*}

                clear {mcversion.allowed::%{server.name.%player%}%::*}

                wait 1 second

                loop {allmcversions::*}:
                    add loop-value to {mcversion.allowed::%{server.name.%player%}%::*}

                set {version.server.%player%} to {@version}

command /custom_maps_submit:
    trigger:
        send formatted "&3Submit a map: <url:https://plustis.xyz/custom-maps-submit>&bhttps://plustis.xyz/custom-maps-submit<reset>"

command /custom_maps_report:
    trigger:
        send formatted "&3Report a map: <url:http://plustis.xyz/forum/view/15-reports/>&bhttp://plustis.xyz/forum/view/15-reports/<reset>"

command /?delete:
    trigger:
        if {server.created.%player%} is "true":
            send action bar "&cDeleting Realm..." to player

            make console execute command "lp group default clear world=%{server.name.%player%}%"
            make console execute command "lp group pjrmod clear world=%{server.name.%player%}%"
            make console execute command "lp group pmod clear world=%{server.name.%player%}%"
            make console execute command "lp group padmin clear world=%{server.name.%player%}%"
            make console execute command "lp group psrmod clear world=%{server.name.%player%}%"
            make console execute command "lp group pcust1 clear world=%{server.name.%player%}%"
            make console execute command "lp group pcust2 clear world=%{server.name.%player%}%"
            make console execute command "lp group pcust3 clear world=%{server.name.%player%}%"
            make console execute command "lp group pcust4 clear world=%{server.name.%player%}%"
            make console execute command "lp group pcust5 clear world=%{server.name.%player%}%"
            make console execute command "lp group pcust6 clear world=%{server.name.%player%}%"
            make console execute command "lp user %player% clear world=%{server.name.%player%}%"

            make console execute command "lp group default clear world=%{server.name.%player%}%_nether"
            make console execute command "lp group pjrmod clear world=%{server.name.%player%}%_nether"
            make console execute command "lp group pmod clear world=%{server.name.%player%}%_nether"
            make console execute command "lp group padmin clear world=%{server.name.%player%}%_nether"
            make console execute command "lp group psrmod clear world=%{server.name.%player%}%_nether"
            make console execute command "lp group pcust1 clear world=%{server.name.%player%}%_nether"
            make console execute command "lp group pcust2 clear world=%{server.name.%player%}%_nether"
            make console execute command "lp group pcust3 clear world=%{server.name.%player%}%_nether"
            make console execute command "lp group pcust4 clear world=%{server.name.%player%}%_nether"
            make console execute command "lp group pcust5 clear world=%{server.name.%player%}%_nether"
            make console execute command "lp group pcust6 clear world=%{server.name.%player%}%_nether"
            make console execute command "lp user %player% clear world=%{server.name.%player%}%_nether"

            make console execute command "lp group default clear world=%{server.name.%player%}%_the_end"
            make console execute command "lp group pjrmod clear world=%{server.name.%player%}%_the_end"
            make console execute command "lp group pmod clear world=%{server.name.%player%}%_the_end"
            make console execute command "lp group padmin clear world=%{server.name.%player%}%_the_end"
            make console execute command "lp group psrmod clear world=%{server.name.%player%}%_the_end"
            make console execute command "lp group pcust1 clear world=%{server.name.%player%}%_the_end"
            make console execute command "lp group pcust2 clear world=%{server.name.%player%}%_the_end"
            make console execute command "lp group pcust3 clear world=%{server.name.%player%}%_the_end"
            make console execute command "lp group pcust4 clear world=%{server.name.%player%}%_the_end"
            make console execute command "lp group pcust5 clear world=%{server.name.%player%}%_the_end"
            make console execute command "lp group pcust6 clear world=%{server.name.%player%}%_the_end"
            make console execute command "lp user %player% clear world=%{server.name.%player%}%_the_end"

            loop {warps.essentials.%player's world%::*}:
                make console execute command "essentials:delwarp %loop-value%"

            loop {Multiverse::Data::%{server.name.%player%}%::Worlds::*}:
                make console execute command "kickallplayers w_%loop-value%"
                make console execute command "mv load w_%loop-value%"
                wait 1 second
                make console execute command "mv delete w_%loop-value%"
                wait 1 second
                make console execute command "mvconfirm"
                remove loop-value from {Multiverse::Data::MV_Worlds::*}

            loop {scripts.%{server.name.%player%}%::*}:
                clear {script.%loop-value%::*}
            clear {Banned.%{server.name.%player%}%::*}
            clear {owner.%{server.name.%player%}%}

            clear {version.allowed::%{server.name.%player%}%::*}

            remove {api.code.%{server.name.%player%}%} from {api.codes::*}
            clear {%{api.code.%{server.name.%player%}%}%.code.world}
            clear {api.code.%{server.name.%player%}%}

            loop {scripts.%{server.name.%player%}%_nether::*}:
                clear {script.%loop-value%::*}
            clear {Banned.%{server.name.%player%}%_nether::*}
            clear {owner.%{server.name.%player%}%_nether}
            remove {api.code.%{server.name.%player%}%_nether} from {api.codes::*}
            clear {%{api.code.%{server.name.%player%}%_nether}%.code.world}
            clear {api.code.%{server.name.%player%}%_nether}

            loop {scripts.%{server.name.%player%}%_the_end::*}:
                clear {script.%loop-value%::*}
            clear {Banned.%{server.name.%player%}%_the_end::*}
            clear {owner.%{server.name.%player%}%_the_end}
            remove {api.code.%{server.name.%player%}%_the_end} from {api.codes::*}
            clear {%{api.code.%{server.name.%player%}%_the_end}%.code.world}
            clear {api.code.%{server.name.%player%}%_the_end}

            make player execute command "/?customip_remove"

            make console execute command "/pwi group delete %{server.name.%player%}%"

            wait 1 second

            make console execute command "/lp user %player% permission unset control.use world=%{server.name.%player%}%"
            make console execute command "/lp user %player% permission unset control.use world=%{server.name.%player%}%_nether"
            make console execute command "/lp user %player% permission unset control.use world=%{server.name.%player%}%_the_end"

            set {generated.nether.%{server.name.%player%}%} to "false"
            set {generated.end.%{server.name.%player%}%} to "false"

            clear {scripts.%{server.name.%player%}%::*}
            clear {scripts.%{server.name.%player%}%_nether::*}
            clear {scripts.%{server.name.%player%}%_the_end::*}

            set {console.id.%{server.name.%player%}%} to "none"
            set {chat.id.%{server.name.%player%}%} to "none"

            set {console.id.%{server.name.%player%}%_nether} to "none"
            set {chat.id.%{server.name.%player%}%_nether} to "none"

            set {console.id.%{server.name.%player%}%_the_end} to "none"
            set {chat.id.%{server.name.%player%}%_the_end} to "none"
            
            make player execute command "/ppluginsreset"
            send "&aDeleting Realm..." to player
            send "[**DELETED**] %player% has deleted Realm `%{server.name.%player%}%`" to channel with id "719181553611046962" with "MainBot"
            remove "%{server.name.%player%}%" from {servers::*}
            make console execute command "mv delete %{server.name.%player%}%"
            wait 1 second
            make console execute command "mvconfirm"
            wait 1 second
            make console execute command "mv delete %{server.name.%player%}%_nether"
            wait 1 second
            make console execute command "mvconfirm"
            wait 1 second
            make console execute command "mv delete %{server.name.%player%}%_the_end"
            wait 1 second
            make console execute command "mvconfirm"
            wait 1 second
            send "&cRealm deleted!" to player
            set {24_7_%{server.name.%player%}%} to "false"
            set {24_7_p_%player%} to "off"
            set {server.created.%player%} to "false"
            set {server.name.%player%} to "none"
            set {world.type.%player%} to "none"
            subtract 1 from {ServerNumber}
            set {cloud.%player%} to "&cfalse"
            send action bar "&cRealm Deleted!" to player
        else:
            send "&cYou don't have a Realm!" to player
            send action bar "&cDeletion failed!" to player 

every 5 seconds in "Lobby":
    set {ServerNumber} to size of {servers::*}

command /?menu:
    trigger:
        if {service.phost} is "Online":
            wait 0.3 seconds
            open chest with 6 row named "&eRealms - Menu" to player

            format slot 10 of player with book named "&aAll Realms" with lore "&3See all online Realm" to close then run [make player execute command "serverbrowser"]
            format slot 19 of player with totem of undying named "&aJoin a Random Realm" with lore "&3Joins a random online Realm" to close then run [make player execute command "randomjoin"]
            
            format slot 12 of player with bedrock named "Featured Realm" with lore "&7Coming soon!" to close
            format slot 13 of player with bedrock named "Featured Realm" with lore "&7Coming soon!" to close
            format slot 14 of player with bedrock named "Featured Realm" with lore "&7Coming soon!" to close
            
            if {fav1.%player%} is set:
                if {status.%{fav1.%player%}%} is "Online":
                    format slot 30 of player with lime dye named "&3%{fav1.%player%}%" with lore "&3Status: &e%{status.%{fav1.%player%}%}%" to close then run [make player execute command "join %{fav1.%player%}%"]
                else:
                    format slot 30 of player with gray dye named "&3%{fav1.%player%}%" with lore "&3Status: &e%{status.%{fav1.%player%}%}%" to close then run [make player execute command "join %{fav1.%player%}%"]
            else:
                format slot 30 of player with gray dye named "&3Favourite Realm Not Set" with lore "&7Click to edit" to close then run [make player execute command "favsrv_manage"]
            
            if {fav2.%player%} is set:
                if {status.%{fav2.%player%}%} is "Online":
                    format slot 31 of player with lime dye named "&3%{fav2.%player%}%" with lore "&3Status: &e%{status.%{fav2.%player%}%}%" to close then run [make player execute command "join %{fav2.%player%}%"]
                else:
                    format slot 31 of player with gray dye named "&3%{fav2.%player%}%" with lore "&3Status: &e%{status.%{fav2.%player%}%}%" to close then run [make player execute command "join %{fav2.%player%}%"]
            else:
                format slot 31 of player with gray dye named "&3Favourite Realm Not Set" with lore "&7Click to edit" to close then run [make player execute command "favsrv_manage"]

            if {fav3.%player%} is set:
                if {status.%{fav3.%player%}%} is "Online":
                    format slot 32 of player with lime dye named "&3%{fav3.%player%}%" with lore "&3Status: &e%{status.%{fav3.%player%}%}%" to close then run [make player execute command "join %{fav3.%player%}%"]
                else:
                    format slot 32 of player with gray dye named "&3%{fav3.%player%}%" with lore "&3Status: &e%{status.%{fav3.%player%}%}%" to close then run [make player execute command "join %{fav3.%player%}%"]
            else:
                format slot 32 of player with gray dye named "&3Favourite Realm Not Set" with lore "&7Click to edit" to close then run [make player execute command "favsrv_manage"]



            format slot 28 of player with painting named "&aControl Panel" with lore "&3Manage your Realm" to close then run [make player execute command "controlp"]
            if {server.created.%player%} is "true":
                format slot 37 of player with emerald named "&aJoin Your Realm" with lore "&3Teleports you to your Realm" to close then run [make player execute command "/join %{server.name.%player%}%"]
            else:
                format slot 37 of player with nametag named "&aCreate Realm" with lore "&3Create your own Realm" to close then run [make player execute command "/create"]
        else:
            send "&cPlustis services are currently offline!" to player

command /serverbrowser:
    trigger:
        wait 0.3 seconds
        if {service.phost} is "Online":
            set {num.%player%} to -1
            open chest inventory with 4 rows named "&3Realm Browser &7(%{nserver_online}%/27)" to player
            loop {servers::*}:
                if {status.%loop-value%} is "Online":
                    if {show.%loop-value%} is "true":
                        add 1 to {num.%player%}
                        if {icon.%loop-value%} is not set:
                            set slot {num.%player%} of player's current inventory to oak sign named "%loop-value%" with lore "  ", "&r%colored {motd.%loop-value%}%", "  ", "&3Players Online: &b%{online.%loop-value%}%&3/&b%{slots.%loop-value%}%", "  ", "&3Whitelist: &6%{whitelistst.%loop-value%}%", "  ", "&3Votes: &b%{votes.%loop-value%}%", "  ", "&3Owner: &b%{owner.%loop-value%}%" and "  "
                        else:
                            set slot {num.%player%} of player's current inventory to {icon.%loop-value%} named "%loop-value%" with lore "  ", "&r%colored {motd.%loop-value%}%", "  ", "&3Players Online: &b%{online.%loop-value%}%&3/&b%{slots.%loop-value%}%", "  ", "&3Whitelist: &6%{whitelistst.%loop-value%}%", "  ", "&3Votes: &b%{votes.%loop-value%}%", "  ", "&3Owner: &b%{owner.%loop-value%}%" and "  "
            set slot 29 of player's current inventory to totem of undying named "Join a Random Realm"
            set slot 31 of player's current inventory to compass named "Back"
            set slot 33 of player's current inventory to paper named "Report Realm" with lore "&3Report a Realm if it breaks rules"

on inventory click:
    if inventory name of player's current inventory is "&3Realm Browser &7(%{nserver_online}%/27)":
        if event-slot is compass named "Back":
            cancel event
            close player's inventory
            make player execute command "/?menu"
        else if event-slot is paper named "Report Realm":
            cancel event
            close player's inventory
            make player execute command "/reportsrv"
        else if event-slot is totem of undying named "Join a Random Realm":
            cancel event
            close player's inventory
            make player execute command "/randomjoin"
        else:
            cancel event
            make player execute command "/join %event-slot's name%"

command /randomjoin:
    trigger:
        send "&3Joining a random Realm..."
        clear {Online_srvs::*}
        loop {servers::*}:
            if {status.%loop-value%} is "Online":
                add loop-value to {Online_srvs::*}
        wait 1 second
        make player execute command "/join %random element out of {Online_srvs::*}%"

command /reportsrv:
    trigger:
        wait 0.3 seconds
        send formatted "&3Report a Realm: <url:http://plustis.xyz/forum/view/15-reports/>&bhttp://plustis.xyz/forum/view/15-reports/<reset>"

command /favsrv_manage:
    trigger:
        send "&aType: &3/favrealm <add/remove> <slot (1-2-3)> [<Realm Name>]"

command /favrealm <text> <number> [<text>]:
    usage: /favrealm <add/remove> <Slot(1-2-3)> [<Realm Name>]
    trigger:
        if arg-1 is "add":
            if arg-2 is 1, 2 or 3:
                if arg-3 is set:
                    if {servers::*} contains arg-3:
                        set {fav%arg-3%.%player%} to arg-3
                        send "&aRealm &b%arg-3% &aset as favourite!" to player
                    else:
                        send "&cWe searched everywhere... We couldn't find this Realm" to player
                else:
                    send "&cUsage: /favrealm <add/remove> <slot (1-2-3)> <Realm Name>" to player
            else:
                send "&cUsage: /favrealm <add/remove> <slot (1-2-3)> <Realm Name>" to player
        if arg-1 is "remove":
            if arg-2 is 1, 2 or 3:
                clear {fav%arg-2%.%player%}
                send "&aSlot cleared!" to player
            else:
                send "&cUsage: /favrealm <add/remove> <slot (1-2-3)> <Realm Name>" to player

on server list ping:
    set the motd to "&aPlustis &f- &bFree Realm Host %newline% &f%{ServerNumber}% &7Realms hosted"

#&bFree Realm Host %newline% &f%{ServerNumber}% &7Realms hosted


on skript load:
        login to "NjkxNjA4OTU1NzkyOTE2NDkw.XoGc8w.Qwk8nM15z1rHo_z0gfMCtEn5CM0" with the name "MainBot"
        wait 70 seconds
        make console execute command "shutdownp"
        loop {players::*}:
                set {voted.%loop-value%.srv} to "false"

command /shutdownp:
    permission: admin.rank
    trigger:
        set {unloading.worlds} to true
        send "&cServer> &eAll PlayerRealms will be restarted..." to all players
        loop {Servers::*}:
            send "Loop1 Triggered" to console
            if {24_7_p_%loop-value%} is "on":
                set {status.%loop-value%} to "Online"
            else:
                make console execute command "mv unload %loop-value%"
                wait 3 seconds
                make console execute command "mv unload %loop-value%_nether"
                wait 3 seconds
                make console execute command "mv unload %loop-value%_the_end"

                set {status.%loop-value%} to "Offline"
        
        loop {Multiverse::Data::MV_Worlds::*}:
            make console execute command "mv unload %loop-value%"
            send "Loop2 Triggered" to console

        wait 4 seconds
        send "&cServer> &eYou may now start your Realm again!" to all players
        send "Loading should be finished, try joining the server" to console
        send "**Realms Loading Finished**" to channel with id "719181420827901972" with "MainBot"
        set {unloading.worlds} to false

on join:
        if {unloading.worlds} is true:
                make console execute command "kick %player% Loading Realms, Please wait..."

command /suspend [<text>]:
    permission: staff.rank
    trigger:
        if {servers::*} contains arg-1:
            set {suspended.%arg-1%} to "true"
            send "&aSuspended Realm &b%arg-1%"
            send "[**SUSPENDED**] %player% has suspended Realm `%arg-1%`" to channel with id "719181553611046962" with "MainBot"
            set {24_7_p_%{owner.%arg-1%}%} to "off"
            set {24_7_%arg-1%} to "false"
            loop all players:
                if {suspended.%{server.name.%loop-player%}%} is "true":
                    if {status.%{server.name.%loop-player%}%} is "Online":
                        make loop-player execute command "/pstop"
                        send "&cYour Realm has been suspended! You may appeal on &b/forums"

            make console execute command "kickallplayers %{server.name.%{owner.%arg-1%}%}%"
            make console execute command "kickallplayers %{server.name.%{owner.%arg-1%}%}%_nether"
            make console execute command "kickallplayers %{server.name.%{owner.%arg-1%}%}%_the_end"
            add "Realm Suspended! Shutting down..." to {console.%{server.name.%{owner.%arg-1%}%}%::*}
            add "Suspended by: %player%" to {console.%{server.name.%{owner.%arg-1%}%}%::*}
            add "Stopping Realm..." to {console.%{server.name.%{owner.%arg-1%}%}%::*}
            add "Unoading gamerules..." to {console.%{server.name.%{owner.%arg-1%}%}%::*}
            add "Unloading plugins..." to {console.%{server.name.%{owner.%arg-1%}%}%::*}
            add "Realm stopped!" to {console.%{server.name.%{owner.%arg-1%}%}%::*}
            make console execute command "mv unload %{server.name.%{owner.%arg-1%}%}%"
            wait 3 seconds
            make console execute command "mv unload %{server.name.%{owner.%arg-1%}%}%_nether"
            wait 3 seconds
            make console execute command "mv unload %{server.name.%{owner.%arg-1%}%}%_the_end"
            set {status.%arg-1%} to "Offline"
            set {latest.log.%{server.name.%{owner.%arg-1%}%}%::*} to {console.%{server.name.%{owner.%arg-1%}%}%::*}
        else:
            send "&cThis Realm doesn't exist"

command /unsuspend <text>:
    permission: admin.rank
    trigger:
        if {servers::*} contains arg-1:
            if {suspended.%arg-1%} is "true":
                send "&aRealm &b%arg-1% &aunsuspended"
                send "[**UN-SUSPENDED**] %player% has unsuspended Realm `%arg-1%`" to channel with id "719181553611046962" with "MainBot"
                set {suspended.%arg-1%} to "false"
            else:
                send "&cThis Realm is not suspended"
        else:
            send "&cThis Realm doesn't exist"

command /stserver <text> <text>:
    permission: admin.rank
    trigger:
        set {status.%arg-1%} to arg-1

command /fix-servers-new-mc:
    permission: admin.rank
    trigger:
        send "Starting process..." to player
        loop {servers::*}:
            make console execute command "mv import %loop-value% NORMAL"
            wait 3 seconds
            make console execute command "mv import %loop-value%_nether NETHER"
            wait 3 seconds
            make console execute command "mv import %loop-value%_the_end END"
        send "Servers fixed! Maybe...." to player

every 5 seconds in "Lobby":
    loop all players:
        if loop-player's world is "Lobby":
            wipe loop-player's sidebar
            set name of sidebar of loop-player to "&a&lPLUSTIS"
            set score "&a" in sidebar of loop-player to 15
            set score "Create your" in sidebar of loop-player to 14
            set score "Realm today" in sidebar of loop-player to 13
            set score "with &a/create" in sidebar of loop-player to 12
            set score "&3" in sidebar of loop-player to 11
            set score "&7Players: &r%{players_online}%" in sidebar of loop-player to 10
            set score "&7Realms Online: &r%{nserver_online}%" in sidebar of loop-player to 9
            set score "&7Realms Hosted: &r%{ServerNumber}%" in sidebar of loop-player to 8
            set score "&6RGold&7: &r%{rgold.%loop-player%}%" in sidebar of loop-player to 7
            set score "&7Ping: &r%loop-player's ping%" in sidebar of loop-player to 6
            set score "&b" in sidebar of loop-player to 5
            set score "&aplay.plustis.xyz" in sidebar of loop-player to 4
            set score "&abedrock.plustis.xyz:25578" in sidebar of loop-player to 3
        else:
            wipe loop-player's sidebar
            if {plugin.scoreboard.%loop-player's world%} is "Installed":
                if {line.head.%loop-player's world%} is "<null>":
                    #
                else if {line.head.%loop-player's world%} is not set:
                    #
                else:
                    if {line.head.%loop-player's world%} is "<space>":
                        set name of sidebar of loop-player to "  "
                    else:
                        set name of sidebar of loop-player to "%colored {line.head.%loop-player's world%}%"

                if {line.15.%loop-player's world%} is "<null>":
                    #
                else if {line.15.%loop-player's world%} is not set:
                    #
                else:
                    if {line.15.%loop-player's world%} is "<space>":
                        set score "  " in sidebar of loop-player to 15
                    else:
                        set score "%colored {line.15.%loop-player's world%}%" in sidebar of loop-player to 15


                if {line.14.%loop-player's world%} is "<null>":
                    #
                else if {line.14.%loop-player's world%} is not set:
                    #
                else:
                    if {line.14.%loop-player's world%} is "<space>":
                        set score "  " in sidebar of loop-player to 14
                    else:
                        set score "%colored {line.14.%loop-player's world%}%" in sidebar of loop-player to 14


                if {line.13.%loop-player's world%} is "<null>":
                    #
                else if {line.13.%loop-player's world%} is not set:
                    #
                else:
                    if {line.13.%loop-player's world%} is "<space>":
                        set score "  " in sidebar of loop-player to 13
                    else:
                        set score "%colored {line.13.%loop-player's world%}%" in sidebar of loop-player to 13


                if {line.12.%loop-player's world%} is "<null>":
                    #
                else if {line.12.%loop-player's world%} is not set:
                    #
                else:
                    if {line.12.%loop-player's world%} is "<space>":
                        set score "  " in sidebar of loop-player to 12
                    else:
                        set score "%colored {line.12.%loop-player's world%}%" in sidebar of loop-player to 12


                if {line.11.%loop-player's world%} is "<null>":
                    #
                else if {line.11.%loop-player's world%} is not set:
                    #
                else:
                    if {line.11.%loop-player's world%} is "<space>":
                        set score "  " in sidebar of loop-player to 11
                    else:
                        set score "%colored {line.11.%loop-player's world%}%" in sidebar of loop-player to 11


                if {line.10.%loop-player's world%} is "<null>":
                    #
                else if {line.10.%loop-player's world%} is not set:
                    #
                else:
                    if {line.10.%loop-player's world%} is "<space>":
                        set score "  " in sidebar of loop-player to 10
                    else:
                        set score "%colored {line.10.%loop-player's world%}%" in sidebar of loop-player to 10


                if {line.9.%loop-player's world%} is "<null>":
                    #
                else if {line.9.%loop-player's world%} is not set:
                    #
                else:
                    if {line.9.%loop-player's world%} is "<space>":
                        set score "  " in sidebar of loop-player to 9
                    else:
                        set score "%colored {line.9.%loop-player's world%}%" in sidebar of loop-player to 9


                if {line.8.%loop-player's world%} is "<null>":
                    #
                else if {line.8.%loop-player's world%} is not set:
                    #
                else:
                    if {line.8.%loop-player's world%} is "<space>":
                        set score "  " in sidebar of loop-player to 8
                    else:
                        set score "%colored {line.8.%loop-player's world%}%" in sidebar of loop-player to 8


                if {line.7.%loop-player's world%} is "<null>":
                    #
                else if {line.7.%loop-player's world%} is not set:
                    #
                else:
                    if {line.7.%loop-player's world%} is "<space>":
                        set score "  " in sidebar of loop-player to 7
                    else:
                        set score "%colored {line.7.%loop-player's world%}%" in sidebar of loop-player to 7


                if {line.6.%loop-player's world%} is "<null>":
                    #
                else if {line.6.%loop-player's world%} is not set:
                    #
                else:
                    if {line.6.%loop-player's world%} is "<space>":
                        set score "  " in sidebar of loop-player to 6
                    else:
                        set score "%colored {line.6.%loop-player's world%}%" in sidebar of loop-player to 6


                if {line.5.%loop-player's world%} is "<null>":
                    #
                else if {line.5.%loop-player's world%} is not set:
                    #
                else:
                    if {line.5.%loop-player's world%} is "<space>":
                        set score "  " in sidebar of loop-player to 5
                    else:
                        set score "%colored {line.5.%loop-player's world%}%" in sidebar of loop-player to 5


                if {line.4.%loop-player's world%} is "<null>":
                    #
                else if {line.4.%loop-player's world%} is not set:
                    #
                else:
                    if {line.4.%loop-player's world%} is "<space>":
                        set score "  " in sidebar of loop-player to 4
                    else:
                        set score "%colored {line.4.%loop-player's world%}%" in sidebar of loop-player to 4


                if {line.3.%loop-player's world%} is "<null>":
                    #
                else if {line.3.%loop-player's world%} is not set:
                    #
                else:
                    if {line.3.%loop-player's world%} is "<space>":
                        set score "  " in sidebar of loop-player to 3
                    else:
                        set score "%colored {line.3.%loop-player's world%}%" in sidebar of loop-player to 3


                if {line.2.%loop-player's world%} is "<null>":
                    #
                else if {line.2.%loop-player's world%} is not set:
                    #
                else:
                    if {line.2.%loop-player's world%} is "<space>":
                        set score "  " in sidebar of loop-player to 2
                    else:
                        set score "%colored {line.2.%loop-player's world%}%" in sidebar of loop-player to 2


                if {line.1.%loop-player's world%} is "<null>":
                    #
                else if {line.1.%loop-player's world%} is not set:
                    #
                else:
                    if {line.1.%loop-player's world%} is "<space>":
                        set score "  " in sidebar of loop-player to 1
                    else:
                        set score "%colored {line.1.%loop-player's world%}%" in sidebar of loop-player to 1

every 7 seconds in "Lobby":
    set {num} to 0
    loop all players:
        add 1 to {num}
    set {players_online} to {num}

command /setonline <text>:
    permission: admin.rank
    trigger:
        set {players_online} to arg-1

command /Realms:
    trigger:
        send "%{servers::*}%"

command /servers_manage <text> <text>:
    permission: admin.rank
    trigger:
        if arg-1 is "add":
            add arg-2 to {servers::*}
        if arg-1 is "remove":
            remove arg-2 from {servers::*}

command /blacklistsrv <text>:
    trigger:
        add arg-1 to {blacklistedsrvnames::*}

command /service <text>:
    permission: admin.rank
    trigger:
        if arg-1 is "on":
            set {service.phost} to "Online"
            send "&cServer> &ePlustis services are back online!" to all players
        if arg-1 is "off":
            set {service.phost} to "Offline"
            send "&cServer> &ePlustis services are now offline!" to all players

command /plistadd <text>:
    permission: admin.rank
    trigger:
        add "%arg-1%" to {players::*}
        send "added"

command /everjoined:
    trigger:
        send "%{players::*}%"

command /cleareverjoined:
    trigger:
        clear {players::*}

on join:
        make console execute command "/worldchange %player% Lobby"
        wait 0.2 seconds
        make console execute command "/clear %player%"
        wait 0.2 seconds
        set {vanish.%player%} to "false"
        wait 1 second
        
        set slot 4 of player's inventory to book named "&l&6Realms Menu &7(Click)" with lore "Open to join, and manage your player server"
        #set slot 4 of player's inventory to nether star named "&l&3Servers &7(Click)" with lore "Plustis servers [Not Realms]"
        #set slot 7 of player's inventory to player's skull named "&l&bProfile &7(Click)" with lore "Manage your profile"
        
        if {players::*} contains "%player%":
                stop
        else:
                add "%player%" to {players::*}
        make console execute command "/essentials:gma %player%"

command /website:
    trigger:
        send formatted "&3Website: <url:http://plustis.xyz/>&bhttp://plustis.xyz/<reset>"

command /forums:
    trigger:
        send formatted "&3Forums: <url:http://plustis.xyz/forums>&bhttp://plustis.xyz/forums<reset>"

command /rules:
    trigger:
        send formatted "&3Rules: <url:http://plustis.xyz/rules>&bhttp://plustis.xyz/rules<reset>"

command /discord:
    trigger:
        send formatted "&3Discord: <url:https://discord.gg/dZb5KEz>&bhttps://discord.gg/dZb5KEz<reset>"

command /youtube:
    trigger:
        send formatted "&3YouTube Channel: <url:https://www.youtube.com/channel/UCsAO7MHEcec7fXIzcsLFONQ>&bhttps://www.youtube.com/channel/UCsAO7MHEcec7fXIzcsLFONQ<reset>"

command /develop:
    trigger:
        send formatted "&3Develop: <url:https:://plustis.xyz/develop>&bhttps:://plustis.xyz/develop<reset>"

command /lobby:
    trigger:
        if player's world is "Lobby":
            make console execute command "/essentials:warp Lobby %player%"
            make console execute command "vanish %player% off"
        else:
            if {plugin.discordsrv.%player's world%} is "Installed":
                send "**%player% has left the Realm**" to channel with id "%{chat.id.%player's world%}%" with "DiscordSRV"
            broadcast "&7%player% %colored {leave.message.%player's world%}%" to player's world
            make console execute command "/essentials:warp Lobby %player%"
            make console execute command "vanish %player% off"
            send "&3Sent you to &bLobby"
            broadcast "&7%player% &3has joined your lobby" to player's world
            wait 3 second  
            set slot 4 of player's inventory to book named "&l&6Realms Menu &7(Click)" with lore "Open to join, and manage your player server"

command /hub:
    trigger:
        make player execute command "/lobby"

on click with book:
    if player's world is "Lobby":
        make player execute command "/?menu"

on click with nether star:
    if player's world is "Lobby":
        make player execute command "/server-selector"

on click with player head:
    if player's world is "Lobby":
        make player execute command "/?profile"

on click with paper:
    if player's world is "Lobby":
        send "&3IP: &bplay.plustis.xyz"
        send "&3Bedrock IP: &b54.39.246.43 &3Port: &b25595"
        send formatted "&3Website: <url:http://plustis.xyz>&bhttp://plustis.xyz<reset>"
        send formatted "&3Discord: <url:https://discord.gg/dZb5KEz>&bhttps://discord.gg/dZb5KEz<reset>"
        send formatted "&3Rules: <url:http://plustis.xyz/rules>&bhttp://plustis.xyz/rules<reset>"
        send formatted "&3Store: <url:http://plustis.xyz/store>&bhttp://plustis.xyz/store<reset>"

command /?profile_1:
    trigger:
        make player execute command "/?profile %player%"

on join:
    add 1 to {joined.%player%}
    if {st.%player%} is not set:
        set {st.%player%} to "A Plustis User"
    if {profile.visible.%player%} is not set:
        set {profile.visible.%player%} to true

command /?profile [<offline player>]:
    trigger:
        if arg-1 is set:
            wait 0.3 seconds
            open chest with 2 row named "&b%arg-1%&3's profile" to player
            format slot 4 of player with arg-1's skull named "&b%arg-1%" with lore "&3Rank: &r%{rank.%arg-1%}%" to close then run [make player execute command "/find %arg-1%"]
            if arg-1 is "%player%":
                format slot 8 of player with ender eye named "&3Settings" to close then run [make player execute command "/?profile_settings"]
            if arg-1 is online:
                format slot 9 of player with lime dye named "&bStatus" with lore "&aOnline" to close
            else:
                format slot 9 of player with red dye named "&bStatus" with lore "&cOffline" to close

            if arg-1 is online:
                format slot 10 of player with paper named "&bPlaying on:" with lore "%arg-1's world%" to close
            else:
                format slot 10 of player with paper named "&bPlaying on:" with lore "&cOffline" to close

            format slot 11 of player with book named "&bStatus Message" with lore "%colored {st.%arg-1%}%" to close
            format slot 12 of player with book named "&bTimes Joined" with lore "%{joined.%arg-1%}%" to close
            format slot 13 of player with book named "&bOwner of:" with lore "%{server.name.%arg-1%}%" to close
            if arg-1 is "%player%":
                format slot 14 of player with player head named "&bFriends" to close then run [make player execute command "/pfriends_menu"]
            else:
                format slot 14 of player with player head named "&bFriends" to close then run [make player execute command "/pfriends_view %arg-1%"]
            format slot 15 of player with barrier named "&cComing soon..." to close
            format slot 16 of player with barrier named "&cComing soon..." to close
            format slot 17 of player with barrier named "&cComing soon..." to close
        else:
            make player execute command "/?profile_1"

command /?profile_settings:
    trigger:
        wait 0.3 seconds
        open chest with 2 row named "&bProfile Settings" to player
        format slot 13 of player with compass named "&eBack" to close then run [make player execute command "/?profile %player%"]
        format slot 3 of player with ender eye named "&3Status" to close then run [make player execute command "/?profile_settings_status"]
        format slot 5 of player with glass block named "&3Profile Privacy" to close then run [make player execute command "/?profile_settings_privacy"]

command /?profile_settings_status:
    trigger:
        send "&aType: &b/status-msg <new status>"

command /status-msg <text>:
    trigger:
        send "&aStatus set to: &r%colored arg-1%"
        set {st.%player%} to arg-1

command /?profile_settings_privacy:
    trigger:
        send "&aType: &b/visible <yes/no>"

command /visible <text>:
    trigger:
        if arg-1 is "yes":
            send "&aSet Profile Visibility: &b%arg-1%"
            set {profile.visible.%player%} to true
        if arg-1 is "no":
            send "&aSet Profile Visibility: &b%arg-1%"
            set {profile.visible.%player%} to false

#on right click:
    #if player's world is "Lobby":
        #if event-entity is a player:
            #if {profile.visible.%event-entity%} is true:
                #make player execute command "/?profile %event-entity%"

command /controlp:
    trigger:
        wait 0.3 seconds
        if player's world is "Lobby":
            if {service.phost} is "Online":
                if {server.created.%player%} is "true":
                    if {suspended.%{server.name.%player%}%} is "true":
                        send "&cYour Realm has been suspended. Join our Discord to appeal"
                    else:
                        open chest with 2 row named "&6ControlPanel &7| &3%{server.name.%player%}%" to player
                        if {status.%{server.name.%player%}%} is "Online":
                            format slot 1 of player with red wool named "&cStop" with lore "&3Stop your Realm" to close then run [make player execute command "pstop"]
                            format slot 3 of player with book named "&bSettings" with lore "&3Manage your Realm's settings" to close then run [make player execute command "psettings"]
                            format slot 5 of player with emerald named "&aMinecraft Version Settings" to close then run [make player execute command "pmcsettings"]
                            format slot 7 of player with tnt named "&cDanger Zone" with lore "&3Danger zone" to close then run [make player execute command "pdangerz"]
                            format slot 13 of player with compass named "&eBack" to close then run [make player execute command "/?menu"]
                        else:
                            format slot 2 of player with lime wool named "&aStart" with lore "&3Start your Realm" to close then run [make player execute command "pstart"]
                            format slot 4 of player with book named "&bSettings" with lore "&3Manage your Realm's settings" to close then run [make player execute command "psettings"]
                            format slot 6 of player with crafting table named "&bRepair Files" with lore "&3Fixes your Realm if you have issues with it" to close then run [make player execute command "prepair"]
                            format slot 13 of player with compass named "&eBack" to close then run [make player execute command "/?menu"]
                else:
                    send "&cYou don't have a Realm! Create one with &3/create"
            else:
                send "&cServices are currently offline! Try again later!"
        else:
            send "&cYou must be in &bLobby &cto do this!"

command /pstart:
    trigger:
        if {service.phost} is "Online":
            if {suspended.%{server.name.%player%}%} is "true":
                send "&cYour Realm has been suspended. You may appeal on &b/forums"
                send action bar "&cStarting failed!" to player
            else:
                if {nserver_online} >= 27:
                    send "&cMax Realm capacity reached, please wait"
                    send action bar "&cStarting failed!" to player
                else:
                    send action bar "&aStarting Realm..." to player
                    send "&aStarting Realm..."
                    make console execute command "mv load %{server.name.%player%}%"
                    wait 3 seconds
                    make console execute command "mv load %{server.name.%player%}%_nether"
                    wait 3 seconds
                    make console execute command "mv load %{server.name.%player%}%_the_end"
                    set {status.%{server.name.%player%}%} to "Online"
                    send "&aRealm started!"
                    make player execute command "/controlp"
                    clear {console.%{server.name.%player%}%::*}
                    wait 0.2 seconds
                    add "Starting Realm..." to {console.%{server.name.%player%}%::*}
                    add "Loading gamerules..." to {console.%{server.name.%player%}%::*}
                    add "Loading plugins..." to {console.%{server.name.%player%}%::*}
                    add "Realm started!" to {console.%{server.name.%player%}%::*}
                    send action bar "&aRealm started!" to player
        else:
            send "&cServices are currently offline! Try again later!"
            send action bar "&cStarting failed!" to player

on quit:
        if {24_7_p_%player%} is "on":
                set {status.%{server.name.%player%}%} to "Online"
        else:
                make console execute command "kickallplayers %{server.name.%player%}%"
                make console execute command "kickallplayers %{server.name.%player%}%_nether"
                make console execute command "kickallplayers %{server.name.%player%}%_the_end"

                make console execute command "mv unload %{server.name.%player%}%"
                wait 3 seconds
                make console execute command "mv unload %{server.name.%player%}%_nether"
                wait 3 seconds
                make console execute command "mv unload %{server.name.%player%}%_the_end"

                set {status.%{server.name.%player%}%} to "Offline"

command /pstop:
    trigger:
        make console execute command "kickallplayers %{server.name.%player%}%"
        make console execute command "kickallplayers %{server.name.%player%}%_nether"
        make console execute command "kickallplayers %{server.name.%player%}%_the_end"
        send action bar "&cStopping Realm..." to player
        set {24_7_p_%player%} to "off"
        set {24_7_%{server.name.%player%}%} to "false"
        send "&cStopping Realm..."
        add "Stopping Realm..." to {console.%{server.name.%player%}%::*}
        add "Unoading gamerules..." to {console.%{server.name.%player%}%::*}
        add "Unloading plugins..." to {console.%{server.name.%player%}%::*}
        add "Realm stopped!" to {console.%{server.name.%player%}%::*}
        make console execute command "mv unload %{server.name.%player%}%"
        wait 3 seconds
        make console execute command "mv unload %{server.name.%player%}%_nether"
        wait 3 seconds
        make console execute command "mv unload %{server.name.%player%}%_the_end"
        wait 3 seconds
        set {status.%{server.name.%player%}%} to "Offline"
        clear {latest.log.%player's world%::*}
        set {latest.log.%{server.name.%player%}%::*} to {console.%{server.name.%player%}%::*}
        send "&cRealm stopped"
        make player execute command "/controlp"
        send action bar "&cRealm Stopped!" to player

every 5 seconds in "Lobby":
    set {nserver_online} to 0
    loop {servers::*}:
        if {status.%loop-value%} is "Online":
            add 1 to {nserver_online}

command /psettings:
    trigger:
        wait 0.3 seconds
        open chest with 2 row named "&6ControlPanel &3> Settings" to player
        format slot 0 of player with redstone named "&3Custom IP" with lore "&3Manage your Realm's Custom IP" to close then run [make player execute command "psettings_domain"]
        format slot 2 of player with nametag named "&3RealmBrowser Settings" with lore "&3Manage your Relam's appeareance settings" and "&3in the RealmBrowser" to close then run [make player execute command "psettings_browser"]
        format slot 4 of player with book named "&3Whitelist" with lore "&3Manage your Realm's whitelist" to close then run [make player execute command "psettings_whitelist"]
        format slot 6 of player with grass block named "&3World Settings" with lore "&3Manage your Realm's world" to close then run [make player execute command "psettings_world"]
        format slot 8 of player with repeater named "&324/7 Hosting" with lore "&3Host your Realm 24/7" and "&a[VIP]+ &conly" to close then run [make player execute command "psettings_24_7"]
        format slot 13 of player with compass named "&eBack" to close then run [make player execute command "controlp"]

command /psettings_domain:
    trigger:
        wait 0.3 seconds
        open chest with 2 row named "&6ControlPanel &3> Settings > Custom IP" to player
        format slot 13 of player with compass named "&eBack" to close then run [make player execute command "psettings"]
        
        if {domain.%{server.name.%player%}%} is not set:
            format slot 2 of player with lime wool named "&aRequest Custom IP" to close then run [make player execute command "?customip_request"]
            format slot 6 of player with book named "&aInfo" with lore "&aClick to know more" to close then run [send formatted "&3Help Center: <url:http://support.plustis.xyz/>&bhttp://support.plustis.xyz/<reset>"]
        else:
            format slot 2 of player with red wool named "&cRemove Custom IP" with lore "&aIP: &3%{domain.%{server.name.%player%}%}%:25578" to close then run [make player execute command "?customip_remove"]
            format slot 6 of player with book named "&aInfo" with lore "&aClick to know more" to close then run [send formatted "&3Help Center: <url:http://support.plustis.xyz/>&bhttp://support.plustis.xyz/<reset>"]

command /?customip_request:
    trigger:
        send "&aPlease /customip <Top level domain you would like> (example: &ctest&3.example.com&a > /customip test)"

command /customip <text> [<text>]:
    trigger:
        if {domain.%{server.name.%player%}%} is not set:
            if arg-2 is not set:
                send "&aPlease type &3/customip %arg-1% <domain> (Currently available: plustis.xyz, mcworld.xyz)"
                send "&3Example /customip %arg-1% example.com"
            else:
                if {customips::*} contains "%arg-1%.%arg-2%":
                    send "&cOps! Seems like this custom ip is already taken! Please chose another"
                else:
                    send "[**REQUEST**] %player% has requested activation of `%arg-1%.%arg-2%` for Realm **%{server.name.%player%}%**" to channel with id "768025548210307102" with "MainBot"
                    send "&aActivation successful! Please mind that it might take up to 24 to activate. If it doesn't activate in 24 hours, please contact support with &b/support"
                    send "&aIP: &3%arg-1%.%arg-2%:25578"
                    set {domain.%{server.name.%player%}%} to "%arg-1%.%arg-2%"
        else:
            send "&cOps! Your Realm already has a Custom IP!"

command /?customip_remove:
    trigger:
        if {domain.%{server.name.%player%}%} is set:
            send "[**DEACTIVATION**] %player% has requested deactivation of `%{domain.%{server.name.%player%}%}%` for Realm **%{server.name.%player%}%**" to channel with id "768025548210307102" with "MainBot"
            clear {domain.%{server.name.%player%}%}
            send "&cCustom Domain will be deactivated"

command /?customip <text> [<text>]:
    trigger:
        if arg-1 is "add":
            if arg-2 is set:
                add arg-2 to {customips::*}
                send "&aIP added"
        if arg-1 is "remove":
            if arg-2 is set:
                remove arg-2 from {customips::*}
                send "&cIP removed"
        if arg-1 is "list":
            send "%{customips::*}%"

command /psettings_motd:
    trigger:
        wait 0.3 seconds
        open chest with 2 row named "&6ControlPanel &3> Settings > Browser > Motd" to player
        format slot 3 of player with paper named "&3Change Motd" with lore "&3Current: %colored {motd.%{server.name.%player%}%}%" to close then run [make player execute command "psettings_motd_change"]
        format slot 5 of player with iron bars named "&3Motd" with lore "&3Reset your motd to default" to close then run [make player execute command "psettings_motd_reset"]
        format slot 13 of player with compass named "&eBack" to close then run [make player execute command "psettings"]

command /psettings_motd_change:
    trigger:
        send "&aType &b/motd <motd> &ato change your MOTD!"

command /motd <text>:
    trigger:
        set {motd.%{server.name.%player%}%} to arg-1
        send "&aMotd set! Preview: &r%colored arg-1%"

command /psettings_motd_reset:
    trigger:
        set {motd.%{server.name.%player%}%} to "A Plustis Realm."

command /psettings_browser:
    trigger:
        wait 0.3 seconds
        open chest with 2 row named "&6ControlPanel &3> Settings > Browser" to player
        format slot 13 of player with compass named "&eBack" to close then run [make player execute command "psettings"]
        format slot 2 of player with cake named "&aRealm Icon" with lore "&3Manage your Realm's icon" to close then run [make player execute command "prealmicons"]
        format slot 4 of player with paper named "&cShow/Hide Realm" with lore "&3Show/Hide your Realm in the Realm Browser" to close then run [make player execute command "psettings_browser_show"]
        format slot 6 of player with paper named "&3Motd" with lore "&3Manage your Realm's motd" to close then run [make player execute command "psettings_motd"]

command /prealmicons:
    trigger:
        wait 0.3 seconds
        open chest with 2 row named "&6ControlPanel &3> Settings > Browser > Realm Icons" to player
        format slot 13 of player with compass named "&eBack" to close then run [make player execute command "psettings_browser"]
        format slot 2 of player with hopper named "&aSelect Icon" with lore "&3Select a new icon for your Realm" to close then run [make player execute command "prealmicons_select"]
        format slot 6 of player with tnt named "&cReset Icon" with lore "&3Reset your Realm's icon" and "&c(NO Confirmation asked)" to close then run [make player execute command "prealmicons_reset"]

command /prealmicons_reset:
    trigger:
        clear {icon.%{server.name.%player%}%}
        send "&cRealm Icon Resetted!"
        make player execute command "/prealmicons"

command /prealmicons_select:
    trigger:
        wait 0.3 seconds
        open chest inventory with 4 rows named "&6ControlPanel &3> Realm Icons > Your Icons" to player
        set {num1.%player%} to -1
        loop {icons.%player%::*}:
            add 1 to {num1.%player%}
            set slot {num1.%player%} of player's current inventory to oak sign named "%loop-value%" with lore "&3Click to use"
        set slot 31 of player's current inventory to compass named "Back"

on inventory click:
    if inventory name of player's current inventory is "&6ControlPanel &3> Realm Icons > Your Icons":
        if event-slot is compass named "Back":
            cancel event
            close player's inventory
            make player execute command "/prealmicons"
        else:
            cancel event
            close player's inventory
            make player execute command "/prealmicons_use %event-slot's name%"

command /prealmicons_use <text>:
    trigger:
        if {Icons::*} contains arg-1:
            if {icons.%player%::*} contains arg-1:

                if arg-1 is "grass_block":
                    set {icon.%{server.name.%player%}%} to grass block

                if arg-1 is "dirt":
                    set {icon.%{server.name.%player%}%} to dirt

                if arg-1 is "stone":
                    set {icon.%{server.name.%player%}%} to stone

                if arg-1 is "oak_planks":
                    set {icon.%{server.name.%player%}%} to oak planks

                if arg-1 is "oak_log":
                    set {icon.%{server.name.%player%}%} to oak log

                if arg-1 is "water_bucket":
                    set {icon.%{server.name.%player%}%} to water bucket

                if arg-1 is "lava_bucket":
                    set {icon.%{server.name.%player%}%} to lava bucket

                if arg-1 is "bucket":
                    set {icon.%{server.name.%player%}%} to bucket

                if arg-1 is "diamond_sword":
                    set {icon.%{server.name.%player%}%} to diamond sword

                if arg-1 is "iron_sword":
                    set {icon.%{server.name.%player%}%} to iron sword

                if arg-1 is "bow":
                    set {icon.%{server.name.%player%}%} to bow

                if arg-1 is "tnt":
                    set {icon.%{server.name.%player%}%} to tnt


                send "&aIcon set!"
            else:
                send "&cYou don't own this icon! Type &6/shop &cto buy it!"
        else:
            send "&cOps! This icon doesn't exist or is temporarly disabled!"

command /icon <text> [<text>]:
    permission: op
    trigger:
        if arg-1 is "list":
            send "Icons: %{Icons::*}%"
        if arg-1 is "add":
            if arg-2 is set:
                add arg-2 to {Icons::*}
                send "&aSet!"
        if arg-1 is "remove":
            if arg-2 is set:
                remove arg-2 from {Icons::*}
                send "&cRemoved!"

command /psettings_browser_show:
    trigger:
        send "&aType /show <true/false>"

command /show <text>:
    trigger:
        if arg-1 is "true":
            set {show.%{server.name.%player%}%} to "true"
        if arg-1 is "false":
            set {show.%{server.name.%player%}%} to "false"

command /psettings_whitelist:
    trigger:
        wait 0.3 seconds
        open chest with 2 row named "&6ControlPanel &3> Settings > Whitelist" to player
        if {whitelistst.%{server.name.%player%}%} is "true":
            format slot 2 of player with red wool named "&cDisable Whitelist" with lore "&3Click to disable" to close then run [make player execute command "psettings_whitelist_off"]
            format slot 4 of player with paper named "&3Add/Remove" with lore "&3Click to add/remove players" to close then run [make player execute command "psettings_whitelist_manage"]
            format slot 6 of player with paper named "&3Whitelist" with lore "&3&3Whitelisted: &r%{whitelist.%{server.name.%player%}%::*}%" to close
            format slot 13 of player with compass named "&eBack" to close then run [make player execute command "psettings"]
        else:
            format slot 4 of player with lime wool named "&aEnable Whitelist" with lore "&3Click to enable" to close then run [make player execute command "psettings_whitelist_on"]
            format slot 13 of player with compass named "&eBack" to close then run [make player execute command "psettings"]

command /psettings_whitelist_on:
    trigger:
        set {whitelistst.%{server.name.%player%}%} to "true"
        send "&aWhitelist enabled!"
        make player execute command "/psettings_whitelist"

command /psettings_whitelist_off:
    trigger:
        set {whitelistst.%{server.name.%player%}%} to "false"
        send "&aWhitelist disabled!"
        make player execute command "/psettings_whitelist"

command /psettings_whitelist_manage:
    trigger:
        send "&aType &b/pwhitelist <add/remove> <player>"

command /pwhitelist <text> <offline player>:
    trigger:
        if arg-1 is "add":
            if {whitelist.%{server.name.%player%}%::*} contains arg-2:
                send "&cError: &b%arg-2% &cis alredy whitelisted!"
            else:
                add arg-2 to {whitelist.%{server.name.%player%}%::*}
                send "&aAdded &b%arg-2% &ato the whitelist"
        if arg-1 is "remove":
            if {whitelist.%{server.name.%player%}%::*} contains arg-2:
                remove arg-2 from {whitelist.%{server.name.%player%}%::*}
                send "&aRemoved &b%arg-2% &afrom the whitelist"
            else:
                send "&cError: &b%arg-2% &cis not whitelisted!"

command /psettings_world:
    trigger:
        wait 0.3 seconds
        open chest with 2 row named "&6ControlPanel &3> Settings > World Settings" to player
        format slot 3 of player with paper named "&aUpload World" with lore "&3Request to upload a world" to close then run [make player execute command "psettings_world_upload"]
        format slot 5 of player with paper named "&aDownload World" with lore "&3Request to download a world" to close then run [make player execute command "psettings_world_download"]
        format slot 13 of player with compass named "&eBack" to close then run [make player execute command "psettings"]

command /psettings_world_upload:
    trigger:
        send "&3You may request your Realm's world upload on our &bDiscord &3(&b/discord&3)" to player

command /psettings_world_download:
    trigger:
        send "&3You may request your Realm's world download on our &bDiscord &3(&b/discord&3)" to player

command /pmcsettings:
    trigger:
        wait 0.3 seconds
        open chest with 2 row named "&6ControlPanel &3> Minecraft Version Settings" to player
        format slot 13 of player with compass named "&eBack" to close then run [make player execute command "controlp"]
        format slot 2 of player with grass block named "&aMinecraft Edition Settings" with lore "&3Toggle wich Minecraft Edition can join your Realm" to close then run [make player execute command "pmcsettings_edition"]
        format slot 6 of player with paper named "&bMinecraft Version Settings" with lore "&3Toggle wich Minecraft Version can join your Realm" to close then run [make player execute command "pmcsettings_version"]

command /pmcsettings_edition:
    trigger:
        wait 0.3 seconds
        open chest with 2 row named "&6ControlPanel &3> Minecraft Version Settings > Edition" to player
        format slot 13 of player with compass named "&eBack" to close then run [make player execute command "pmcsettings"]
        if {version.allowed::%{server.name.%player%}%::*} contains "Java":
            format slot 2 of player with lime dye named "&aJava Edition" with lore "&3Platforms: &bPC, Mac, Linux" to close then run [make player execute command "pmcsettings_edition_toggle java off"]
        else:
            format slot 2 of player with gray dye named "&cJava Edition" with lore "&3Platforms: &bPC, Mac, Linux" to close then run [make player execute command "pmcsettings_edition_toggle java on"]
        if {version.allowed::%{server.name.%player%}%::*} contains "Bedrock":
            format slot 6 of player with lime dye named "&aBedrock Edition" with lore "&3Platforms: &bWin10, Android, IOS, Smart Fridge..." to close then run [make player execute command "pmcsettings_edition_toggle bedrock off"]
        else:
            format slot 6 of player with gray dye named "&cBedrock Edition" with lore "&3Platforms: &bWin10, Android, IOS, Smart Fridge..." to close then run [make player execute command "pmcsettings_edition_toggle bedrock on"]

command /pmcsettings_edition_toggle <text> <text>:
    trigger:
        wait 0.3 seconds
        if arg-1 is "Java":
            if arg-2 is "on":
                if {version.allowed::%{server.name.%player%}%::*} contains "Java":
                    #
                else:
                    add "Java" to {version.allowed::%{server.name.%player%}%::*}
                    send "&aJAVA support turned on!"
            if arg-2 is "off":
                remove "Java" from {version.allowed::%{server.name.%player%}%::*}
                send "&cJAVA support turned off!"
        if arg-1 is "Bedrock":
            if arg-2 is "on":
                if {version.allowed::%{server.name.%player%}%::*} contains "Bedrock":
                    #
                else:
                    add "Bedrock" to {version.allowed::%{server.name.%player%}%::*}
                    send "&aBEDROCK support turned on!"
            if arg-2 is "off":
                remove "Bedrock" from {version.allowed::%{server.name.%player%}%::*}
                send "&cBEDROCK support turned off!"

command /pmcsettings_version:
    trigger:
        wait 0.3 seconds
        open chest with 4 row named "&6ControlPanel &3> Minecraft Version Settings > Version" to player
        format slot 31 of player with compass named "&eBack" to close then run [make player execute command "pmcsettings"]

        if {mcversion.allowed::%{server.name.%player%}%::*} contains "1.8":
            format slot 10 of player with lime dye named "&3 1.8" to close then run [make player execute command "pmcsettings_version_toggle 1.8 off"]
        else:
            format slot 10 of player with gray dye named "&3 1.8" to close then run [make player execute command "pmcsettings_version_toggle 1.8 on"]

        if {mcversion.allowed::%{server.name.%player%}%::*} contains "1.9":
            format slot 11 of player with lime dye named "&3 1.9" to close then run [make player execute command "pmcsettings_version_toggle 1.9 off"]
        else:
            format slot 11 of player with gray dye named "&3 1.9" to close then run [make player execute command "pmcsettings_version_toggle 1.9 on"]

        if {mcversion.allowed::%{server.name.%player%}%::*} contains "1.10":
            format slot 12 of player with lime dye named "&3 1.10" to close then run [make player execute command "pmcsettings_version_toggle 1.10 off"]
        else:
            format slot 12 of player with gray dye named "&3 1.10" to close then run [make player execute command "pmcsettings_version_toggle 1.10 on"]

        if {mcversion.allowed::%{server.name.%player%}%::*} contains "1.11":
            format slot 13 of player with lime dye named "&3 1.11" to close then run [make player execute command "pmcsettings_version_toggle 1.11 off"]
        else:
            format slot 13 of player with gray dye named "&3 1.11" to close then run [make player execute command "pmcsettings_version_toggle 1.11 on"]

        if {mcversion.allowed::%{server.name.%player%}%::*} contains "1.12":
            format slot 14 of player with lime dye named "&3 1.12" to close then run [make player execute command "pmcsettings_version_toggle 1.12 off"]
        else:
            format slot 14 of player with gray dye named "&3 1.12" to close then run [make player execute command "pmcsettings_version_toggle 1.12 on"]

        if {mcversion.allowed::%{server.name.%player%}%::*} contains "1.13":
            format slot 15 of player with lime dye named "&3 1.13" to close then run [make player execute command "pmcsettings_version_toggle 1.13 off"]
        else:
            format slot 15 of player with gray dye named "&3 1.13" to close then run [make player execute command "pmcsettings_version_toggle 1.13 on"]

        if {mcversion.allowed::%{server.name.%player%}%::*} contains "1.14":
            format slot 16 of player with lime dye named "&3 1.14" to close then run [make player execute command "pmcsettings_version_toggle 1.14 off"]
        else:
            format slot 16 of player with gray dye named "&3 1.14" to close then run [make player execute command "pmcsettings_version_toggle 1.14 on"]

        if {mcversion.allowed::%{server.name.%player%}%::*} contains "1.15":
            format slot 19 of player with lime dye named "&3 1.15" to close then run [make player execute command "pmcsettings_version_toggle 1.15 off"]
        else:
            format slot 19 of player with gray dye named "&3 1.15" to close then run [make player execute command "pmcsettings_version_toggle 1.15 on"]

        if {mcversion.allowed::%{server.name.%player%}%::*} contains "1.16":
            format slot 20 of player with lime dye named "&3 1.16" to close then run [make player execute command "pmcsettings_version_toggle 1.16 off"]
        else:
            format slot 20 of player with gray dye named "&3 1.16" to close then run [make player execute command "pmcsettings_version_toggle 1.16 on"]

command /pmcsettings_version_toggle <text> <text>:
    trigger:
        if arg-2 is "on":
            add arg-1 to {mcversion.allowed::%{server.name.%player%}%::*}
            send "&aVersion &3%arg-1% &aenabled"
        if arg-2 is "off":
            remove arg-1 from {mcversion.allowed::%{server.name.%player%}%::*}
            send "&cVersion &3%arg-1% &cdisabled"
        make player execute command "/pmcsettings_version"

command /?mcversion <text> [<text>]:
    permission: op
    trigger:
        if arg-1 is "add":
            add arg-2 to {allmcversions::*}
        if arg-1 is "remove":
            remove arg-2 from {allmcversions::*}
        if arg-1 is "list":
            send "%{allmcversions::*}%" to player

command /pdangerz:
    trigger:
        wait 0.3 seconds
        open chest with 2 row named "&6ControlPanel &3> Danger Zone" to player
        format slot 13 of player with compass named "&eBack" to close then run [make player execute command "controlp"]
        format slot 2 of player with redstone block named "&cDelete Realm" with lore "&3Delete your Realm" and "&a(Confirmation asked)" to close then run [make player execute command "delete_confirm"]
        format slot 6 of player with tnt named "&cReset World" with lore "&3Reset a world in your realm (Overworld, Nether, end)" and "&a(Confirmation asked)" to close then run [make player execute command "reset_select"]

command /delete_confirm:
    trigger:
        wait 0.3 seconds
        open chest with 1 row named "&cAre you sure you want to delete your Realm?" to player
        format slot 2 of player with lime wool named "&aYes" to close then run [make player execute command "?delete"]
        format slot 4 of player with compass named "&eThis action cannot be undone!" to close
        format slot 6 of player with red wool named "&cNo" to close then run [make player execute command "pdangerz"]

command /reset_select:
    trigger:
        wait 0.3 seconds
        open chest with 2 row named "&cSelect World" to player
        format slot 13 of player with compass named "&eBack" to close then run [make console execute command "pdangerz"]
        format slot 2 of player with grass block named "&aOverworld" to close then run [make player execute command "reset_confirm overworld"]
        format slot 4 of player with netherrack named "&cNether" to close then run [make player execute command "reset_confirm nether"]
        format slot 6 of player with end stone named "&bEnd" to close then run [make player execute command "reset_confirm end"]

command /reset_confirm <text>:
    trigger:
        wait 0.3 seconds
        open chest with 1 row named "&cAre you sure you want to reset this world? &f(&3%arg-1%&f)" to player
        format slot 2 of player with lime wool named "&aYes" to close then run [make player execute command "?reset %arg-1%"]
        format slot 4 of player with compass named "&eThis action cannot be undone!" to close
        format slot 6 of player with red wool named "&cNo" to close then run [make player execute command "reset_select"]

command /?reset <text>:
    trigger:
        wait 0.3 seconds
        send "&cResetting world..."
        if arg-1 is "overworld":
            make console execute command "kickallplayers %{server.name.%player%}%"
        if arg-1 is "nether":
            make console execute command "kickallplayers %{server.name.%player%}%_nether"
        if arg-1 is "end":
            make console execute command "kickallplayers %{server.name.%player%}%_the_end"
        wait 1 second

        if arg-1 is "overworld":
            make console execute command "mv delete %{server.name.%player%}%"
            wait 3 seconds
            make console execute command "mvconfirm"
            wait 2 seconds
            make console execute command "mv create %{server.name.%player%}% NORMAL"

        if arg-1 is "nether":
            make console execute command "mv delete %{server.name.%player%}%_nether"
            wait 3 seconds
            make console execute command "mvconfirm"
            wait 2 seconds
            make console execute command "mv create %{server.name.%player%}%_nether NETHER"

        if arg-1 is "end":
            make console execute command "mv delete %{server.name.%player%}%_the_end"
            wait 3 seconds
            make console execute command "mvconfirm"
            wait 2 seconds
            make console execute command "mv create %{server.name.%player%}%_the_end END"

        send "[**RESETTED**] %player% has resetted **Realm > %arg-1%** `%{server.name.%player%}%`" to channel with id "719181553611046962" with "MainBot"
        wait 5 seconds
        send "&aWorld resetted!"

command /psettings_24_7:
    permission: vip.rank
    permission message: &cOps! This perk is &a[VIP]+ &conly!
    trigger:
        wait 0.3 seconds
        open chest with 1 row named "&6ControlPanel &3> Settings > 24/7 Hosting" to player
        if {24_7_p_%player%} is "on":
            format slot 0 of player with compass named "&eBack" to close then run [make player execute command "psettings"]
            format slot 4 of player with red wool named "&cSwitch OFF" with lore "&3Turn 24/7 hosting to off" to close then run [make player execute command "psettings_24_7_off"]
        else:
            format slot 0 of player with compass named "&eBack" to close then run [make player execute command "psettings"]
            format slot 4 of player with lime wool named "&aSwitch ON" with lore "&3Turn 24/7 hosting to on" to close then run [make player execute command "psettings_24_7_on"]

command /psettings_24_7_off:
    trigger:
        send "&aSet 24/7 Hosting to: &cfalse"
        set {24_7_p_%player%} to "off"
        set {24_7_%{server.name.%player%}%} to "false"
        make player execute command "/psettings_24_7"

command /psettings_24_7_on:
    trigger:
        send "&aSet 24/7 Hosting to: &atrue"
        set {24_7_p_%player%} to "on"
        set {24_7_%{server.name.%player%}%} to "true"
        make player execute command "/psettings_24_7"

command /prepair:
    trigger:
        send "&3Reparing files..."
        send "&3(This might take a while!)"
        if {servers::*} contains "%{server.name.%player%}%":
            #
        else:
            add "%{server.name.%player%}%" to {servers::*}
        set {24_7_p_%player%} to "off"
        set {24_7_%{server.name.%player%}%} to "false"
        set {status.%{server.name.%player%}%} to "Offline"
        clear {whitelist.%{server.name.%player%}%::*}
        set {whitelistst.%{server.name.%player%}%} to "false"
        send "[**REPAIRED FILES**] %player% has repaired files Realm=`%{server.name.%player%}%`" to channel with id "703917911265247232" with "MainBot"
        wait 10 seconds
        send "&3Files repared successfully!"
        send "&3Still having issues? Contact our support team on our &b/discord"

command /join <text>:
    trigger:
        if {service.phost} is "Online":
            if arg-1 is "Favourite Realms":
                make player execute command "/favsrvs_1"
                stop
            if arg-1 is "Report Realm":
                make player execute command "/reportsrv"
                stop
            if {servers::*} contains arg-1:
                if {status.%arg-1%} is "Online":
                    if {online.%arg-1%} < {slots.%arg-1%}:
                        if {Banned.%arg-1%::*} contains "%player%":
                            send "&cYou are banned from this Realm!"
                        else:
                            if {whitelistst.%arg-1%} is "true":
                                if {whitelist.%arg-1%::*} contains "%player%":
                                    if {version.allowed::%arg-1%::*} contains "%{edition.%player%}%":
                                        if {mcversion.allowed::%arg-1%::*} contains "%{mcversion.%player%.current}%":
                                            broadcast "&7%player% &3has left your lobby" to player's world
                                            make console execute command "/worldchange %player% %arg-1%"
                                            send "&3Joined &b%arg-1%&3!"
                                            wait 0.5 seconds
                                            make console execute "speed walk 1 %player%"
                                            broadcast "&7%player% %colored {join.message.%player's world%}%" to player's world
                                            if {rank.%player%.%player's world%} is not set:
                                                set {rank.%player%.%player's world%} to "default"
                                            if {plugin.discordsrv.%player's world%} is "Installed":
                                                send "**%player% has joined the Realm**" to channel with id "%{chat.id.%player's world%}%" with "DiscordSRV"
                                        else:
                                            send "&cThis version is disabled on this Realm!"
                                    else:
                                        send "&cThis Minecraft version is disabled on this Realm!" to player
                                else:
                                    send "&cYou are not whitelisted on this Realm!"
                            else:
                                if {version.allowed::%arg-1%::*} contains "%{edition.%player%}%":
                                    if {mcversion.allowed::%arg-1%::*} contains "%{mcversion.%player%.current}%":
                                        broadcast "&7%player% &3has left your lobby" to player's world
                                        make console execute command "/worldchange %player% %arg-1%"
                                        send "&3Joined &b%arg-1%&3!"
                                        wait 0.5 seconds
                                        make console execute "speed walk 1 %player%"
                                        broadcast "&7%player% %colored {join.message.%player's world%}%" to player's world
                                        if {rank.%player%.%player's world%} is not set:
                                            set {rank.%player%.%player's world%} to "default"
                                        if {plugin.discordsrv.%player's world%} is "Installed":
                                            send "**%player% has joined the Realm**" to channel with id "%{chat.id.%player's world%}%" with "DiscordSRV"
                                    else:
                                        send "&cThis version is disabled on this Realm!"
                                else:
                                    send "&cThis Minecraft version is disabled on this Realm!" to player
                    else:
                        send "&cThe Realm is full!"
                else:
                    add arg-1 to {start.queue::*}
                    send "&aRealm queued to start..."
                    send "&aIn Queue: &b%size of {start.queue::*}%"
                    send action bar "&bThe requested Realm is starting!" to player
                    set {destination.queue.%player%} to arg-1
            else:
                send "&cThere is no Realm called &6%arg-1%&c, the name is available to take!"
        else:
            send "&cServices are currently offline! Try again later!"

command /staffchat <text>:
    aliases: /sc
    permission: staff.rank
    trigger:
        send "[%player's world%] %player% > %arg-1%" to channel with id "719216221928685589" with "MainBot"
        loop all players:
            if loop-player has permission "staff.rank":
                send "&9[STAFF-CHAT] &8 %player%&r: &9%arg-1%" to loop-player

guild message receive seen by "MainBot":
    if discord id of event-user is not "691608955792916490":
        if discord id of event-channel is "719216221928685589":
            loop all players:
                if loop-player has permission "staff.rank":
                    send "&9[STAFF-CHAT|DISCORD] &8 %event-user%&r: &9%event-message%" to loop-player

command /adminchat <text>:
    aliases: /ac, /oc
    permission: admin.rank
    trigger:
        loop all players:
            if loop-player has permission "admin.rank":
                send "&c[ADMIN-CHAT] &8 %player%&r: &c%arg 1%" to loop-player

command /elytra:
    trigger:
        if player's world is "Lobby":
            make console execute command "give %player% elytra 1"

command /fireworks:
    trigger:
        if player's world is "Lobby":
            make console execute command "give %player% firework_rocket 64"

command /barrier:
    trigger:
        if player's world is "%{server.name.%player%}%", "%{server.name.%player%}%_nether" or "%{server.name.%player%}%_the_end":
            make console execute command "give %player% barrier 1"

on chat:
    cancel event
    if {nc.%player%.%player's world%} is "true":
        #
    else:
        if player's world is "Lobby":
            broadcast "%{rank.%player%}% %player%&f: &f%message%" to the player's world
            send "[LOBBY] %player% > %message%" to channel with id "719181420827901972" with "MainBot"
        else:
            if player's world is "%{server.name.%player%}%", "%{server.name.%player%}%_nether" or "%{server.name.%player%}%_the_end":
                if "%player's world%" contains "_nether" or "_the_end":
                    set {c.msg.%player%::*} to split "%player's world%" at "_"
                    send "&9[OWNER] &f%player%: &f%message%" to all players where [input's world = "%{c.msg.%player%::1}%" or "%{c.msg.%player%::1}%_nether" or "%{c.msg.%player%::1}%_the_end"]
                    clear {c.msg.%player%::*}
                else:
                    send "&9[OWNER] &f%player%: &f%message%" to all players where [input's world = "%player's world%" or "%player's world%_nether" or "%player's world%_the_end"]
                
                send "[%player's world%] %player% > %message%" to channel with id "719181420827901972" with "MainBot"
                if {plugin.discordsrv.%player's world%} is "Installed":
                    send "[OWNER] %player% > %message%" to channel with id "%{chat.id.%player's world%}%" with "DiscordSRV"
            else:
                if "%player's world%" contains "_nether" or "_the_end":
                    set {c.msg.%player%::*} to split "%player's world%" at "_"
                    if {prefix.%{rank.%player%.%player's world%}%.%player's world%} is set:
                        send "%colored {prefix.%{rank.%player%.%player's world%}%.%player's world%}% %player%: &f%message%" to all players where [input's world = "%{c.msg.%player%::1}%" or "%{c.msg.%player%::1}%_nether" or "%{c.msg.%player%::1}%_the_end"]
                    else:
                        send "%player%: &f%message%" to all players where [input's world = "%{c.msg.%player%::1}%" or "%{c.msg.%player%::1}%_nether" or "%{c.msg.%player%::1}%_the_end"]
                    clear {c.msg.%player%::*}
                else:
                    if {prefix.%{rank.%player%.%player's world%}%.%player's world%} is set:
                        send "%colored {prefix.%{rank.%player%.%player's world%}%.%player's world%}% %player%: &f%message%" to all players where [input's world = "%player's world%" or "%player's world%_nether" or "%player's world%_the_end"]
                    else:
                        send "%player%: &f%message%" to all players where [input's world = "%player's world%" or "%player's world%_nether" or "%player's world%_the_end"]
                
                send "[%player's world%] %player% > %message%" to channel with id "719181420827901972" with "MainBot"
                if {plugin.discordsrv.%player's world%} is "Installed":
                    send "%player% > %message%" to channel with id "%{chat.id.%player's world%}%" with "DiscordSRV"

command /adminsetrank <offline player> <text>:
    permission: owner.rank
    trigger:
        if arg-1 is set:
            if arg-2 is "Owner":
                set {rank.%arg-1%} to "&4[OWNER]"
                send "&aRank set! You need to give perms"
            if arg-2 is "CoOwner":
                set {rank.%arg-1%} to "&b[CO-OWNER]"
                send "&aRank set! You need to give perms"
            if arg-2 is "Manager":
                set {rank.%arg-1%} to "&d[MANAGER]"
                send "&aRank set! You need to give perms"
            if arg-2 is "Admin":
                set {rank.%arg-1%} to "&c[ADMIN]"
                send "&aRank set! You need to give perms"
            if arg-2 is "SrMod":
                set {rank.%arg-1%} to "&6[SR.MOD]"
                send "&aRank set! You need to give perms"
            if arg-2 is "Mod":
                set {rank.%arg-1%} to "&e[MOD]"
                send "&aRank set! You need to give perms"
            if arg-2 is "JrMod":
                set {rank.%arg-1%} to "&e[JR.MOD]"
                send "&aRank set! You need to give perms"
            if arg-2 is "Helper":
                set {rank.%arg-1%} to "&a[HELPER]"
                send "&aRank set! You need to give perms"
            if arg-2 is "Builder":
                set {rank.%arg-1%} to "&d[BUILDER]"
                send "&aRank set! You need to give perms"
            if arg-2 is "crasher":
                set {rank.%arg-1%} to "&c[PROFESSIONAL CRASHER]"
                send "&aRank set! You need to give perms"
            if arg-2 is "coffee":
                set {rank.%arg-1%} to "&d[&aC&bO&eF&aF&bE&eE&d]"
                send "&aRank set! You need to give perms"
            if arg-2 is "Legend":
                set {rank.%arg-1%} to "&6[LEGEND]"
                send "&aRank set! You need to give perms"
            if arg-2 is "Pro":
                set {rank.%arg-1%} to "&b[PRO]"
                send "&aRank set! You need to give perms"
            if arg-2 is "Vip":
                set {rank.%arg-1%} to "&a[VIP]"
                send "&aRank set! You need to give perms"
            if arg-2 is "User":
                set {rank.%arg-1%} to "&7[User]"
                send "&aRank set! You need to give perms"

every hour:
    loop all players:
        if {rank.%loop-player%} is "&7[User]":
            send "&3You earned &b5 &6RGold &3because you were online!" to loop-player
            make console execute command "?rgold give %loop-value% 5"
        if {rank.%loop-player%} is "&a[VIP]":
            send "&3You earned &b10 &6RGold &3because you were online!" to loop-player
            make console execute command "?rgold give %loop-value% 10"
        if {rank.%loop-player%} is "&b[PRO]":
            send "&3You earned &b15 &6RGold &3because you were online!" to loop-player
            make console execute command "?rgold give %loop-value% 15"
        if {rank.%loop-player%} is "&6[LEGEND]":
            send "&3You earned &b20 &6RGold &3because you were online!" to loop-player
            make console execute command "?rgold give %loop-value% 20"
        if {rank.%loop-player%} is "&d[&aC&bO&eF&aF&bE&eE&d]":
            send "&3You earned &b25 &6RGold &3because you were online!" to loop-player
            make console execute command "?rgold give %loop-value% 25"
        if {rank.%loop-player%} is "&d[BUILDER]":
            send "&3You earned &b20 &6RGold &3because you were online!" to loop-player
            make console execute command "?rgold give %loop-value% 20"
        if {rank.%loop-player%} is "&e[JR.MOD]":
            send "&3You earned &b20 &6RGold &3because you were online!" to loop-player
            make console execute command "?rgold give %loop-value% 20"
        if {rank.%loop-player%} is "&e[MOD]":
            send "&3You earned &b20 &6RGold &3because you were online!" to loop-player
            make console execute command "?rgold give %loop-value% 20"
        if {rank.%loop-player%} is "&e[SR.MOD]":
            send "&3You earned &b20 &6RGold &3because you were online!" to loop-player
            make console execute command "?rgold give %loop-value% 20"

command /maxslotsfix:
    permission: admin.rank
    trigger:
        set {max.slots.rank.&4[OWNER]} to 200
        set {max.slots.rank.&b[CO-OWNER]} to 200 
        set {max.slots.rank.&d[MANAGER]} to 200
        set {max.slots.rank.&c[ADMIN]} to 200
        set {max.slots.rank.&6[SR.MOD]} to 200
        set {max.slots.rank.&e[MOD]} to 200
        set {max.slots.rank.&e[JR.MOD]} to 200
        set {max.slots.rank.&a[HELPER]} to 200
        set {max.slots.rank.&d[&aC&bO&eF&aF&bE&eE&d]} to 200
        set {max.slots.rank.&6[LEGEND]} to 100
        set {max.slots.rank.&b[PRO]} to 25
        set {max.slots.rank.&a[VIP]} to 25
        set {max.slots.rank.&7[User]} to 10
        loop {servers::*}:
            set {slots.%loop-value%} to 5

on join:
    if {rank.%player%} is not set:
        set {rank.%player%} to "&7[User]"

command /warn <player> <text>:
    permission: staff.rank
    trigger:
        if arg 1 is set:
            if arg 2 is set:
                add 1 to {warn.%arg-1%}
                send "" to all players
                send "&a%arg-1% &fhas been warned for &a%arg-2%&f by &a%player% &9[%{warn.%arg-1%}%&9/3]" to all players
                send "" to all players
                if {warn.%arg-1%} is 3:
                    execute console command "ban %arg-1% You have been banned because you were warned 3 times! Last warn executed by: %player%!"
                    set {warn.%arg-1%} to 0
        else:
            send "&cYou're missing something!"

command /warn-reset <player>:
    permission: staff.admin
    trigger:
        if arg 1 is set:
            set {warn.%arg-1%} to 0
            send "&aReset %arg-1%'s warns" to all players    

on first join:
    add 1 to {totalp}
    broadcast "%player% &bhas Joined for the first time! (&a%{totalp}%&b)" to player's world

command /control:
    trigger:
        if player has permission "control.use":
            wait 0.3 seconds
            open chest with 5 row named "&6Control &7(&3%player's world%&7)" to player
            format slot 10 of player with barrier named "&aSchematic Gallery" with lore "&3Add cool schematics to your Realm (&cOnly &bPRO &cand up)" and "&cCURRENTLY DISABLED" to close
            format slot 12 of player with lava bucket named "&aPlugins" with lore "&3Mange your Realm plugins" to close then run [make player execute command "pplugins_chose"]
            format slot 14 of player with book named "&aGamerules" with lore "&3Manage your Realm's gamerules" to close then run [make player execute command "pcontrol_gamerules"]
            format slot 16 of player with repeater named "&aFile Manager" with lore "&3Manage your Realm files (Configs, messages...)" to close then run [make player execute command "pfilemanager"]
            format slot 29 of player with compass named "&cSupport" with lore "&3Get support on our discord if you have an issue!" to close then run [make player execute command "discord"]
            format slot 31 of player with command block named "&aManage" with lore "&3Manage your Realm" to close then run [make player execute command "pmanage_control"]
            format slot 33 of player with compass named "&aYouTube" with lore "&3Follow Plustis tutorials on our channel!" to close then run [make player execute command "youtube"]
        else:
            send "&cYou must be in your Realm to execute this!"

command /pcontrol_gamerules:
    trigger:
        if player has permission "control.use":
            send "&aDo /pgamerule <gamerule> <true/false>"

command /pgamerule <text> <text>:
    trigger:
        if player has permission "control.use":
            wait 0.3 seconds
            make console execute command "/mv modify set %arg-1% %arg-2% %player's world%"
            send "&aGamerule set!"

command /pplugins_chose:
    trigger:
        if player has permission "control.use":
            wait 0.3 seconds
            open chest with 1 rows named "&6Control &3> Plugins" to player
            format slot 2 of player with lime dye named "&3Plugins" with lore "Plugins list" to close then run [make player execute command "pplugins"]
            format slot 4 of player with compass named "&eBack" to close then run [make player execute command "control"]
            format slot 6 of player with lime dye named "&3Premium Plugins" with lore "&c(These plugins require &6LEGEND+ &cto be installed)" to close then run [make player execute command "pplugins_premium"]

command /pplugins:
    trigger:
        if player has permission "control.use":
            wait 0.3 seconds
            open chest with 6 rows named "&6Control &3> Plugins &7(Page 1/1)" to player
            format slot 49 of player with compass named "&eBack" to close then run [make player execute command "pplugins_chose"]
            if {plugin.essentials.%player's world%} is "Installed":
                format slot 0 of player with lime dye named "&3Essentials &a" with lore "Essential commands" to close then run [make player execute command "uninstallp_essentials"]
            else:
                format slot 0 of player with gray dye named "&3Essentials &c" with lore "Essential commands" to close then run [make player execute command "installp_essentials"]

            if {plugin.coreprotect.%player's world%} is "Installed":
                format slot 1 of player with lime dye named "&3Coreprotect &a" with lore "An advanced Block logging plugin" to close then run [make player execute command "uninstallp_coreprotect"]
            else:
                format slot 1 of player with gray dye named "&3Coreprotect &c" with lore "An advanced Block logging plugin" to close then run [make player execute command "installp_coreprotect"]

            if {plugin.shopkeepers.%player's world%} is "Installed":
                format slot 2 of player with lime dye named "&3Shopkeepers &a" with lore "Allows you to make shop villagers" to close then run [make player execute command "uninstallp_shopkeepers"]
            else:
                format slot 2 of player with gray dye named "&3Shopkeepers &c" with lore "Allows you to make shop villagers" to close then run [make player execute command "installp_shopkeepers"]

            if {plugin.crackshot.%player's world%} is "Installed":
                format slot 3 of player with lime dye named "&3Crackshot &a" with lore "Adds guns into minecraft" to close then run [make player execute command "uninstallp_crackshot"]
            else:
                format slot 3 of player with gray dye named "&3Crackshot &c" with lore "Adds guns into minecraft" to close then run [make player execute command "installp_crackshot"]

            if {plugin.itemeditor.%player's world%} is "Installed":
                format slot 4 of player with lime dye named "&3ItemEditor &a" with lore "Allows you to edit items" to close then run [make player execute command "uninstallp_itemeditor"]
            else:
                format slot 4 of player with gray dye named "&3ItemEditor &c" with lore "Allows you to edit items" to close then run [make player execute command "installp_itemeditor"]

            if {plugin.armorstandeditor.%player's world%} is "Installed":
                format slot 5 of player with lime dye named "&3ArmorstandEditor &a" with lore "Allows you to edit armorstands" to close then run [make player execute command "uninstallp_armorstandeditor"]
            else:
                format slot 5 of player with gray dye named "&3ArmorstandEditor &c" with lore "Allows you to edit armorstands" to close then run [make player execute command "installp_armorstandeditor"]

            if {plugin.duplicator.%player's world%} is "Installed":
                format slot 6 of player with lime dye named "&3Duplicator &a" with lore "Allows players to duplicate the item in their hand" to close then run [make player execute command "uninstallp_duplicator"]
            else:
                format slot 6 of player with gray dye named "&3Duplicator &c" with lore "Allows players to duplicate the item in their hand" to close then run [make player execute command "installp_duplicator"]

            if {plugin.customheads.%player's world%} is "Installed":
                format slot 7 of player with lime dye named "&3CustomHeads &a" with lore "A simple head database" to close then run [make player execute command "uninstallp_customheads"]
            else:
                format slot 7 of player with gray dye named "&3CustomHeads &c" with lore "A simple head database" to close then run [make player execute command "installp_customheads"]

            if {plugin.imageonmap.%player's world%} is "Installed":
                format slot 8 of player with lime dye named "&3ImageOnMap &a" with lore "Allows you to put images on maps" to close then run [make player execute command "uninstallp_imageonmap"]
            else:
                format slot 8 of player with gray dye named "&3ImageOnMap &c" with lore "Allows you to put images on maps" to close then run [make player execute command "installp_imageonmap"]

            if {plugin.worldedit.%player's world%} is "Installed":
                format slot 9 of player with lime dye named "&3WorldEdit &a" with lore "An advanced world editor plugin" to close then run [make player execute command "uninstallp_worldedit"]
            else:
                format slot 9 of player with gray dye named "&3WorldEdit &c" with lore "An advanced world editor plugin" to close then run [make player execute command "installp_worldedit"]

            if {plugin.itemedit.%player's world%} is "Installed":
                format slot 10 of player with lime dye named "&3ItemEdit &a" with lore "Allows you to edit items with simple commands" to close then run [make player execute command "uninstallp_itemedit"]
            else:
                format slot 10 of player with gray dye named "&3ItemEdit &c" with lore "Allows you to edit items with simple commands" to close then run [make player execute command "installp_itemedit"]

            if {plugin.randomitems.%player's world%} is "Installed":
                format slot 11 of player with lime dye named "&3RandomItems &a" with lore "Gives the players a random items every 30 sconds" to close then run [make player execute command "uninstallp_randomitems"]
            else:
                format slot 11 of player with gray dye named "&3RandomItems &c" with lore "Gives the players a random items every 30 sconds" to close then run [make player execute command "installp_randomitems"]

            if {plugin.luckyblocks.%player's world%} is "Installed":
                format slot 12 of player with lime dye named "&3LuckyBlocks &a" with lore "Adds luckyblocks to your Realm" to close then run [make player execute command "uninstallp_luckyblocks"]
            else:
                format slot 12 of player with gray dye named "&3LuckyBlocks &c" with lore "Adds luckyblocks to your Realm" to close then run [make player execute command "installp_luckyblocks"]

            if {plugin.vanish.%player's world%} is "Installed":
                format slot 13 of player with lime dye named "&3Vanish &a" with lore "Makes you able to vanish" to close then run [make player execute command "uninstallp_vanish"]
            else:
                format slot 13 of player with gray dye named "&3Vanish &c" with lore "Makes you able to vanish" to close then run [make player execute command "installp_vanish"]

            if {plugin.worldguard.%player's world%} is "Installed":
                format slot 14 of player with lime dye named "&3WorldGuard &a" with lore "Makes you able to protect your Realm" to close then run [make player execute command "uninstallp_worldguard"]
            else:
                format slot 14 of player with gray dye named "&3WorldGuard &c" with lore "Makes you able to protect your Realm" to close then run [make player execute command "installp_worldguard"]

            if {plugin.luckperms.%player's world%} is "Installed":
                format slot 15 of player with lime dye named "&3LuckPerms &a" with lore "Manage permissions on your Realm" to close then run [make player execute command "uninstallp_luckperms"]
            else:
                format slot 15 of player with gray dye named "&3LuckPerms &c" with lore "Manage permissions on your Realm" to close then run [make player execute command "installp_luckperms"]

            if {plugin.nearbychat.%player's world%} is "Installed":
                format slot 16 of player with lime dye named "&3NearbyChat &a" with lore "Chat with players near you" to close then run [make player execute command "uninstallp_nearbychat"]
            else:
                format slot 16 of player with gray dye named "&3NearbyChat &c" with lore "Chat with players near you" to close then run [make player execute command "installp_nearbychat"]

            if {plugin.kits.%player's world%} is "Installed":
                format slot 17 of player with lime dye named "&3Kits &a" with lore "Allows you to setup kits" to close then run [make player execute command "uninstallp_kits"]
            else:
                format slot 17 of player with gray dye named "&3Kits &c" with lore "Allows you to setup kits" to close then run [make player execute command "installp_kits"]

            if {plugin.randomtp.%player's world%} is "Installed":
                format slot 18 of player with lime dye named "&3RandomTP &a" with lore "Allows you to teleport to a random location" to close then run [make player execute command "uninstallp_randomtp"]
            else:
                format slot 18 of player with gray dye named "&3RandomTP &c" with lore "Allows you to teleport to a random location" to close then run [make player execute command "installp_randomtp"]

            if {plugin.warps.%player's world%} is "Installed":
                format slot 19 of player with lime dye named "&3Warps &a" with lore "Allows you to set warps" to close then run [make player execute command "uninstallp_warps"]
            else:
                format slot 19 of player with gray dye named "&3Warps &c" with lore "Allows you to set warps" to close then run [make player execute command "installp_warps"]

            if {plugin.jails.%player's world%} is "Installed":
                format slot 20 of player with lime dye named "&3Jails &a" with lore "Allows you to jail players" to close then run [make player execute command "uninstallp_jails"]
            else:
                format slot 20 of player with gray dye named "&3Jails &c" with lore "Allows you to jail players" to close then run [make player execute command "installp_jails"]

            if {plugin.scoreboard.%player's world%} is "Installed":
                format slot 21 of player with lime dye named "&3Scoreboard &a" with lore "Allows you to manage the scoreboard" to close then run [make player execute command "uninstallp_scoreboard"]
            else:
                format slot 21 of player with gray dye named "&3Scoreboard &c" with lore "Allows you to manage the scoreboard" to close then run [make player execute command "installp_scoreboard"]

            if {plugin.votekick.%player's world%} is "Installed":
                format slot 22 of player with lime dye named "&3VoteKick &a" with lore "Allows players to votekick another player" to close then run [make player execute command "uninstallp_votekick"]
            else:
                format slot 22 of player with gray dye named "&3VoteKick &c" with lore "Allows players to votekick another player" to close then run [make player execute command "installp_votekick"]

            if {plugin.script.%player's world%} is "Installed":
                format slot 23 of player with lime dye named "&3Slipt &a" with lore "Allows you to make custom scripts" and "&cBETA TESTING" to close then run [make player execute command "uninstallp_script"]
            else:
                format slot 23 of player with gray dye named "&3Slipt &c" with lore "Allows you to make custom scripts" and "&cBETA TESTING" to close then run [make player execute command "installp_script"]

            if {plugin.deathcords.%player's world%} is "Installed":
                format slot 24 of player with lime dye named "&3DeathCords &a" with lore "Sends the cords of where you died" to close then run [make player execute command "uninstallp_deathcords"]
            else:
                format slot 24 of player with gray dye named "&3DeathCords &c" with lore "Sends the cords of where you died" to close then run [make player execute command "installp_deathcords"]

            if {plugin.voidspawn.%player's world%} is "Installed":
                format slot 25 of player with lime dye named "&3VoidSpawn &a" with lore "Doesn't let players fall in the void" to close then run [make player execute command "uninstallp_voidspawn"]
            else:
                format slot 25 of player with gray dye named "&3VoidSpawn &c" with lore "Doesn't let players fall in the void" to close then run [make player execute command "installp_voidspawn"]

            if {plugin.freeze.%player's world%} is "Installed":
                format slot 26 of player with lime dye named "&3Freeze &a" with lore "Freeze people" to close then run [make player execute command "uninstallp_freeze"]
            else:
                format slot 26 of player with gray dye named "&3Freeze &c" with lore "Freeze people" to close then run [make player execute command "installp_freeze"]

            if {plugin.punishmentgui.%player's world%} is "Installed":
                format slot 27 of player with lime dye named "&3PunishmentGUI &a" with lore "Punish players with a clear and easy to use gui" to close then run [make player execute command "uninstallp_punishmentgui"]
            else:
                format slot 27 of player with gray dye named "&3PunishmentGUI &c" with lore "Punish players with a clear and easy to use gui" to close then run [make player execute command "installp_punishmentgui"]
            
            if {plugin.votifier.%player's world%} is "Installed":
                format slot 28 of player with lime dye named "&3Votifier &a" with lore "Reward players for voting" to close then run [make player execute command "uninstallp_votifier"]
            else:
                format slot 28 of player with gray dye named "&3Votifier &c" with lore "Reward players for voting" to close then run [make player execute command "installp_votifier"]

            if {plugin.itemcommand.%player's world%} is "Installed":
                format slot 29 of player with lime dye named "&3ItemCommand &a" with lore "Hook commands to items" to close then run [make player execute command "uninstallp_itemcommand"]
            else:
                format slot 29 of player with gray dye named "&3ItemCommand &c" with lore "Hook commands to items" to close then run [make player execute command "installp_itemcommand"]

            if {plugin.blockgravity.%player's world%} is "Installed":
                format slot 30 of player with lime dye named "&3BlockGravity &a" with lore "Makes every block subject to gravity" to close then run [make player execute command "uninstallp_blockgravity"]
            else:
                format slot 30 of player with gray dye named "&3BlockGravity &c" with lore "Makes every block subject to gravity" to close then run [make player execute command "installp_blockgravity"]

            if {plugin.autobc.%player's world%} is "Installed":
                format slot 31 of player with lime dye named "&3AutoBC &a" with lore "Allows you to setup automated broadcastings" to close then run [make player execute command "uninstallp_autobc"]
            else:
                format slot 31 of player with gray dye named "&3AutoBC &c" with lore "Allows you to setup automated broadcastings" to close then run [make player execute command "installp_autobc"]
            
            if {plugin.nearbyplayers.%player's world%} is "Installed":
                format slot 32 of player with lime dye named "&3NearbyPlayers &a" with lore "Allows players to see who is nearby" to close then run [make player execute command "uninstallp_nearbyplayers"]
            else:
                format slot 32 of player with gray dye named "&3NearbyPlayers &c" with lore "Allows players to see who is nearby" to close then run [make player execute command "installp_nearbyplayers"]

            if {plugin.clearchat.%player's world%} is "Installed":
                format slot 33 of player with lime dye named "&3ClearChat &a" with lore "Allows you to clear the Realm's chat" to close then run [make player execute command "uninstallp_clearchat"]
            else:
                format slot 33 of player with gray dye named "&3ClearChat &c" with lore "Allows you to clear the Realm's chat" to close then run [make player execute command "installp_clearchat"]

            if {plugin.commandblocks.%player's world%} is "Installed":
                format slot 34 of player with lime dye named "&3CommandBlocks &a" with lore "Manage your world with CommandBlocks" to close then run [make player execute command "uninstallp_commandblocks"]
            else:
                format slot 34 of player with gray dye named "&3CommandBlocks &c" with lore "Manage your world with CommandBlocks" to close then run [make player execute command "installp_commandblocks"]

command /pplugins_premium:
    permission: legend.rank
    trigger:
        if player has permission "control.use":
            wait 0.3 seconds
            open chest with 6 rows named "&6Control &3> Plugins > Premium &7(Page 1/1)" to player
            format slot 49 of player with compass named "&eBack" to close then run [make player execute command "pplugins_chose"]
            if {plugin.discordsrv.%player's world%} is "Installed":
                format slot 0 of player with lime dye named "&3DiscordSRV &a" with lore "Hook your minecraft chat and console to discord" to close then run [make player execute command "uninstallp_discordsrv"]
            else:
                format slot 0 of player with gray dye named "&3DiscordSRV &c" with lore "Hook your minecraft chat and console to discord" to close then run [make player execute command "installp_discordsrv"]

            if {plugin.stickfight.%player's world%} is "Installed":
                format slot 1 of player with lime dye named "&3Stickfight &a" with lore "Sumo minigame but more fun" to close then run [make player execute command "uninstallp_stickfight"]
            else:
                format slot 1 of player with gray dye named "&3Stickfight &c" with lore "Sumo minigame but more fun" to close then run [make player execute command "installp_stickfight"]

            if {plugin.signeditor.%player's world%} is "Installed":
                format slot 2 of player with lime dye named "&3SignEditor &a" with lore "Edit signs without replacing them" to close then run [make player execute command "uninstallp_signeditor"]
            else:
                format slot 2 of player with gray dye named "&3SignEditor &c" with lore "Edit signs without replacing them" to close then run [make player execute command "installp_signeditor"]

            if {plugin.multiplayersleep.%player's world%} is "Installed":
                format slot 3 of player with lime dye named "&3MultiplayerSleep &a" with lore "A simple solution for multiplayer sleeping" to close then run [make player execute command "uninstallp_multiplayersleep"]
            else:
                format slot 3 of player with gray dye named "&3MultiplayerSleep &c" with lore "A simple solution for multiplayer sleeping" to close then run [make player execute command "installp_multiplayersleep"]

command /ppluginsreset:
    trigger:
        set {plugin.essentials.%{server.name.%player%}%} to "Not Installed"
        set {plugin.coreprotect.%{server.name.%player%}%} to "Not Installed"
        set {plugin.shopkeepers.%{server.name.%player%}%} to "Not Installed"
        set {plugin.crackshot.%{server.name.%player%}%} to "Not Installed"
        set {plugin.itemeditor.%{server.name.%player%}%} to "Not Installed"
        set {plugin.armorstandeditor.%{server.name.%player%}%} to "Not Installed"
        set {plugin.duplicator.%{server.name.%player%}%} to "Not Installed"
        set {plugin.customheads.%{server.name.%player%}%} to "Not Installed"
        set {plugin.imageonmap.%{server.name.%player%}%} to "Not Installed"
        set {plugin.worldedit.%{server.name.%player%}%} to "Not Installed"
        set {plugin.discordsrv.%{server.name.%player%}%} to "Not Installed"
        set {plugin.itemedit.%{server.name.%player%}%} to "Not Installed"
        set {plugin.randomitems.%{server.name.%player%}%} to "Not Installed"
        set {plugin.launchpads.%{server.name.%player%}%} to "Not Installed"
        set {plugin.luckyblocks.%{server.name.%player%}%} to "Not Installed"
        set {plugin.vanish.%{server.name.%player%}%} to "Not Installed"
        set {plugin.libsdisguises.%{server.name.%player%}%} to "Not Installed"
        set {plugin.worldguard.%{server.name.%player%}%} to "Not Installed"
        set {plugin.luckperms.%{server.name.%player%}%} to "Not Installed"
        set {plugin.nearbychat.%{server.name.%player%}%} to "Not Installed"
        set {plugin.kits.%{server.name.%player%}%} to "Not Installed"
        set {plugin.randomtp.%{server.name.%player%}%} to "Not Installed"
        set {plugin.warps.%{server.name.%player%}%} to "Not Installed"
        set {plugin.jails.%{server.name.%player%}%} to "Not Installed"
        set {plugin.stickfight.%{server.name.%player%}%} to "Not Installed"
        set {plugin.scoreboard.%{server.name.%player%}%} to "Not Installed"
        set {plugin.signeditor.%{server.name.%player%}%} to "Not Installed"
        set {plugin.votekick.%{server.name.%player%}%} to "Not Installed"
        set {plugin.script.%{server.name.%player%}%} to "Not Installed"
        set {plugin.deathcords.%{server.name.%player%}%} to "Not Installed"
        set {plugin.voidspawn.%{server.name.%player%}%} to "Not Installed"
        set {plugin.freeze.%{server.name.%player%}%} to "Not Installed"
        set {plugin.punishmentgui.%{server.name.%player%}%} to "Not Installed"
        set {plugin.multiplayersleep.%{server.name.%player%}%} to "Not Installed"
        set {plugin.votifier.%{server.name.%player%}%} to "Not Installed"
        set {plugin.itemcommand.%{server.name.%player%}%} to "Not Installed"
        set {plugin.blockgravity.%{server.name.%player%}%} to "Not Installed"
        set {plugin.autobc.%{server.name.%player%}%} to "Not Installed"
        set {plugin.citizens.%{server.name.%player%}%} to "Not Installed"
        set {plugin.nearbyplayers.%{server.name.%player%}%} to "Not Installed"
        set {plugin.clearchat.%{server.name.%player%}%} to "Not Installed"
        set {plugin.commandblocks.%{server.name.%player%}%} to "Not Installed"

command /help <text>:
    trigger:
        if player has permission "control.use":
            if arg-1 is "essentials":
                send "&bEssentials Commands:"
                send "/gmc : Sets the gamemode to creative"
                send "/gms : Sets gamemode to survival"
                send "/gma : Sets gamemode to adventure"
                send "/gmsp : Sets gamemode to spectator"
                send "/sethome : Sets your home"
                send "/home : Teleports you to your home"
                send "/invsee : Lets you see player's inventory"
                send "/pkick : Kick a player from your Realm"
                send "/pban : Ban a player from your Realm"
                send "/punban : Unban a player from your Realm"
                send "/bc : Broadcast something to your Realm"
                send "/day : Sets time to day"
                send "/night : Sets time to night"
                send "/sun : Sets weather to sun"
                send "/rain : Sets weather to rain"
                send "/thunder : Sets weather to thunder"
                send "/peffect : Give/Cleare an effect on a players"
                send "/tp : Teleport a player to a player"
                send "/tphere : Teleport to you a player"
                send "/kill : Kill a player"
                send "/killall : Kill all players in the Realm"
                send "/tpa : Request to teleport to a player"
                send "/pwarn : Warn a player (3 warns = pban)"
                send "/tocord : Teleport to specific coordinates"
                send "/speed : Allows you to change your speed"
                send "/hat : Allows you to wear any block as an hat"
            if arg-1 is "coreprotect":
                send "&bCoreProtect Commands:"
                send "/co inspect : Toggle the inspector"
                send "/co lookup <argument> : Advanced block data lookup"
                send "/co rollback <argument> : Rollback block data"
                send "/co restore <argument> : Restore block data"
            if arg-1 is "shopkeepers":
                send "&bShopkeepers Commands:"
                send "/shopkeeper : Main Command, creates a shopkeeper (shift+rightclick to edit)"
            if arg-1 is "crackshot":
                send "&bCrackshot Commands:"
                send "/shot list : List of all guns"
                send "/shot get <weapon> <amount> : Gives you a weapon"
            if arg-1 is "itemeditor":
                send "&bItemEditor Commands:"
                send "/ie edit : Opens editing GUI for holding item"
            if arg-1 is "armorstandeditor":
                send "&bArmorstandEditor Usage:"
                send "Follow this quick tutorial on how to use:"
                send "1) Hold the editing tool in your main hand (flint)"
                send "2) Left/right click away from an armor stand to open menu"
                send "3) Select the labeled menu options"
                send "4) Left/Right Click the armor stand with the tool in hand to apply those options."
            if arg-1 is "duplicator":
                send "&bDuplicator Commands:"
                send "/dupe : Duplicates the item you are holding"
            if arg-1 is "customheads":
                send "&bCustomHeads Commands:"
                send "/heads : Opens heads menu"
            if arg-1 is "imageonmap":
                send "&bImageOnMap Commands:"
                send "/tomap <URL> : Creates a map with the given image"
            if arg-1 is "worldedit":
                send "&bWorldEdit Commands:"
                send "&4NOTE: &cSome commands might be disabled for lag reasons!"
                send "https://minecraft-worldedit.fandom.com/wiki/Worldedit_Commands"
            if arg-1 is "discordsrv":
                send "&bDiscordSRV Commands:"
                send "&4NOTE: &cYou need to add our bot to your discord server and give it access to the selected channels!"
                send "/setchatid <id> : Sets the ID for chat logging"
                send "/setconsoleid <id> : Sets the ID for commands logging"
                send formatted "<url:https://discord.com/oauth2/authorize?client_id=691922524828729344&scope=bot&permissions=8>&bClick HERE to invite the bot<reset>"
            if arg-1 is "itemedit":
                send "&bItemEdit Commands:"
                send "/itemedit : Main command"
            if arg-1 is "RandomItems":
                send "&bRandomItems Commands:"
                send "/toggleitems : Toggles if you get items"
            if arg-1 is "launchpads":
                send "&bLaunchPads Commands:"
                send "&cNothing here..."
                send "&bUsage:"
                send "1) Place an iron pressure plate"
                send "2) Step on it"
                send "3) Jump"
            if arg-1 is "luckyblocks":
                send "&bLuckyBlocks Commands:"
                send "&cNothing here..."
                send "&bUsage:"
                send "1) Place a gold block"
                send "2) Mine it"
            if arg-1 is "vanish":
                send "&bVanish Commands:"
                send "/vanish [<player>] : Makes yourself or the player argument vanish"
            if arg-1 is "libsdisguises":
                send "&bLibsDisguises Commands:"
                send "/disguise <mob-type> : Disguise as a mob"
                send "/undisguise : Removes your disguise"
            if arg-1 is "worldguard":
                send "&bWorldGuard Commands:"
                send "&4NOTE: &cSome commands might be disabled for lag reasons!"
                send "https://worldguard.enginehub.org/en/latest/regions/commands/"
            if arg-1 is "luckperms":
                send "&bLuckPerms Commands:"
                send "/setrank <player> <ranks> : Sets a rank for a player"
                send "/setprefix <rank> <prefix> : Sets prefix for the rank"
                send "&cManage permissions in /control > File Manager > Plugins > LuckPerms > groups.yml"
            if arg-1 is "nearbychat":
                send "&bNearbyChat Commands:"
                send "/nc <text> : Sends message to players nearby"
                send "/nc-toggle : Toggles nearby chat"
            if arg-1 is "kits":
                send "&bKits Commands:"
                send "/kits : Opens a GUI with all kits"
                send "/setkit : Create a kit"
            if arg-1 is "randomtp":
                send "&bRandomTP Commands:"
                send "/randomtp : Teleports you to a random location (2m cooldown)"
            if arg-1 is "warps":
                send "&bWarp Commands:"
                send "/setwarp <name>: Set a warp at your location"
                send "/warps : List of all warps"
                send "/delwarp <name> : Delete a warp"
                send "/warp <name> : Tp to a warp"
            if arg-1 is "jails":
                send "&bWarp Commands:"
                send "/setjail <name> : Set a jail to your location"
                send "/jail <player> <name> : Jail a player (Must be online)"
                send "/jails : Jail list"
                send "/jailed : All jailed players"
                send "/deljail <name> : Delete a jail"
                send "/unjail <player> : Unjail a jailed player (Must be online)"
            if arg-1 is "stickfight":
                send "&bWarp Commands:"
                send "/setstickfight <1-5> : Sets stickfight spawns (Must be all set!)"
                send "/stickfight : Join the arena"
            if arg-1 is "scoreboard":
                send "&bScoreboard Commands:"
                send "/scoreboard <set/reset> [<line>] [<text>] : Main command, edit/reset a line"
                send "====="
                send "&bLines: 1 to 15 and head"
                send "====="
                send "&bFormat:"
                send "<null> : Set a line to null (aka reset)"
                send "<space> : Set the line to a space"
                send "&bPlaceholders:"
                send "None yet"
            if arg-1 is "signeditor":
                send "&bSignEditor Commands:"
                send "/signeditor edit <line> <new-text> : Edits the sign you are pointing at"
            if arg-1 is "votekick":
                send "&bVoteKick Commands:"
                send "/votekick <player> [<reason>] : Votekick a player"
            if arg-1 is "script" or "slipt":
                send "&bSlipt - Script Commands:"
                send "/script_gui : GUI to help you script"
                send "/script : Main command (use /script_gui for help)"
                send "/scriptdocs : All documentation"
            if arg-1 is "deathcords":
                send "&bDeathCords Commands:"
                send "I mean... Just... die?"
            if arg-1 is "voidspawn":
                send "&bVoidSpawn Commands:"
                send "bruv just jump in the void"
            if arg-1 is "freeze":
                send "&bFreeze Commands:"
                send "/freeze <player> : Freezes a player"
                send "/unfreeze <player> : Unfreezes a player"
            if arg-1 is "punishmentgui":
                send "&bPunishmentGUI Commands:"
                send "/punish [<player>] : Main command"
            if arg-1 is "multiplayersleep":
                send "&bMultiplayerSleep Commands:"
                send "No commands... Just sleep"
            if arg-1 is "votifier":
                send "&bVotifier Commands:"
                send "/votifier <add/remove/clear> : Add/Remove the holding item to/from the list or clear it"
            if arg-1 is "itemcommand":
                send "&bItemCommand Commands:"
                send "/itemcommand <add/remove/clear> [<command-no-/>] : Add a command to an item, remove all commands from an item, clear item commands"
            if arg-1 is "blockgravity":
                send "&bBlockGravity Commands:"
                send "&cNo commands... Just walk around"
            if arg-1 is "autobc":
                send "&bAutoBC Commands:"
                send "/autobc <add/remove/clear> [<text>] : Add/remove a text from automated broadcast or clear"
                send "&cAnnouncements are done once every 3 minutes!"
            if arg-1 is "citizens":
                send "&bCitizens Commands:"
                send "https://wiki.citizensnpcs.co/Commands"
                send "&cNote: Some commands might be disabled!"
            if arg-1 is "nearbyplayers":
                send "&bNearbyPlayers Commands:"
                send "/nearby-radius <number> : Sets the nearby detector radius"
                send "/nearby : See who is nearby"
            if arg-1 is "clearchat":
                send "&bClearChat Commands:"
                send "/clearchat : Clears the chat"
            if arg-1 is "commandblocks":
                send "&bCommandBlocks Commands:"
                send "/commandblock : Opens CommandBlock creating GUI. Use while looking at a block"

command /pschematic:
    permission: pro.rank
    permission message: &cYou need to be &bPRO &c or up to use this! (/buy)
    trigger:
        if player has permission "control.use":
            wait 0.3 seconds
            open chest with 6 row named "&6Control &3> Schematic Gallery" to player
            format slot 49 of player with compass named "&eBack" to close then run [make player execute command "control"]
            format slot 0 of player with lime dye named "&3Lakeside House" with lore "A nice lakeside 2 story house %newline% Code: 001" to close then run [make player execute command "pschematic-load 001"]
            format slot 1 of player with lime dye named "&3Skyscraper" with lore "A nice skyscraper %newline% Code: 002" to close then run [make player execute command "pschematic-load 002"]
            format slot 2 of player with lime dye named "&3Campsite" with lore "A nice campsite %newline% Code: 003" to close then run [make player execute command "pschematic-load 003"]
            format slot 3 of player with lime dye named "&3Flying Island Wirh house" with lore "A nice flying island %newline% Code: 004" to close then run [make player execute command "pschematic-load 004"]
            format slot 4 of player with lime dye named "&3Simple Mine" with lore "A small mine %newline% Code: 005" to close then run [make player execute command "pschematic-load 005"]
            format slot 5 of player with lime dye named "&3Spruce Village House" with lore "A small village house %newline% Code: 006" to close then run [make player execute command "pschematic-load 006"]
            format slot 6 of player with lime dye named "&3Small Spawn" with lore "A simple spawn %newline% Code: 007" to close then run [make player execute command "pschematic-load 007"]
            format slot 7 of player with lime dye named "&3LakeHouse" with lore "A nice lakehouse %newline% Code: 008" to close then run [make player execute command "pschematic-load 008"]
            format slot 8 of player with lime dye named "&3Small Modern House" with lore "A modern tiny house %newline% Code: 009" to close then run [make player execute command "pschematic-load 009"]
            format slot 9 of player with lime dye named "&3Fishing Boat" with lore "Small boat %newline% Code: 010" to close then run [make player execute command "pschematic-load 010"]

command /pschematic-load <text>:
    permission: pro.rank
    permission message: &cYou need to be &bPRO &c or up to use this! (/buy)
    trigger:
        if player has permission "control.use":
            wait 0.3 seconds
            if {schematic.cooldown} is "false":
                send "&aLoading schematic..."
                make console execute command "/lp user %player% permission set worldedit.clipboard.load world=%player's world%"
                make console execute command "/lp user %player% permission set worldedit.schematic.load world=%player's world%"
                wait 0.3 seconds
                make player execute command "//schematic load %arg-1%.schematic"
                wait 0.3 seconds
                make console execute command "/lp user %player% permission unset worldedit.clipboard.load world=%player's world%"
                make console execute command "/lp user %player% permission unset worldedit.schematic.load world=%player's world%"
                send "&aSchematic loaded!"
                set {schematic.cooldown} to "true"
                wait 2 minutes
                set {schematic.cooldown} to "false"
            else:
                send "&cThe server is busy computing something at the moment!"

on skript load:
    set {schematic.cooldown} to "false"

command /schemcooldown <text>:
    permission: admin.rank
    trigger:
        set {schematic.cooldown} to arg-1

command /pmanage_control:
    trigger:
        if player has permission "control.use":
            wait 0.3 seconds
            open chest with 2 row named "&6Control &3> Manage" to player
            format slot 2 of player with paper named "&aConsole" to close then run [make player execute command "pconsole"]
            format slot 4 of player with player head named "&aSubUsers" to close then run [make player execute command "psubusers"]
            format slot 6 of player with name tag named "&aPlustis API" to close then run [make player execute command "papi"]
            format slot 13 of player with compass named "&eBack" to close then run [make player execute command "control"]
        else:
            send "&cYou can't access this!"

command /pconsole:
    trigger:
        if player has permission "control.use":
            wait 0.3 seconds
            set {cnum.%player%} to -1
            open chest with 6 row named "&6Control &3> Manage > Console" to player
            format slot 47 of player with lime wool named "&aForce Save Realm" to close then run [make player execute command "pconsole_forcesave"]
            format slot 49 of player with compass named "&eBack" to close then run [make player execute command "pmanage_control"]
            format slot 51 of player with red wool named "&aClear Console" to close then run [make player execute command "pconsole_clear"]
            if size of {console.%player's world%::*} <= 44:
                loop {console.%player's world%::*}:
                    add 1 to {cnum.%player%}
                    format slot {cnum.%player%} of player with paper named "&3%loop-value%" to close
            else:
                loop {console.%player's world%::*}:
                    add 1 to {cnum.%player%}
                    format slot {cnum.%player%} of player with paper named "&3%loop-value%" to close
                    if loop-index parsed as integer = 44:
                        stop loop
                format slot 44 of player with book named "&b..." with lore "&cPlease clear the console to see further logs" to close

command /pconsole_clear:
    trigger:
        clear {console.%player's world%::*}
        make player execute command "pconsole"

command /pconsole_forcesave:
    trigger:
        if {save.cooldown} is "false":
            send "&a========================="
            send "&a[] &bRealm Progress Saved &a[]"
            send "&a========================="
            set {save.cooldown} to "true"
            wait 2 minutes
            set {save.cooldown} to "false"
        else:
            send "&c============"
            send "&c[] &bError &c[]"
            send "&c============"

on skript load:
    set {save.cooldown} to "false"

command /forcesave-cooldown:
    trigger:
        set {save.cooldown} to "false"

command /psubusers:
    trigger:
        if player's world is "%{server.name.%player%}%", "%{server.name.%player%}%_nether" or "%{server.name.%player%}%_the_end":
            wait 0.3 seconds
            open chest with 6 row named "&6Control &3> Manage > SubUsers" to player
            format slot 46 of player with paper named "&aManage SubUsers" to close then run [make player execute command "psubusers_manage"]
            format slot 49 of player with compass named "&eBack" to close then run [make player execute command "pmanage_control"]
            format slot 52 of player with book named "&aInfo" to close then run [make player execute command "psubusers_info"]
            set {num.subusers.%player%} to -1
            loop {subusers.%player's world%::*}:
                add 1 to {num.subusers.%player%}
                format slot {num.subusers.%player%} of player with player head named "&3%loop-value%" to close
        else:
            send "&cYou can't access this!"

command /psubusers_manage:
    trigger:
        send "&b==============================="
        send "&aUse command: &b/subusers <add/remove> <player>"
        send "&cNOTE: &3Use this feature at own risk"
        send "&b==============================="

command /subusers <text> <offline player>:
    trigger:
        if player's world is "%{server.name.%player%}%", "%{server.name.%player%}%_nether" or "%{server.name.%player%}%_the_end":
            if arg-1 is "add":
                if {subusers.%player's world%::*} contains arg-2:
                    send "&cThis player is alredy a SubUser!"
                else:
                    if arg-2 is online:
                        add arg-2 to {subusers.%player's world%::*}
                        make console execute command "/lp user %player% permission set control.use world=%player's world%"
                        send "&b%arg-2% &aadded as SubUser"
                    else:
                        send "&cYou can't add offline players!"
            if arg-1 is "remove":
                if {subusers.%player's world%::*} contains arg-2:
                    remove arg-2 from {subusers.%player's world%::*}
                    make console execute command "/lp user %player% permission unset control.use world=%player's world%"
                else:
                    send "&cThis player isn't a SubUser!"
        else:
            send "&cYou can't manage SubUsers in this Realm!"

command /psubusers_info:
    trigger:
        send "  "
        send "&a=== &eSubUsers &a==="
        send "  "
        send "&bSubUsers &3is a special feature that lets you add other players to your Realm's &b/control&3. By adding a user to this list they will be able to access all features in &b/control"
        send "&cNOTE: &3Use at own risk"
        send "&a===================="
        send "  "

command /pop <player>:
    trigger:
        if player's world is "%{server.name.%player%}%", "%{server.name.%player%}%_nether" or "%{server.name.%player%}%_the_end":
            if {subusers.%player's world%::*} contains arg-1:
                send "&cThis player is alredy a SubUser!"
            else:
                if arg-1 is online:
                    add arg-1 to {subusers.%player's world%::*}
                    make console execute command "/lp user %arg-1% permission set control.use world=%player's world%"
                    send "&b%arg-1% &aadded as SubUser"
                else:
                    send "&cYou can't add offline players!"

command /pdeop <offline player>:
    trigger:
        if player's world is "%{server.name.%player%}%", "%{server.name.%player%}%_nether" or "%{server.name.%player%}%_the_end":
            if {subusers.%player's world%::*} contains arg-1:
                remove arg-1 from {subusers.%player's world%::*}
                make console execute command "/lp user %arg-1% permission unset control.use world=%player's world%"
            else:
                send "&cThis player isn't a SubUser!"

command /poplist:
    trigger:
        send "&bOpped Players: &3%{subusers.%player's world%::*}%"

command /papi:
    trigger:
        if player has permission "control.use":
            wait 0.3 seconds
            open chest with 2 row named "&6Control &3> Manage > Plustis-API" to player
            format slot 2 of player with red wool named "&aRegenerate" to close then run [make player execute command "papi_regenerate"]
            format slot 4 of player with book named "&aCode" with lore "&3%{api.code.%player's world%}%" to close
            format slot 6 of player with paper named "&aInfo" to close then run [make player execute command "api"]
            format slot 13 of player with compass named "&eBack" to close then run [make player execute command "pmanage_control"]
        else:
            send "&cYou can't access this!"

command /papi_regenerate:
    trigger:
        wait 0.3 seconds
        remove {api.code.%player's world%} from {api.codes::*}
        send "&aGenerating a new code..." to player
        clear {api.code.%player's world%}
        set {api.code.%player's world%} to "api-"
        set {char::*} to "a", "b", "c", "d", "e", "f", "g", "h", "i", "l", "m", "n", "o", "p", "q", "r", "s", "t", "u", "v", "z", "1", "2", "3", "4", "5", "6", "7", "8", "9" and "0"
        wait 1 second
        loop 5 times:
            set {api.code.%player's world%} to "%{api.code.%player's world%}%%random element out of {char::*}%"
        if {api.codes::*} contains "%{api.code.%player's world%}%":
            send "&cCode regeneration failed: please try again"
        else:
            add {api.code.%player's world%} to {api.codes::*}
            wait 0.3 seconds
            set {%{api.code.%player's world%}%.code.world} to "%player's world%"
            send "&aCode generated!"
            send "&aNew code: &3%{api.code.%player's world%}%"
            wait 0.3 seconds
            make player execute command "/papi"

on command:
    if command is "/plugin":
        cancel event
    if command is "/pl":
        cancel event
    if command is "/bukkit":
        cancel event
    if command is "/bukkit:ver":
        cancel event
    if command is "/bukkit:about":
        cancel event
    if command is "/plugins":
        cancel event
    if command is "/bukkit:plugins":
        cancel event
    if command is "/bukkit:version":
        cancel event
    if command is "/bukkit:?":
        cancel event
    if command is "/plugin":
        cancel event

command /find <offline player>:
    trigger:
        if arg-1 is online:
            send "&b%arg-1% &3is currently online in &b%arg-1's world%"
        else:
            send "&cPlayer &b%arg-1% &cis not currently online!"

command /abc <text>:
    trigger:
        send "&cServer> &e%colored arg-1%" to all players

command /setspawn:
    trigger:
        if player has permission "control.use":
            send "&cThis feature is currently disabled!"
            #make console execute command "/lp user %player% permission set multiverse.core.spawn.set world=%player's world%"
            #wait 0.3 seconds
            #make player execute command "/mv setspawn"
            #make console execute command "/lp user %player% permission unset multiverse.core.spawn.set world=%player's world%"

command /spawn:
    trigger:
        if player's world is "Lobby":
            make player execute command "/lobby"
        else:
            send "&cThis feature is currently disabled!"
            #make console execute command "mv spawn %player%"

command /pfilemanager:
    trigger:
        if player has permission "control.use":
            wait 0.3 seconds
            open chest with 2 row named "&6Control &3> File Manager" to player
            format slot 0 of player with compass named "&cBack" to close then run [make player execute command "control"]
            format slot 9 of player with paper named "&3server.properties" to close then run [make player execute command "panel_serverpt"]
            format slot 10 of player with paper named "&3banned-players.json" to close then run [make player execute command "panel_banned"]
            format slot 11 of player with enchanted book named "&3Logs" to close then run [make player execute command "panel_logs"]
            format slot 12 of player with enchanted book named "&3Plugins" to close then run [make player execute command "pfilemanager_plugins"]

command /panel_serverpt:
    trigger:
        if player has permission "control.use":
            wait 0.3 seconds
            open chest with 6 row named "&6Control &3> File Manager > server.properties" to player
            format slot 49 of player with compass named "&eBack" to close then run [make player execute command "pfilemanager"]
            format slot 0 of player with zombie head named "&aDifficulty" with lore "&3Click to change the difficulty" to close then run [make player execute command "panel_serverpr_difficulty"]
            format slot 2 of player with iron sword named "&aPVP" with lore "&3Click to enable/disable pvp" to close then run [make player execute command "panel_serverpr_pvp"]
            format slot 4 of player with grass block named "&aGamemode" with lore "&3Click to set the default gamemode" to close then run [make player execute command "panel_serverpr_gamemode"]
            format slot 6 of player with paper named "&aJoin/Leave Messages" with lore "&3Click to change" to close then run [make player execute command "panel_serverpr_st-messages"]
            format slot 8 of player with player head named "&aMax Player Slots" with lore "&3Current: &b%{slots.%player's world%}%" to close then run [make player execute command "panel_serverpr_playerslots"]
            format slot 18 of player with barrier named "&aWorldBorder" with lore "&3Click to edit" to close then run [make player execute command "panel_serverpr_worldborder"]
            format slot 20 of player with barrier named "&cComing soon!" with lore "&3Click to edit" to close

command /panel_serverpr_difficulty:
    trigger:
        if player has permission "control.use":
            wait 0.3 seconds
            send "&aType &b/pdifficulty <new-difficulty>"

command /pdifficulty <text>:
    trigger:
        if player has permission "control.use":
            wait 0.3 seconds
            make console execute command "/mv modify set diff %arg-1% %player's world%"

command /panel_serverpr_pvp:
    trigger:
        if player has permission "control.use":
            wait 0.3 seconds
            send "&aType &b/pvp <true/false>"

command /pvp <text>:
    trigger:
        if player has permission "control.use":
            wait 0.3 seconds
            make console execute command "/mv modify set pvp %arg-1% %player's world%"

command /panel_serverpr_gamemode:
    trigger:
        if player has permission "control.use":
            wait 0.3 seconds
            send "&aType &b/defaultgamemode <Creative / Survival / Adventure>"

command /defaultgamemode <text>:
    trigger:
        if player has permission "control.use":
            wait 0.1 seconds
            make console execute command "/mv modify set gamemode %arg-1% %player's world%"

command /panel_serverpr_st-messages:
    trigger:
        if player has permission "control.use":
            wait 0.3 seconds
            send "&aType &b/message <join/leave> <message>"
            send "&7Color Codes are supported!"

command /message <text> <text>:
    trigger:
        if player has permission "control.use":
            if arg-1 is "join" or "leave":
                set {%arg-1%.message.%player's world%} to arg-2
                send "&a%arg-1% message set! Preview:"
                send "&7%player% %colored {%arg-1%.message.%player's world%}%"
            else:
                send "&cUsage: &b/message <join/leave> <message>"

command /panel_serverpr_playerslots:
    trigger:
        if player has permission "control.use":
            send "&3Type &b/setslot <number> &c(Max %{max.slots.rank.%{rank.%player%}%}%&c)"

command /setslot <number>:
    trigger:
        if player has permission "control.use":
            if arg-1 >= 1:
                if arg-1 <= {max.slots.rank.%{rank.%player%}%}:
                    set {slots.%player's world%} to arg-1
                    send "&aSlots set to &b%arg-1%"
                else:
                    send "&cNumber too high!"
            else:
                send "&cMax Slots can't be lower than &b1&c!"

command /panel_serverpr_worldborder:
    trigger:
        if player has permission "control.use":
            make console execute command "lp user %player% permission set minecraft.command.worldborder world=%player's world%"
            send "&3Type &b/worldborder"

command /panel_serverpr_resource:
    trigger:
        if player has permission "control.use":
            wait 0.3 seconds
            open chest with 2 row named "&6Control &3> File Manager > server.properties > ResourcePack" to player
            format slot 14 of player with compass named "&eBack" to close then run [make player execute command "panel_serverpt"]
            if {res.pk.%player's world%} is "enabled":
                format slot 4 of player with compass named "&eBack" to close then run [make player execute command "panel_serverpt"]
            else:
                format slot 4 of player with lime wool named "&aEnable ResourcePack" to close then run [make player execute command "panel_serverpt"]

command /panel_logs:
    trigger:
        if player has permission "control.use":
            wait 0.3 seconds
            open chest with 2 row named "&6Control &3> File Manager > Logs" to player
            format slot 0 of player with compass named "&eBack" to close then run [make player execute command "pfilemanager"]
            format slot 9 of player with paper named "&3latest.log" to close then run [make player execute command "panel_logs_latest"]

command /panel_logs_latest:
    trigger:
        if player has permission "control.use":
            wait 0.3 seconds
            open chest with 6 row named "&6Control &3> File Manager > Logs > latest.log" to player
            format slot 49 of player with compass named "&eBack" to close then run [make player execute command "panel_logs"]
            set {latnum.%player%} to -1
            loop {latest.log.%player's world%::*}:
                add 1 to {latnum.%player%}
                format slot {latnum.%player%} of player with paper named "%loop-value%" to close

command /panel_banned:
    trigger:
        if player has permission "control.use":
            wait 0.3 seconds
            open chest with 2 row named "&6Control &3> File Manager > banned-players.json" to player
            format slot 0 of player with compass named "&eBack" to close then run [make player execute command "pfilemanager"]
            format slot 9 of player with paper named "&3Banned Players:" with lore "%{Banned.%player's world%::*}%" to close

command /pfilemanager_plugins:
    trigger:
        if player has permission "control.use":
            wait 0.3 seconds
            open chest with 2 row named "&6Control &3> File Manager > Plugins" to player
            format slot 0 of player with compass named "&cBack" to close then run [make player execute command "pfilemanager"]
            if {plugin.luckperms.%player's world%} is "Installed":
                format slot 9 of player with enchanted book named "&3LuckPerms" to close then run [make player execute command "pfilemanager_plugins_luckperms"]
            else:
                format slot 9 of player with barrier named "&3LuckPerms" with lore "&cInstall LuckPerms to access this!" to close

command /pfilemanager_plugins_luckperms:
    trigger:
        if player has permission "control.use":
            wait 0.3 seconds
            open chest with 2 row named "&6Control &3> File Manager > Plugins > LuckPerms" to player
            format slot 0 of player with compass named "&cBack" to close then run [make player execute command "pfilemanager_plugins"]
            format slot 9 of player with paper named "&3groups.yml" to close then run [make player execute command "ppermissions"]

command /info:
    trigger:
        if player's world is "Lobby":
            send "&3IP: &bplay.plustis.xyz"
            send formatted "&3Website: <url:http://plustis.xyz>&bhttp://plustis.xyz<reset>"
            send formatted "&3Discord: <url:https://discord.gg/dZb5KEz>&bhttps://discord.gg/dZb5KEz<reset>"
            send formatted "&3Rules: <url:http://plustis.xyz/rules>&bhttp://plustis.xyz/rules<reset>"
            send formatted "&3Store: <url:http://plustis.xyz/store>&bhttp://plustis.xyz/store<reset>"
        else:
            send "  "
            send "&b%player's world% &binfo:"
            send formatted "&3Website: <url:%{website.%player's world%}%>&b%{website.%player's world%}%<reset>"
            send formatted "&3Discord: <url:%{discord.%player's world%}%>&b%{discord.%player's world%}%<reset>"
            send "  "
            send "&3Votes: &b%{votes.%player's world%}%"
            send "  "
            send "&3Players online: &b%{online.%player's world%}%"
            send "  "

command /setwebsite <text>:
    trigger:
        if player has permission "control.use":
            set {website.%player's world%} to arg-1
            send "&aWebsite URL set to %arg-1%"
            send "[%player's world%] %player% set website link to: %arg-1%" to channel with id "719181503174672405" with "MainBot"

command /setdiscord <text>:
    trigger:
        if player has permission "control.use":
            set {discord.%player's world%} to arg-1
            send "&aDiscord Invite URL set to %arg-1%"
            send "[%player's world%] %player% set discord link to: %arg-1%" to channel with id "719181503174672405" with "MainBot"

command /vote:
    trigger:
        if player's world is "Lobby":
            send formatted "&3Vote for &aPlustisHost: <url:http://plustis.xyz/vote>&bhttp://plustis.xyz/vote<reset>"
        else:
            open chest with 1 row named "&3Vote > %player's world%" to player
            if {voted.%player%.srv} is "true":
                format slot 4 of player with barrier named "&cError" with lore "&cYou alredy voted today!" to close
            else:
                format slot 4 of player with paper named "&aVote" to close then run [make player execute command "?pvote %player's world%"]

command /?pvote <text>:
    trigger:
        if {voted.%player%.srv} is "true":
            send "&cError: You alredy voted today!"
        else:
            if player's world is "Lobby":
                send "&cError: You must be in a PlayerRealm to vote!"
            else:
                send "&aVerifying data..."
                wait 0.5 seconds
                add 1 to {votes.%player's world%}
                set {voted.%player%.srv} to "true"
                send "&aVote counted!"
                if {plugin.votifier.%player's world%} is "Installed":
                    loop {Prizes.%player's world%::*}:
                        give player loop-value
                        send "&aYou voted for &b%player's world% &aso you recived a prize, enjoy!"
                wait 12 hours
                set {voted.%player%.srv} to "false"

command /ppvote_reset <text>:
    permission: admin.rank
    trigger:
        if arg-1 is "all":
            loop {servers::*}:
                set {votes.%loop-value%} to 0
            send "&cVotes resetted"
        else:
            if {servers::*} contains arg-1:
                set {votes.%arg-1%} to 0
                send "&cVotes resetted"

command /ppvote_clear <text>:
    permission: admin.rank
    trigger:
        if arg-1 is "all":
            loop {players::*}:
                set {voted.%loop-value%.srv} to "false"
            send "&cVote resetted"
        else:
            set {voted.%arg-1%.srv} to "false"
            send "&cVote resetted"

on damage:
    if victim is a player:
        if damage was caused by void:
            if victim's world is "Lobby":
                make victim execute command "/spawn"

command /pfriends_menu:
    trigger:
        wait 0.3 seconds
        open chest with 2 row named "&3Friends" to player
        format slot 2 of player with lime wool named "&aAdd Friend" to close then run [make player execute command "/pfriend_add"]
        format slot 4 of player with book named "&eFriends" to close then run [make player execute command "/friends list"]
        format slot 6 of player with red wool named "&cRemove Friend" to close then run [make player execute command "/pfriend_remove"]
        format slot 13 of player with compass named "&eBack" to close then run [make player execute command "/?profile %player%"]

command /pfriend_add:
    trigger:
        send "&aType &b/friends add <player>"

command /pfriend_remove:
    trigger:
        send "&aType &b/friends remove <player>"

command /friends <text> [<offline player>]:
    usage: /friends <add/remove/list> [<player>]
    trigger:
        if arg-1 is "add":
            if arg-2 is set:
                if arg-2 is "%player%":
                    send "&cI see... You have no friends"
                else:
                    if {friends.%player%::*} contains arg-2:
                        send "&b%arg-2% &cis alredy in your friends list!"
                    else:
                        if arg-2 is online:
                            send "&aFriend request sent to &e%arg-2%" to player
                            send "&aThe request will expire in &b30 seconds" to player
                            send "&e%player% &asent you a friend request" to arg-2
                            send "&aType &b/friends accept %player% &ato accept" to arg-2
                            send "&aThe request will expire in &b30 seconds" to arg-2
                            set {request.%player%} to arg-2
                            wait 30 seconds
                            clear {request.%player%}
                        else:
                            send "&cThis player is not online!"
        if arg-1 is "accept":
            if arg-2 is set:
                if {request.%arg-2%} is "%player%":
                    send "&aAdded &b%arg-2% &ato your friends list" to player
                    send "&aAdded &b%player% &ato your friends list" to arg-2
                    add "%player%" to {friends.%arg-2%::*}
                    add "%arg-2%" to {friends.%player%::*}
        if arg-1 is "remove":
            if arg-2 is set:
                if {friends.%player%::*} contains arg-2:
                    remove arg-2 from {friends.%player%::*}
                    remove "%player%" from {friends.%arg-2%::*}
                    send "&aUnfriended &b%arg-2%"
                else:
                    send "&b%arg-2% &cis not in your friends list"
        if arg-1 is "list":
            set {fnum.%player%} to -1
            wait 0.3 seconds
            open chest inventory with 6 rows named "&3Friends List" to player
            set slot 49 of player's current inventory to compass named "&eBack"
            loop {friends.%player%::*}:
                add 1 to {fnum.%player%}
                set slot {fnum.%player%} of player's current inventory to player head named "%loop-value%"

on inventory click:
    if inventory name of player's current inventory is "&3Friends List":
        if event-slot is compass named "&eBack":
            cancel event
            make player execute command "/pfriends_menu"
        else:
            cancel event
            make player execute command "/find %event-slot's name%"

command /pfriends_view <offline player>:
    trigger:
        set {pnumf.%player%} to -1
        open chest with 1 row named "&b%arg-1%&3's profile > Friends" to player
        loop {friends.%player%::*}:
            add 1 to {pnumf.%player%}
            format slot {pnumf.%player%} of player with player head named "%loop-value%" to close
        format slot 49 of player with compass named "&eBack" to close then run [make player execute command "/?profile %arg-1%"]

command /invite [<player>]:
    trigger:
        if player's world is "Lobby":
            send "&cYou must be in a Realm to invite someone!"
        else:
            if arg-1 is set:
                send "&aInvited &b%arg-1%&a!" to player
                open chest with 1 row named "&3Invite" to arg-1
                format slot 2 of arg-1 with lime wool named "&aAccept" to close then run [make arg-1 execute command "pinvite_accept %player%"]
                format slot 4 of arg-1 with book named "&eInvite" with lore "&3Invited by: &b%player%" and "&7You have been invited to join &b%player's world%" to close
                format slot 6 of arg-1 with red wool named "&cDeny" to close
            else:
                set {fnum.%player%} to -1
                wait 0.3 seconds
                open chest with 6 row named "&3Invite" to player
                format slot 49 of player with barrier named "&eClose" to close
                loop {friends.%player%::*}:
                    add 1 to {fnum.%player%}
                    format slot {fnum.%player%} of player with player head named "&3%loop-value%" to close then run [make player execute command "invite %loop-value%"]

command /pinvite_accept <player>:
    trigger:
        make player execute command "/join %arg-1's world%"
        send "&b%player% &aaccepted your request!" to arg-1

command /pfriend_removep <text>:
    permission: admin.rank
    trigger:
        remove arg-1 from {friends.%player%::*}

on chat:
    if {blacklisted_words::*} contains message:
        cancel event
        make console execute command "warn %player% Message modereated by CHAT FILTER"

command /blacklist_word <text>:
    permission: admin.rank
    trigger:
        if {blacklisted_words::*} contains arg-1:
            send "&cAlredy added"
        else:
            add arg-1 to {blacklisted_words::*}
            send "&aWord Blacklisted!"

command /unblacklist_word <text>:
    permission: admin.rank
    trigger:
        remove arg-1 from {blacklisted_words::*}

every 5 seconds in "Lobby":
    loop {servers::*}:
        set {online.%loop-value%} to 0
        set {online.%loop-value%_nether} to 0
        set {online.%loop-value%_the_end} to 0
    loop all players:
        add 1 to {online.%loop-player's world%}

on join:
    if player's world is "Lobby":
        broadcast "&7%player% &3has joined your lobby" to player's world
    else:
        broadcast "&7%player% %colored {join.message.%{server.name.%player%}%}%" to player's world

on quit:
    if player's world is "Lobby":
        wait 0.3 seconds
        broadcast "&7%player% &3has left your lobby" to player's world
    else:
        broadcast "&7%player% %colored {leave.message.%player's world%}%" to player's world
        if {plugin.discordsrv.%player's world%} is "Installed":
            send "**%player% has left the Realm**" to channel with id "%{chat.id.%player's world%}%" with "DiscordSRV"

on join:
    if player has permission "staff.rank":
        send "**%player% has joined the server**" to channel with id "719216221928685589" with "MainBot"
        loop all players:
            if loop-player has permission "staff.rank":
                send "&9[STAFF-ONLY] &b%player% &7has joined the server" to loop-player

on quit:
    if player has permission "staff.rank":
        loop all players:
            send "**%player% has left the server**" to channel with id "719216221928685589" with "MainBot"
            if loop-player has permission "staff.rank":
                send "&9[STAFF-ONLY] &b%player% &7has left the server" to loop-player

on join:
    if {server.created.%player%} is "true":
        if {fixed.control.%player%} is "true":
            #
        else:
            make console execute command "/lp user %player% permission set control.use world=%{server.name.%player%}%"
            set {fixed.control.%player%} to "true"

on command:
    if player's world is "Lobby":
        #
    else:
        add "&b%player% &3> &b%command%" to {console.%player's world%::*}

command /maintenance:
    permission: admin.rank
    trigger:
        loop all players:
            make console execute command "kick %loop-player% &cPlustis is now in maintenance! More info on our discord! &bhttps://discord.gg/dZb5KEz"
        make console execute command "/whitelist on"

command /tutorial:
    trigger:
        if player's world is "Lobby":
            open chest with 1 row named "&6Are you sure you want to start the tutorial?" to player
            format slot 2 of player with lime wool named "&aYes" to close then run [make player execute command "tut-start"]
            format slot 6 of player with red wool named "&cNo" to close
        else:
            send "&cYou must be in lobby!"
            

command /tut-start:
    trigger:
        if player's world is "Lobby":
            loop 20 times:
                send "   " to player
            send "&aStarting the tutorial..."
            set {tutorial.%player%} to true
            wait 3 seconds
            make console execute command "effect give %player% minecraft:invisibility 1000 100"
            wait 0.3 seconds
            make console execute command "essentials:warp tut1 %player%"
            send action bar "&aWelcome to Plustis!" to player
            wait 3 seconds
            send action bar "&aHere on Plustis you can create your own Realm!" to player
            wait 3 seconds
            send action bar "&aA Realm is a private world where you can do whatever you want!" to player
            wait 3 seconds
            send action bar "&aTo create a Ream, &bclick on this npc &aor do &b/create" to player
            wait 3 seconds
            send action bar "&aRemember to visit &b/rules &afor a complete list of rules" to player
            wait 3 seconds
            make console execute command "essentials:warp tut2 %player%"
            wait 0.3 seconds
            send action bar "&aThis is the main menu npc" to player
            wait 3 seconds
            send action bar "&aOpening the menu..." to player
            wait 3 seconds
            make player execute command "/?menu"
            wait 10 seconds
            close player's inventory
            wait 3 seconds
            send action bar "&aYou can access the main menu by clicking on the npc or with the book in your inventory" to player
            wait 3 seconds
            send action bar "&aThe menu lets you access many things:" to player
            wait 3 seconds
            send action bar "&aRealms Browser, Realm Control Panel, Featured Realms and many more!" to player
            wait 3 seconds
            send action bar "&aRealm Browser will show you all Listed Realms" to player
            wait 3 seconds
            send action bar "&aThe Control Panel will let you start/stop your Realm and edit its settings!" to player
            wait 3 seconds
            send action bar "&aIn the menu, you can also find the Featured Realms" to player
            wait 3 seconds
            send action bar "&aFeatured Realms are the top-voted Realms" to player
            wait 3 seconds
            send action bar "&aTo vote a Realm, join it and type &b/vote" to player
            wait 3 seconds
            send action bar "&aAfter creating your own Realm, start it in the Control Panel" to player
            wait 3 seconds
            send action bar "&aThen, click &bJoin Your Realm &abutton or type &b/join <Realm Name>" to player
            wait 3 seconds
            make console execute command "essentials:warp tut3 %player%"
            wait 3 seconds
            send action bar "&aWhen into your Realm, type &b/control &ato open the Realm's panel" to player
            wait 3 seconds
            send action bar "&aOpening the Control Panel (Example)..." to player
            wait 3 seconds
            make player execute command "/?control-example"
            wait 10 seconds
            close player's inventory
            wait 3 seconds
            wait 3 seconds
            send action bar "&aPlustis Realms include Plugins, they are game modifiers" to player
            wait 3 seconds
            send action bar "&aTo get info about a plugin, type &b/help <plugin>" to player
            wait 3 seconds
            send action bar "&aIf you need more help setting-up the plugins feel free to ask to a staff member" to player
            wait 3 seconds
            send action bar "&aTo get gamemode on your server, please install essentials plugin and then type:" to player
            wait 3 seconds
            send action bar "&a/gmc for creative, /gms for survival, /gma for adventure" to player
            wait 3 seconds
            send action bar "&aIf you need more help feel free to ask on &b/discord" to player
            wait 3 seconds
            send action bar "&aWe also have forums, visit them with &b/forums" to player
            wait 3 seconds
            send action bar "&aTo submit a suggestion or a bug report, please visit the forums and make an account" to player
            wait 3 seconds
            send action bar "&cTutorial is finished! Teleporting to the Lobby..." to player
            set {tutorial.%player%} to false
            wait 1 second
            make player execute command "/lobby"
            make console execute command "effect clear %player%"
        else:
            send "&cYou must be in lobby!"

on any move:
    if {tutorial.%player%} is true:
        cancel event
        send "&cPlease wait for the tutorial to finish..."

on command:
    if command is "/?menu", "/serverbrowser", "/controlpanel", "/?control-example" or "/tut-disabled":
        #
    else:
        if {tutorial.%player%} is true:
            cancel event
            send "&cPlease wait for the tutorial to finish..."

command /?control-example:
    trigger:
        open chest with 5 row named "&6Control &7(&3Example&7)" to player
        format slot 10 of player with paper named "&aSchematic Gallery" with lore "&3Add cool schematics to your Realm (&cOnly &bPRO &cand up)" and "&cNOT AVAILABLE IN TUTORIAL" to close then run [make player execute command "tut-disabled"]
        format slot 12 of player with lava bucket named "&aPlugins" with lore "&3Mange your Realm plugins" and "&cNOT AVAILABLE IN TUTORIAL" to close then run [make player execute command "tut-disabled"]
        format slot 14 of player with book named "&aGamerules" with lore "&3Manage your Realm's gamerules" and "&cNOT AVAILABLE IN TUTORIAL" to close then run [make player execute command "tut-disabled"]
        format slot 16 of player with repeater named "&aFile Manager" with lore "&3Manage your Realm files (Configs, messages...)" and "&cNOT AVAILABLE IN TUTORIAL" to close then run [make player execute command "tut-disabled"]
        format slot 29 of player with compass named "&cSupport" with lore "&3Get support on our discord if you have an issue!" and "&cNOT AVAILABLE IN TUTORIAL" to close then run [make player execute command "tut-disabled"]
        format slot 31 of player with command block named "&aManage" with lore "&3Manage your Realm" and "&cNOT AVAILABLE IN TUTORIAL" to close then run [make player execute command "tut-disabled"]
        format slot 33 of player with compass named "&aYouTube" with lore "&3Follow Plustis tutorials on our channel!" and "&cNOT AVAILABLE IN TUTORIAL" to close then run [make player execute command "tut-disabled"]

command /tut-disabled:
    trigger:
        send "&cNot available in tutorial!"

on join:
    set {tutorial.%player%} to false

on chat:
    if player's world is "Lobby":
        send "%player% > %message%" to channel with id "726904393433350165" with "MainBot"

guild message receive seen by "MainBot":
    if discord id of event-user is not "691608955792916490":
        if discord id of event-channel is "726904393433350165":
            loop all players:
                if loop-player's world is "Lobby":
                    send "&r[&bDISCORD&r] %event-user%  %event-message%" to loop-player

command /list:
    trigger:
        clear {players_%player's world%::*}
        loop all players:
            if loop-player's world is "%player's world%":
                add loop-player to {players_%player's world%::*}
        send "&3Players Online in &b%player's world% &3(&r%size of {players_%player's world%::*}%&3)&r: %{players_%player's world%::*}%"

command /worldchange <player> <text>:
    permission: admin.rank
    trigger:
        make console execute command "/mvtp %arg-1% %arg-2%"

on join:
    make player execute command "/update-check"

command /update:
    trigger:
        if player's world is "Lobby":
            if {version.server.%player%} is not {@version}:
                send "&aUpdating your Realm..."
                send "&c(Please do not log off)"
                set {version.old.%player%} to {version.server.%player%}
                wait 5 seconds
                if {version.server.%player%} is not set:
                    make console execute command "/mv create %{server.name.%player%}%_nether NETHER"
                    make console execute command "/mv create %{server.name.%player%}%_the_end END"

                    make console execute command "/lp user %player% permission set control.use world=%{server.name.%player%}%_nether"
                    make console execute command "/lp user %player% permission set control.use world=%{server.name.%player%}%_the_end"

                    set {join.message.%{server.name.%player%}%_nether} to "&ehas joined the game"
                    set {leave.message.%{server.name.%player%}%_nether} to "&ehas left the game"

                    set {join.message.%{server.name.%player%}%_the_end} to "&ehas joined the game"
                    set {leave.message.%{server.name.%player%}%_the_end} to "&ehas left the game"

                    set {version.server.%player%} to 0.3
                if {version.server.%player%} is 0.1 or 0.2:
                    make console execute command "/lp user %player% permission set control.use world=%{server.name.%player%}%_nether"
                    make console execute command "/lp user %player% permission set control.use world=%{server.name.%player%}%_the_end"

                    set {join.message.%{server.name.%player%}%_nether} to "&ehas joined the game"
                    set {leave.message.%{server.name.%player%}%_nether} to "&ehas left the game"

                    set {join.message.%{server.name.%player%}%_the_end} to "&ehas joined the game"
                    set {leave.message.%{server.name.%player%}%_the_end} to "&ehas left the game"

                    set {version.server.%player%} to 0.3
                if {version.server.%player%} is 0.3:
                    make console execute command "/lp user %player% permission set control.use world=%{server.name.%player%}%_nether"
                    make console execute command "/lp user %player% permission set control.use world=%{server.name.%player%}%_the_end"
                
                    set {version.server.%player%} to 0.4
                if {version.server.%player%} is 0.4:
                    set {owner.%{server.name.%player%}%} to "%player%"
                    set {owner.%{server.name.%player%}%_nether} to "%player%"
                    set {owner.%{server.name.%player%}%_the_end} to "%player%"
                
                    set {version.server.%player%} to 0.5
                if {version.server.%player%} is 0.5:
                    set {icon.%{server.name.%player%}%} to oak sign
                
                    set {version.server.%player%} to 0.6
                if {version.server.%player%} is 0.6:
                    add "Java" to {version.allowed::%{server.name.%player%}%::*}
                    add "Bedrock" to {version.allowed::%{server.name.%player%}%::*}

                    set {version.server.%player%} to 0.7
                if {version.server.%player%} is 0.7:
                    make console execute command "/pwi group create %{server.name.%player%}% %{server.name.%player%}% %{server.name.%player%}%_nether %{server.name.%player%}%_the_end"

                    set {version.server.%player%} to 0.8
                if {version.server.%player%} is 0.8:
                    make console execute command "/lp user %player% permission set control.use world=%{server.name.%player%}%"
                    make console execute command "/lp user %player% permission set control.use world=%{server.name.%player%}%_nether"
                    make console execute command "/lp user %player% permission set control.use world=%{server.name.%player%}%_the_end"

                    set {version.server.%player%} to 0.9
                if {version.server.%player%} is 0.9:
                    send "&cPlease mind that this update might take a while" to player
                    if {plugin.essentials.%{server.name.%player%}%} is "Installed":
                        send "&cTo fix some issues the plugin Essentials will be uninstalled. You may reintall it later." to player
                        set {plugin.essentials.%{server.name.%player%}%} to "Not Installed"
                        make console execute command "/lp user %player% permission unset essentials.item world=%{server.name.%player%}%"
                        make console execute command "/lp user %player% permission unset gmc.essentialspl world=%{server.name.%player%}%"
                        make console execute command "/lp user %player% permission unset gms.essentialspl world=%{server.name.%player%}%"
                        make console execute command "/lp user %player% permission unset gma.essentialspl world=%{server.name.%player%}%"
                        make console execute command "/lp user %player% permission unset gmsp.essentialspl world=%{server.name.%player%}%"
                        make console execute command "/lp user %player% permission unset sethome.essentialspl world=%{server.name.%player%}%"
                        make console execute command "/lp user %player% permission unset home.essentialspl world=%{server.name.%player%}%"
                        wait 5 seconds
                        make console execute command "/lp user %player% permission unset delhome.essentialspl world=%{server.name.%player%}%"
                        make console execute command "/lp user %player% permission unset invsee.essentialspl world=%{server.name.%player%}%"
                        make console execute command "/lp user %player% permission unset kick.essentialspl world=%{server.name.%player%}%"
                        make console execute command "/lp user %player% permission unset ban.essentialspl world=%{server.name.%player%}%"
                        make console execute command "/lp user %player% permission unset unban.essentialspl world=%{server.name.%player%}%"
                        make console execute command "/lp user %player% permission unset bc.essentialspl world=%{server.name.%player%}%"
                        make console execute command "/lp user %player% permission unset day.essentialspl world=%{server.name.%player%}%"
                        make console execute command "/lp user %player% permission unset night.essentialspl world=%{server.name.%player%}%"
                        make console execute command "/lp user %player% permission unset sun.essentialspl world=%{server.name.%player%}%"
                        wait 5 seconds
                        make console execute command "/lp user %player% permission unset rain.essentialspl world=%{server.name.%player%}%"
                        make console execute command "/lp user %player% permission unset thunder.essentialspl world=%{server.name.%player%}%"
                        make console execute command "/lp user %player% permission unset effect.essentialspl world=%{server.name.%player%}%"
                        make console execute command "/lp user %player% permission unset tp.essentialspl world=%{server.name.%player%}%"
                        make console execute command "/lp user %player% permission unset tphere.essentialspl world=%{server.name.%player%}%"
                        make console execute command "/lp user %player% permission unset kill.essentialspl world=%{server.name.%player%}%"
                        make console execute command "/lp user %player% permission unset killall.essentialspl world=%{server.name.%player%}%"
                        make console execute command "/lp user %player% permission unset tpa.essentialspl world=%{server.name.%player%}%"
                        make console execute command "/lp user %player% permission unset tpaccept.essentialspl world=%{server.name.%player%}%"
                        wait 5 seconds
                        make console execute command "/lp user %player% permission unset tpdeny.essentialspl world=%{server.name.%player%}%"
                        make console execute command "/lp user %player% permission unset warn.essentialspl world=%{server.name.%player%}%"
                        make console execute command "/lp user %player% permission unset tempban.essentialspl world=%{server.name.%player%}%"
                        make console execute command "/lp user %player% permission unset essentials.back world=%{server.name.%player%}%"
                        make console execute command "/lp user %player% permission unset tocord.essentialspl world=%{server.name.%player%}%"
                        make console execute command "/lp user %player% permission unset essentials.speed world=%{server.name.%player%}%"   
                        make console execute command "/lp user %player% permission unset essentials.hat world=%{server.name.%player%}%"
                    
                    if {plugin.essentials.%{server.name.%player%}%_nether} is "Installed":
                        send "&cTo fix some issues the plugin Essentials will be uninstalled. You may reintall it later." to player
                        set {plugin.essentials.%{server.name.%player%}%_nether} to "Not Installed"
                        wait 15 seconds
                        make console execute command "/lp user %player% permission unset essentials.item world=%{server.name.%player%}%_nether"
                        make console execute command "/lp user %player% permission unset gmc.essentialspl world=%{server.name.%player%}%_nether"
                        make console execute command "/lp user %player% permission unset gms.essentialspl world=%{server.name.%player%}%_nether"
                        make console execute command "/lp user %player% permission unset gma.essentialspl world=%{server.name.%player%}%_nether"
                        make console execute command "/lp user %player% permission unset gmsp.essentialspl world=%{server.name.%player%}%_nether"
                        make console execute command "/lp user %player% permission unset sethome.essentialspl world=%{server.name.%player%}%_nether"
                        make console execute command "/lp user %player% permission unset home.essentialspl world=%{server.name.%player%}%_nether"
                        wait 5 seconds
                        make console execute command "/lp user %player% permission unset delhome.essentialspl world=%{server.name.%player%}%_nether"
                        make console execute command "/lp user %player% permission unset invsee.essentialspl world=%{server.name.%player%}%_nether"
                        make console execute command "/lp user %player% permission unset kick.essentialspl world=%{server.name.%player%}%_nether"
                        make console execute command "/lp user %player% permission unset ban.essentialspl world=%{server.name.%player%}%_nether"
                        make console execute command "/lp user %player% permission unset unban.essentialspl world=%{server.name.%player%}%_nether"
                        make console execute command "/lp user %player% permission unset bc.essentialspl world=%{server.name.%player%}%_nether"
                        make console execute command "/lp user %player% permission unset day.essentialspl world=%{server.name.%player%}%_nether"
                        make console execute command "/lp user %player% permission unset night.essentialspl world=%{server.name.%player%}%_nether"
                        make console execute command "/lp user %player% permission unset sun.essentialspl world=%{server.name.%player%}%_nether"
                        wait 5 seconds
                        make console execute command "/lp user %player% permission unset rain.essentialspl world=%{server.name.%player%}%_nether"
                        make console execute command "/lp user %player% permission unset thunder.essentialspl world=%{server.name.%player%}%_nether"
                        make console execute command "/lp user %player% permission unset effect.essentialspl world=%{server.name.%player%}%_nether"
                        make console execute command "/lp user %player% permission unset tp.essentialspl world=%{server.name.%player%}%_nether"
                        make console execute command "/lp user %player% permission unset tphere.essentialspl world=%{server.name.%player%}%_nether"
                        make console execute command "/lp user %player% permission unset kill.essentialspl world=%{server.name.%player%}%_nether"
                        make console execute command "/lp user %player% permission unset killall.essentialspl world=%{server.name.%player%}%_nether"
                        make console execute command "/lp user %player% permission unset tpa.essentialspl world=%{server.name.%player%}%_nether"
                        make console execute command "/lp user %player% permission unset tpaccept.essentialspl world=%{server.name.%player%}%_nether"
                        wait 5 seconds
                        make console execute command "/lp user %player% permission unset tpdeny.essentialspl world=%{server.name.%player%}%_nether"
                        make console execute command "/lp user %player% permission unset warn.essentialspl world=%{server.name.%player%}%_nether"
                        make console execute command "/lp user %player% permission unset tempban.essentialspl world=%{server.name.%player%}%_nether"
                        make console execute command "/lp user %player% permission unset essentials.back world=%{server.name.%player%}%_nether"
                        make console execute command "/lp user %player% permission unset tocord.essentialspl world=%{server.name.%player%}%_nether"
                        make console execute command "/lp user %player% permission unset essentials.speed world=%{server.name.%player%}%_nether"
                        make console execute command "/lp user %player% permission unset essentials.hat world=%{server.name.%player%}%_nether"

                    if {plugin.essentials.%{server.name.%player%}%_the_end} is "Installed":
                        send "&cTo fix some issues the plugin Essentials will be uninstalled. You may reintall it later." to player
                        set {plugin.essentials.%{server.name.%player%}%_the_end} to "Not Installed"
                        wait 5 seconds
                        make console execute command "/lp user %player% permission unset essentials.item world=%{server.name.%player%}%_the_end"
                        make console execute command "/lp user %player% permission unset gmc.essentialspl world=%{server.name.%player%}%_the_end"
                        make console execute command "/lp user %player% permission unset gms.essentialspl world=%{server.name.%player%}%_the_end"
                        make console execute command "/lp user %player% permission unset gma.essentialspl world=%{server.name.%player%}%_the_end"
                        make console execute command "/lp user %player% permission unset gmsp.essentialspl world=%{server.name.%player%}%_the_end"
                        make console execute command "/lp user %player% permission unset sethome.essentialspl world=%{server.name.%player%}%_the_end"
                        make console execute command "/lp user %player% permission unset home.essentialspl world=%{server.name.%player%}%_the_end"
                        wait 7 seconds
                        make console execute command "/lp user %player% permission unset delhome.essentialspl world=%{server.name.%player%}%_the_end"
                        make console execute command "/lp user %player% permission unset invsee.essentialspl world=%{server.name.%player%}%_the_end"
                        make console execute command "/lp user %player% permission unset kick.essentialspl world=%{server.name.%player%}%_the_end"
                        make console execute command "/lp user %player% permission unset ban.essentialspl world=%{server.name.%player%}%_the_end"
                        make console execute command "/lp user %player% permission unset unban.essentialspl world=%{server.name.%player%}%_the_end"
                        make console execute command "/lp user %player% permission unset bc.essentialspl world=%{server.name.%player%}%_the_end"
                        make console execute command "/lp user %player% permission unset day.essentialspl world=%{server.name.%player%}%_the_end"
                        make console execute command "/lp user %player% permission unset night.essentialspl world=%{server.name.%player%}%_the_end"
                        make console execute command "/lp user %player% permission unset sun.essentialspl world=%{server.name.%player%}%_the_end"
                        wait 7 seconds
                        make console execute command "/lp user %player% permission unset rain.essentialspl world=%{server.name.%player%}%_the_end"
                        make console execute command "/lp user %player% permission unset thunder.essentialspl world=%{server.name.%player%}%_the_end"
                        make console execute command "/lp user %player% permission unset effect.essentialspl world=%{server.name.%player%}%_the_end"
                        make console execute command "/lp user %player% permission unset tp.essentialspl world=%{server.name.%player%}%_the_end"
                        make console execute command "/lp user %player% permission unset tphere.essentialspl world=%{server.name.%player%}%_the_end"
                        make console execute command "/lp user %player% permission unset kill.essentialspl world=%{server.name.%player%}%_the_end"
                        make console execute command "/lp user %player% permission unset killall.essentialspl world=%{server.name.%player%}%_the_end"
                        make console execute command "/lp user %player% permission unset tpa.essentialspl world=%{server.name.%player%}%_the_end"
                        make console execute command "/lp user %player% permission unset tpaccept.essentialspl world=%{server.name.%player%}%_the_end"
                        wait 7 seconds
                        make console execute command "/lp user %player% permission unset tpdeny.essentialspl world=%{server.name.%player%}%_the_end"
                        make console execute command "/lp user %player% permission unset warn.essentialspl world=%{server.name.%player%}%_the_end"
                        make console execute command "/lp user %player% permission unset tempban.essentialspl world=%{server.name.%player%}%_the_end"
                        make console execute command "/lp user %player% permission unset essentials.back world=%{server.name.%player%}%_the_end"
                        make console execute command "/lp user %player% permission unset tocord.essentialspl world=%{server.name.%player%}%_the_end"
                        make console execute command "/lp user %player% permission unset essentials.speed world=%{server.name.%player%}%_the_end"   
                        make console execute command "/lp user %player% permission unset essentials.hat world=%{server.name.%player%}%_the_end"

                    set {version.server.%player%} to 1.0
                if {version.server.%player%} is 1.0:
                    if {plugin.armorstandeditor.%{server.name.%player%}%} is "Installed":
                        send "&cTo fix some issues the plugin ArmorstandEditor will be uninstalled. You may reintall it later." to player
                        set {plugin.armorstandeditor.%{server.name.%player%}%} to "Not Installed"
                        wait 7 seconds
                        make console execute command "/lp user %player% permission unset asedit.basic world=%{server.name.%player%}%"
                        make console execute command "/lp user %player% permission unset asedit.copy world=%{server.name.%player%}%"
                        make console execute command "/lp user %player% permission unset asedit.showarms world=%{server.name.%player%}%"
                        make console execute command "/lp user %player% permission unset asedit.invisible world=%{server.name.%player%}%"
                        make console execute command "/lp user %player% permission unset asedit.size world=%{server.name.%player%}%"
                        make console execute command "/lp user %player% permission unset asedit.baseplate world=%{server.name.%player%}%"
                        make console execute command "/lp user %player% permission unset asedit.gravity world=%{server.name.%player%}%"
                        wait 7 seconds
                        make console execute command "/lp user %player% permission unset asedit.placement world=%{server.name.%player%}%"
                        make console execute command "/lp user %player% permission unset asedit.equipment world=%{server.name.%player%}%"
                        make console execute command "/lp user %player% permission unset asedit.rotate world=%{server.name.%player%}%"
                        make console execute command "/lp user %player% permission unset asedit.head world=%{server.name.%player%}%"
                        make console execute command "/lp user %player% permission unset asedit.body world=%{server.name.%player%}%"
                        make console execute command "/lp user %player% permission unset asedit.positionarms world=%{server.name.%player%}%"
                        wait 7 seconds
                        make console execute command "/lp user %player% permission unset asedit.positionlegs world=%{server.name.%player%}%"
                        make console execute command "/lp user %player% permission unset asedit.leftarm world=%{server.name.%player%}%"
                        make console execute command "/lp user %player% permission unset asedit.rightarm world=%{server.name.%player%}%"
                        make console execute command "/lp user %player% permission unset asedit.leftleg world=%{server.name.%player%}%"
                        make console execute command "/lp user %player% permission unset asedit.rightleg world=%{server.name.%player%}%"
                        make console execute command "/lp user %player% permission unset asedit.reset world=%{server.name.%player%}%"

                    if {plugin.armorstandeditor.%{server.name.%player%}%_nether} is "Installed":
                        send "&cTo fix some issues the plugin ArmorstandEditor will be uninstalled. You may reintall it later." to player
                        set {plugin.armorstandeditor.%{server.name.%player%}%_nether} to "Not Installed"
                        wait 7 seconds
                        make console execute command "/lp user %player% permission unset asedit.basic world=%{server.name.%player%}%_nether"
                        make console execute command "/lp user %player% permission unset asedit.copy world=%{server.name.%player%}%_nether"
                        make console execute command "/lp user %player% permission unset asedit.showarms world=%{server.name.%player%}%_nether"
                        make console execute command "/lp user %player% permission unset asedit.invisible world=%{server.name.%player%}%_nether"
                        make console execute command "/lp user %player% permission unset asedit.size world=%{server.name.%player%}%_nether"
                        make console execute command "/lp user %player% permission unset asedit.baseplate world=%{server.name.%player%}%_nether"
                        make console execute command "/lp user %player% permission unset asedit.gravity world=%{server.name.%player%}%_nether"
                        wait 7 seconds
                        make console execute command "/lp user %player% permission unset asedit.placement world=%{server.name.%player%}%_nether"
                        make console execute command "/lp user %player% permission unset asedit.equipment world=%{server.name.%player%}%_nether"
                        make console execute command "/lp user %player% permission unset asedit.rotate world=%{server.name.%player%}%_nether"
                        make console execute command "/lp user %player% permission unset asedit.head world=%{server.name.%player%}%_nether"
                        make console execute command "/lp user %player% permission unset asedit.body world=%{server.name.%player%}%_nether"
                        make console execute command "/lp user %player% permission unset asedit.positionarms world=%{server.name.%player%}%_nether"
                        wait 7 seconds
                        make console execute command "/lp user %player% permission unset asedit.positionlegs world=%{server.name.%player%}%_nether"
                        make console execute command "/lp user %player% permission unset asedit.leftarm world=%{server.name.%player%}%_nether"
                        make console execute command "/lp user %player% permission unset asedit.rightarm world=%{server.name.%player%}%_nether"
                        make console execute command "/lp user %player% permission unset asedit.leftleg world=%{server.name.%player%}%_nether"
                        make console execute command "/lp user %player% permission unset asedit.rightleg world=%{server.name.%player%}%_nether"
                        make console execute command "/lp user %player% permission unset asedit.reset world=%{server.name.%player%}%_nether"

                    if {plugin.armorstandeditor.%{server.name.%player%}%_the_end} is "Installed":
                        send "&cTo fix some issues the plugin ArmorstandEditor will be uninstalled. You may reintall it later." to player
                        set {plugin.armorstandeditor.%{server.name.%player%}%_the_end} to "Not Installed"
                        make console execute command "/lp user %player% permission unset asedit.basic world=%{server.name.%player%}%_the_end"
                        make console execute command "/lp user %player% permission unset asedit.copy world=%{server.name.%player%}%_the_end"
                        make console execute command "/lp user %player% permission unset asedit.showarms world=%{server.name.%player%}%_the_end"
                        make console execute command "/lp user %player% permission unset asedit.invisible world=%{server.name.%player%}%_the_end"
                        make console execute command "/lp user %player% permission unset asedit.size world=%{server.name.%player%}%_the_end"
                        make console execute command "/lp user %player% permission unset asedit.baseplate world=%{server.name.%player%}%_the_end"
                        make console execute command "/lp user %player% permission unset asedit.gravity world=%{server.name.%player%}%_the_end"
                        wait 5 seconds
                        make console execute command "/lp user %player% permission unset asedit.placement world=%{server.name.%player%}%_the_end"
                        make console execute command "/lp user %player% permission unset asedit.equipment world=%{server.name.%player%}%_the_end"
                        make console execute command "/lp user %player% permission unset asedit.rotate world=%{server.name.%player%}%_the_end"
                        make console execute command "/lp user %player% permission unset asedit.head world=%{server.name.%player%}%_the_end"
                        make console execute command "/lp user %player% permission unset asedit.body world=%{server.name.%player%}%_the_end"
                        make console execute command "/lp user %player% permission unset asedit.positionarms world=%{server.name.%player%}%_the_end"
                        wait 5 seconds
                        make console execute command "/lp user %player% permission unset asedit.positionlegs world=%{server.name.%player%}%_the_end"
                        make console execute command "/lp user %player% permission unset asedit.leftarm world=%{server.name.%player%}%_the_end"
                        make console execute command "/lp user %player% permission unset asedit.rightarm world=%{server.name.%player%}%_the_end"
                        make console execute command "/lp user %player% permission unset asedit.leftleg world=%{server.name.%player%}%_the_end"
                        make console execute command "/lp user %player% permission unset asedit.rightleg world=%{server.name.%player%}%_the_end"
                        make console execute command "/lp user %player% permission unset asedit.reset world=%{server.name.%player%}%_the_end"

                    set {version.server.%player%} to 1.1
                if {version.server.%player%} is 1.1:
                    if {plugin.armorstandeditor.%{server.name.%player%}%} is "Installed":
                        send "&cTo fix some issues the plugin Citizens will be uninstalled. You may reintall it later." to player
                        set {plugin.armorstandeditor.%{server.name.%player%}%} to "Not Installed"
                        make console execute command "/lp user %player% permission unset citizens.help world=%{server.name.%player%}%"
                        make console execute command "/lp user %player% permission unset citizens.npc.help world=%{server.name.%player%}%"
                        make console execute command "/lp user %player% permission unset citizens.npc.age world=%{server.name.%player%}%"
                        make console execute command "/lp user %player% permission unset citizens.npc.anchor world=%{server.name.%player%}%"
                        make console execute command "/lp user %player% permission unset citizens.npc.behaviour world=%{server.name.%player%}%"
                        make console execute command "/lp user %player% permission unset citizens.npc.copy world=%{server.name.%player%}%"
                        make console execute command "/lp user %player% permission unset citizens.npc.create.* world=%{server.name.%player%}%"
                        make console execute command "/lp user %player% permission unset citizens.npc.create world=%{server.name.%player%}%"
                        make console execute command "/lp user %player% permission unset citizens.npc.despawn world=%{server.name.%player%}%"
                        make console execute command "/lp user %player% permission unset citizens.npc.gamemode world=%{server.name.%player%}%"
                        wait 7 seconds
                        make console execute command "/lp user %player% permission unset citizens.npc.gravity world=%{server.name.%player%}%"
                        make console execute command "/lp user %player% permission unset citizens.npc.edit.equip world=%{server.name.%player%}%"
                        make console execute command "/lp user %player% permission unset citizens.npc.list world=%{server.name.%player%}%"
                        make console execute command "/lp user %player% permission unset citizens.npc.lookclose world=%{server.name.%player%}%"
                        make console execute command "/lp user %player% permission unset citizens.npc.mount world=%{server.name.%player%}%"
                        make console execute command "/lp user %player% permission unset citizens.npc.edit.path world=%{server.name.%player%}%"
                        make console execute command "/lp user %player% permission unset citizens.npc.pathfindingrange world=%{server.name.%player%}%"
                        make console execute command "/lp user %player% permission unset citizens.npc.power world=%{server.name.%player%}%"
                        make console execute command "/lp user %player% permission unset citizens.npc.profession world=%{server.name.%player%}%"
                        make console execute command "/lp user %player% permission unset citizens.npc.remove world=%{server.name.%player%}%"
                        make console execute command "/lp user %player% permission unset citizens.npc.rename world=%{server.name.%player%}%"
                        wait 7 seconds
                        make console execute command "/lp user %player% permission unset citizens.npc.select world=%{server.name.%player%}%"
                        make console execute command "/lp user %player% permission unset citizens.npc.size world=%{server.name.%player%}%"
                        make console execute command "/lp user %player% permission unset citizens.npc.skeletontype world=%{server.name.%player%}%"
                        make console execute command "/lp user %player% permission unset citizens.npc.spawn world=%{server.name.%player%}%"
                        make console execute command "/lp user %player% permission unset citizens.npc.speed world=%{server.name.%player%}%"
                        make console execute command "/lp user %player% permission unset citizens.npc.edit.text world=%{server.name.%player%}%"
                        make console execute command "/lp user %player% permission unset citizens.npc.tphere world=%{server.name.%player%}%"
                        make console execute command "/lp user %player% permission unset citizens.npc.tp world=%{server.name.%player%}%"
                        wait 7 seconds
                        make console execute command "/lp user %player% permission unset citizens.npc.type world=%{server.name.%player%}%"
                        make console execute command "/lp user %player% permission unset citizens.npc.vulnerable world=%{server.name.%player%}%"
                        make console execute command "/lp user %player% permission unset citizens.npc.zombiemodifier world=%{server.name.%player%}%"
                        make console execute command "/lp user %player% permission unset citizens.npc.skin world=%{server.name.%player%}%"            
                        make console execute command "/lp user %player% permission unset citizens.npc.follow world=%{server.name.%player%}%"

                    if {plugin.armorstandeditor.%{server.name.%player%}%_nether} is "Installed":
                        send "&cTo fix some issues the plugin Citizens will be uninstalled. You may reintall it later." to player
                        set {plugin.armorstandeditor.%{server.name.%player%}%_nether} to "Not Installed"
                        make console execute command "/lp user %player% permission unset citizens.help world=%{server.name.%player%}%_nether"
                        make console execute command "/lp user %player% permission unset citizens.npc.help world=%{server.name.%player%}%_nether"
                        make console execute command "/lp user %player% permission unset citizens.npc.age world=%{server.name.%player%}%_nether"
                        make console execute command "/lp user %player% permission unset citizens.npc.anchor world=%{server.name.%player%}%_nether"
                        make console execute command "/lp user %player% permission unset citizens.npc.behaviour world=%{server.name.%player%}%_nether"
                        make console execute command "/lp user %player% permission unset citizens.npc.copy world=%{server.name.%player%}%_nether"
                        make console execute command "/lp user %player% permission unset citizens.npc.create.* world=%{server.name.%player%}%_nether"
                        make console execute command "/lp user %player% permission unset citizens.npc.create world=%{server.name.%player%}%_nether"
                        make console execute command "/lp user %player% permission unset citizens.npc.despawn world=%{server.name.%player%}%_nether"
                        make console execute command "/lp user %player% permission unset citizens.npc.gamemode world=%{server.name.%player%}%_nether"
                        wait 7 seconds
                        make console execute command "/lp user %player% permission unset citizens.npc.gravity world=%{server.name.%player%}%_nether"
                        make console execute command "/lp user %player% permission unset citizens.npc.edit.equip world=%{server.name.%player%}%_nether"
                        make console execute command "/lp user %player% permission unset citizens.npc.list world=%{server.name.%player%}%_nether"
                        make console execute command "/lp user %player% permission unset citizens.npc.lookclose world=%{server.name.%player%}%_nether"
                        make console execute command "/lp user %player% permission unset citizens.npc.mount world=%{server.name.%player%}%_nether"
                        make console execute command "/lp user %player% permission unset citizens.npc.edit.path world=%{server.name.%player%}%_nether"
                        make console execute command "/lp user %player% permission unset citizens.npc.pathfindingrange world=%{server.name.%player%}%_nether"
                        make console execute command "/lp user %player% permission unset citizens.npc.power world=%{server.name.%player%}%_nether"
                        make console execute command "/lp user %player% permission unset citizens.npc.profession world=%{server.name.%player%}%_nether"
                        make console execute command "/lp user %player% permission unset citizens.npc.remove world=%{server.name.%player%}%_nether"
                        make console execute command "/lp user %player% permission unset citizens.npc.rename world=%{server.name.%player%}%_nether"
                        wait 7 seconds
                        make console execute command "/lp user %player% permission unset citizens.npc.select world=%{server.name.%player%}%_nether"
                        make console execute command "/lp user %player% permission unset citizens.npc.size world=%{server.name.%player%}%_nether"
                        make console execute command "/lp user %player% permission unset citizens.npc.skeletontype world=%{server.name.%player%}%_nether"
                        make console execute command "/lp user %player% permission unset citizens.npc.spawn world=%{server.name.%player%}%_nether"
                        make console execute command "/lp user %player% permission unset citizens.npc.speed world=%{server.name.%player%}%_nether"
                        make console execute command "/lp user %player% permission unset citizens.npc.edit.text world=%{server.name.%player%}%_nether"
                        make console execute command "/lp user %player% permission unset citizens.npc.tphere world=%{server.name.%player%}%_nether"
                        make console execute command "/lp user %player% permission unset citizens.npc.tp world=%{server.name.%player%}%_nether"
                        wait 7 seconds
                        make console execute command "/lp user %player% permission unset citizens.npc.type world=%{server.name.%player%}%_nether"
                        make console execute command "/lp user %player% permission unset citizens.npc.vulnerable world=%{server.name.%player%}%_nether"
                        make console execute command "/lp user %player% permission unset citizens.npc.zombiemodifier world=%{server.name.%player%}%_nether"
                        make console execute command "/lp user %player% permission unset citizens.npc.skin world=%{server.name.%player%}%_nether"
                        make console execute command "/lp user %player% permission unset citizens.npc.follow world=%{server.name.%player%}%_nether"

                    if {plugin.armorstandeditor.%{server.name.%player%}%_the_end} is "Installed":
                        send "&cTo fix some issues the plugin Citizens will be uninstalled. You may reintall it later." to player
                        set {plugin.armorstandeditor.%{server.name.%player%}%_the_end} to "Not Installed"
                        make console execute command "/lp user %player% permission unset citizens.help world=%{server.name.%player%}%_the_end"
                        make console execute command "/lp user %player% permission unset citizens.npc.help world=%{server.name.%player%}%_the_end"
                        make console execute command "/lp user %player% permission unset citizens.npc.age world=%{server.name.%player%}%_the_end"
                        make console execute command "/lp user %player% permission unset citizens.npc.anchor world=%{server.name.%player%}%_the_end"
                        make console execute command "/lp user %player% permission unset citizens.npc.behaviour world=%{server.name.%player%}%_the_end"
                        make console execute command "/lp user %player% permission unset citizens.npc.copy world=%{server.name.%player%}%_the_end"
                        make console execute command "/lp user %player% permission unset citizens.npc.create.* world=%{server.name.%player%}%_the_end"
                        make console execute command "/lp user %player% permission unset citizens.npc.create world=%{server.name.%player%}%_the_end"
                        make console execute command "/lp user %player% permission unset citizens.npc.despawn world=%{server.name.%player%}%_the_end"
                        make console execute command "/lp user %player% permission unset citizens.npc.gamemode world=%{server.name.%player%}%_the_end"
                        wait 7 seconds
                        make console execute command "/lp user %player% permission unset citizens.npc.gravity world=%{server.name.%player%}%_the_end"
                        make console execute command "/lp user %player% permission unset citizens.npc.edit.equip world=%{server.name.%player%}%_the_end"
                        make console execute command "/lp user %player% permission unset citizens.npc.list world=%{server.name.%player%}%_the_end"
                        make console execute command "/lp user %player% permission unset citizens.npc.lookclose world=%{server.name.%player%}%_the_end"
                        make console execute command "/lp user %player% permission unset citizens.npc.mount world=%{server.name.%player%}%_the_end"
                        make console execute command "/lp user %player% permission unset citizens.npc.edit.path world=%{server.name.%player%}%_the_end"
                        make console execute command "/lp user %player% permission unset citizens.npc.pathfindingrange world=%{server.name.%player%}%_the_end"
                        make console execute command "/lp user %player% permission unset citizens.npc.power world=%{server.name.%player%}%_the_end"
                        make console execute command "/lp user %player% permission unset citizens.npc.profession world=%{server.name.%player%}%_the_end"
                        make console execute command "/lp user %player% permission unset citizens.npc.remove world=%{server.name.%player%}%_the_end"
                        make console execute command "/lp user %player% permission unset citizens.npc.rename world=%{server.name.%player%}%_the_end"
                        wait 7 seconds
                        make console execute command "/lp user %player% permission unset citizens.npc.select world=%{server.name.%player%}%_the_end"
                        make console execute command "/lp user %player% permission unset citizens.npc.size world=%{server.name.%player%}%_the_end"
                        make console execute command "/lp user %player% permission unset citizens.npc.skeletontype world=%{server.name.%player%}%_the_end"
                        make console execute command "/lp user %player% permission unset citizens.npc.spawn world=%{server.name.%player%}%_the_end"
                        make console execute command "/lp user %player% permission unset citizens.npc.speed world=%{server.name.%player%}%_the_end"
                        make console execute command "/lp user %player% permission unset citizens.npc.edit.text world=%{server.name.%player%}%_the_end"
                        make console execute command "/lp user %player% permission unset citizens.npc.tphere world=%{server.name.%player%}%_the_end"
                        make console execute command "/lp user %player% permission unset citizens.npc.tp world=%{server.name.%player%}%_the_end"
                        wait 7 seconds
                        make console execute command "/lp user %player% permission unset citizens.npc.type world=%{server.name.%player%}%_the_end"
                        make console execute command "/lp user %player% permission unset citizens.npc.vulnerable world=%{server.name.%player%}%_the_end"
                        make console execute command "/lp user %player% permission unset citizens.npc.zombiemodifier world=%{server.name.%player%}%_the_end"
                        make console execute command "/lp user %player% permission unset citizens.npc.skin world=%{server.name.%player%}%_the_end"            
                        make console execute command "/lp user %player% permission unset citizens.npc.follow world=%{server.name.%player%}%_the_end"

                    set {version.server.%player%} to 1.2
                if {version.server.%player%} is 1.2:
                    clear {mcversion.allowed::%{server.name.%player%}%::*}

                    wait 1 second

                    loop {allmcversions::*}:
                        add loop-value to {mcversion.allowed::%{server.name.%player%}%::*}

                    set {version.server.%player%} to 1.3
                if {version.server.%player%} is 1.3:
                    make console execute command "lp user %player% parent remove pluginessentials"
                    make console execute command "lp user %player% parent remove plugincitizens"
                    make console execute command "lp user %player% parent remove pluginearmorstandeditor"

                    make console execute command "lp user %player% parent add default"

                    set {plugin.essentials.%{server.name.%player%}%} to "Not Installed"
                    set {plugin.citizens.%{server.name.%player%}%} to "Not Installed"
                    set {plugin.armorstandeditor.%{server.name.%player%}%} to "Not Installed"

                    set {version.server.%player%} to 1.4
                send "&aUpdating finished!"
                send "[**UPDATED**] %player% has updated Realm `%{server.name.%player%}%` **|** Version **%{version.old.%player%}%** > **%{version.server.%player%}%**" to channel with id "719181553611046962" with "MainBot"
                make player execute command "/update-check"
            else:
                send "&cYour Realm is running the latest version! &3(&b##{@version}&3)"
        else:
            send "&cYou must be in &bLobby &cto use this!"

command /update-check:
    trigger:
        if {server.created.%player%} is "true":
            if {version.server.%player%} is not {@version}:
                wait 5 seconds
                send "&c================================" to player
                send "&aUPDATE AVAILABLE" to player
                send "&c================================" to player
                send "&3Please type &b/update" to player
                send "&3to update your Realm" to player
                send "&c================================" to player
                if {version.server.%player%} is not set:
                    send "&3Version: &bPre-0.1" to player
                else:
                    send "&3Version: &b%{version.server.%player%}%" to player
                send "&3Latest  Version: &b{@version}" to player
                send "&c================================" to player
                send "&cNOTE: &fNot updating your Realm might have serious consequences!" to player
                send "&c================================" to player
            else:
                send "&cYour Realm is updated to the latest version! &3(&b##{@version}&3)"

command /clear-update <player>:
    permission: admin.rank
    trigger:
        clear {version.server.%arg-1%}

command /set-update <player> <number>:
    permission: admin.rank
    trigger:
        set {version.server.%arg-1%} to arg-2

command /kickallplayers <text>:
    permission: admin.rank
    trigger:
        loop all players:
            if loop-player's world is "%arg-1%":
                make loop-player execute command "/hub"

command /fix-serverowners:
    permission: admin.rank
    trigger:
        loop {players::*}:
            if {server.created.%loop-value%} is "true":
                set {owner.%{server.name.%loop-value%}%} to "%loop-value%"
        send "done"

command /server-player <offline player>:
    permission: admin.rank
    trigger:
        send "&b%arg-1%&3's Realm: &b%{server.name.%arg-1%}%"

command /server-owner <text>:
    permission: admin.rank
    trigger:
        send "&b%arg-1%&3's owner: &b%{owner.%arg-1%}%"

command /pserver [<text>]:
    usage: /pserver <server>
    trigger:
        if {logged.in.%player%} is true:
            send "&7%player% &3has connected to &b%arg-1%"
            connect player to "%arg-1%"

command /rgold [<offline player>]:
    trigger:
        if arg-1 is set:
            send "&b%arg-1%&3's &6RGold&3: &b%{rgold.%player%}%"
        else:
            send "&3Your &6RGold&3: &b%{rgold.%player%}%"

on join:
    if {rgold.%player%} is not set:
        set {rgold.%player%} to 0

command /?rgold <text> <offline player> <number>:
    permission: admin.rank
    trigger:
        if arg-1 is "set":
            set {rgold.%arg-2%} to arg-3
        if arg-1 is "take":
            subtract arg-3 from {rgold.%arg-2%}
        if arg-1 is "give":
            add arg-3 to {rgold.%arg-2%}

command /shop:
    trigger:
        if player's world is "Lobby":
            wait 0.3 seconds
            open chest with 3 row named "&6RGold Shop" to player
            format slot 22 of player with compass named "&cClose" to close
            format slot 2 of player with book named "&6Ranks" to close then run [make player execute command "/?shop_ranks"]
            format slot 4 of player with barrier named "&aPerks" to close then run [make player execute command " "]
            format slot 6 of player with cake named "&3Icons" to close then run [make player execute command "/?shop_icons"]

command /?shop_ranks:
    trigger:
        if player's world is "Lobby":
            wait 0.3 seconds
            open chest with 2 row named "&6RGold Shop &3> &bRanks" to player
            format slot 13 of player with compass named "&cBack" to close then run [make player execute command "/shop"]
            format slot 1 of player with iron ingot named "&aVIP" with lore "&6Price: &350 RGold", "&bPerks: &324/7 Hosting, FLY in Lobby, 10 RGold/h and more" and "&9Tag: &a[VIP]" to close then run [make player execute command "?buy rank vip"]
            format slot 3 of player with gold ingot named "&bPRO" with lore "&6Price: &375 RGold", "&bPerks: &3All VIP perks, Schematic Gallery,", "&315 RGold/h and more" and "&9Tag: &b[PRO]" to close then run [make player execute command "?buy rank pro"]
            format slot 5 of player with diamond named "&6LEGEND" with lore "&6Price: &3100 RGold", "&bPerks: &3All VIP/PRO perks, 20 RGold/h,", "&3Premium Plugins and more" and "&9Tag: &6[LEGEND]" to close then run [make player execute command "?buy rank legend"]
            format slot 7 of player with nether brick named "&aC&bO&eF&aF&bE&eE" with lore "&6Price: &3200 RGold", "&bPerks: &3All VIP/PRO/LEGEND perks, 25 RGold/h" and "&9Tag: &d[&aC&bO&eF&aF&bE&eE&d]" to close then run [make player execute command "?buy rank coffee"]

command /?shop_icons:
    trigger:
        if player's world is "Lobby":
            wait 0.3 seconds
            set {num2.%player%} to -1
            open chest inventory with 4 rows named "&6RGold Shop &3> &bIcons" to player
            loop {Icons::*}:
                add 1 to {num2.%player%}
                if {Icons.%player%::*} contains loop-value:
                    set slot {num2.%player%} of player's current inventory to oak sign named "%loop-value%" with lore "&aOwned" and "&3Price: &6150 RGold"
                else:
                    set slot {num2.%player%} of player's current inventory to oak sign named "%loop-value%" with lore "&cNot Owned" and "&3Price: &6150 RGold"
            set slot 31 of player's current inventory to compass named "Back"

on inventory click:
    if inventory name of player's current inventory is "&6RGold Shop &3> &bIcons":
        if event-slot is compass named "Back":
            cancel event
            close player's inventory
            make player execute command "/shop"
        else:
            if event-slot's name is "<none>":
                cancel event
            else:
                cancel event
                close player's inventory
                make player execute command "/?buy icon %event-slot's name%"
                wait 0.3 seconds
                make player execute command "/?shop_icons"

command /buy:
    trigger:
        wait 0.3 seconds
        make player execute command "/shop"

command /?buy <text> <text>:
    trigger:
        if player's world is "Lobby":
            if arg-1 is "rank":
                if arg-2 is "vip":
                    if {rgold.%player%} >= 50:
                        make console execute command "adminsetrank %player% %arg-2%"
                        make console execute command "lp user %player% parent set %arg-2%"
                        make console execute command "?rgold take %player% 50"
                        send action bar "&aPurchasing completed!" to player
                        send "[**BOUGHT**] %player% has bought product `%arg-2%` *(Section: %arg-1%)*" to channel with id "737672078127398963" with "MainBot"
                    else:
                        send "&cYou don't have enought RGold!"
                if arg-2 is "pro":
                    if {rgold.%player%} >= 75:
                        make console execute command "adminsetrank %player% %arg-2%"
                        make console execute command "lp user %player% parent set %arg-2%"
                        make console execute command "?rgold take %player% 75"
                        send action bar "&aPurchasing completed!" to player
                        send "[**BOUGHT**] %player% has bought product `%arg-2%` *(Section: %arg-1%)*" to channel with id "737672078127398963" with "MainBot"
                    else:
                        send "&cYou don't have enought RGold!"
                if arg-2 is "legend":
                    if {rgold.%player%} >= 100:
                        make console execute command "adminsetrank %player% %arg-2%"
                        make console execute command "lp user %player% parent set %arg-2%"
                        make console execute command "?rgold take %player% 100"
                        send action bar "&aPurchasing completed!" to player
                        send "[**BOUGHT**] %player% has bought product `%arg-2%` *(Section: %arg-1%)*" to channel with id "737672078127398963" with "MainBot"
                    else:
                        send "&cYou don't have enought RGold!"
                if arg-2 is "coffee":
                    if {rgold.%player%} >= 200:
                        make console execute command "adminsetrank %player% %arg-2%"
                        make console execute command "lp user %player% parent set %arg-2%"
                        make console execute command "?rgold take %player% 200"
                        send action bar "&aPurchasing completed!" to player
                        send "[**BOUGHT**] %player% has bought product `%arg-2%` *(Section: %arg-1%)*" to channel with id "737672078127398963" with "MainBot"
                    else:
                        send "&cYou don't have enought RGold!"
            if arg-1 is "icon":
                if {rgold.%player%} >= 150:
                    make console execute command "?rgold take %player% 150"
                    send "&aIcon bought!"
                    send action bar "&aPurchasing completed!" to player
                    send "[**BOUGHT**] %player% has bought product `%arg-2%` *(Section: %arg-1%)*" to channel with id "737672078127398963" with "MainBot"
                    add arg-2 to {Icons.%player%::*}
                else:
                    send "&cYou don't have enought RGold!"

command /?forcedelete <text>:
    permission: admin.rank
    trigger:
        if player's world is "Lobby":
            send action bar "&cDeleting server..." to player
            make console execute command "lp group default clear world=%arg-1%"
            make console execute command "lp group pjrmod clear world=%arg-1%"
            make console execute command "lp group pmod clear world=%arg-1%"
            make console execute command "lp group padmin clear world=%arg-1%"
            make console execute command "lp group psrmod clear world=%arg-1%"
            make console execute command "lp group pcust1 clear world=%arg-1%"
            make console execute command "lp group pcust2 clear world=%arg-1%"
            make console execute command "lp group pcust3 clear world=%arg-1%"
            make console execute command "lp group pcust4 clear world=%arg-1%"
            make console execute command "lp group pcust5 clear world=%arg-1%"
            make console execute command "lp group pcust6 clear world=%arg-1%"
            make console execute command "lp user %player% clear world=%arg-1%"
            loop {scripts.%arg-1%::*}:
                clear {script.%loop-value%::*}
            clear {Banned.%arg-1%::*}
            clear {owner.%arg-1%}
            remove {api.code.%arg-1%} from {api.codes::*}
            clear {%{api.code.%arg-1%}%.code.world}
            clear {api.code.%arg-1%}
            wait 1 second
            make console execute command "/lp user %{owner.%arg-1%}% permission unset control.use world=%arg-1%"
            set {generated.nether.%arg-1%} to "false"
            set {generated.end.%arg-1%} to "false"
            clear {scripts.%arg-1%::*}
            set {console.id.%arg-1%} to "none"
            set {chat.id.%arg-1%} to "none"
            make player execute command "/ppluginsreset"
            send "&aDeleting Realm..." to player
            send "[**DELETED**] %player% has deleted Realm `%arg-1%` ***[FORCE-DELETE]***" to channel with id "719181553611046962" with "MainBot"
            remove "%arg-1%" from {servers::*}
            make console execute command "mv delete %arg-1%"
            wait 3 seconds
            make console execute command "mvconfirm"
            wait 1 second
            make console execute command "mv delete %arg-1%_nether"
            wait 3 seconds
            make console execute command "mvconfirm"
            wait 1 second
            make console execute command "mv delete %arg-1%_the_end"
            wait 3 seconds
            make console execute command "mvconfirm"
            wait 1 second
            send "&cRealm deleted!" to player
            set {24_7_%arg-1%} to "false"
            set {24_7_p_%{owner.%arg-1%}%} to "off"
            set {server.created.%{owner.%arg-1%}%} to "false"
            set {server.name.%{owner.%arg-1%}%} to "none"
            set {world.type.%{owner.%arg-1%}%} to "none"
            subtract 1 from {ServerNumber}
            set {cloud.%{owner.%arg-1%}%} to "&cfalse"
            send action bar "&cServer Deleted!" to player

on join:
    if length of "%{server.name.%player%}%" > 8:
        wait 10 seconds
        send "&c================================" to player
        send "&cNOTICE - PLEASE READ" to player
        send "&c================================" to player
        send "&bOfficially Ending Support" to player
        send "&3We are now officially ending support" to player
        send "&3for all Realm names that contain more" to player
        send "&3than &b8 &3letters/numbers" to player
        send "&cYour Realm will be SUSPENDED," to player
        send "&cNOT DELETED. Please read the forum post" to player
        send "&cto fix this issue!" to player
        send "&3If you want more info please" to player
        send formatted " <url:https://oldwebsite.plustis.xyz/forum/topic/42-officially-ending-support-for-irregular-realms/>&bVISIT THIS PAGE<reset>"
        send "&c================================" to player
        make console execute command "suspend %{server.name.%player%}%"

command /link <number>:
    trigger:
        set {discord.id.%player%} to arg-1
        send "&aSet your Discord ID to &b%arg-1%"

every 10 minutes in "Lobby":
    loop {servers::*}:
        if {status.%loop-value%} is "Online":
            wait 0.3 seconds
            if {online.%loop-value%} is 0:
                if {online.%loop-value%_nether} is 0:
                    if {online.%loop-value%_the_end} is 0:
                        if {24_7_%loop-value%} is "true":
                            #
                        else:
                            make console execute command "/?forcestop %loop-value%"

command /?forcestop <text>:
    trigger:
        if {servers::*} contains arg-1:
            make console execute command "kickallplayers %arg-1%"
            make console execute command "kickallplayers %arg-1%_nether"
            make console execute command "kickallplayers %arg-1%_the_end"
            set {24_7_p_%{owner.%arg-1%}%} to "off"
            set {24_7_%arg-1%} to "false"
            add "[Recived Internal Stop Request]" to {console.%arg-1%::*}
            add "Type = AFK-Shutdown" to {console.%arg-1%::*}
            add "Stopping Realm..." to {console.%arg-1%::*}
            add "Unoading gamerules..." to {console.%arg-1%::*}
            add "Unloading plugins..." to {console.%arg-1%::*}
            add "Realm stopped!" to {console.%arg-1%::*}
            make console execute command "mv unload %arg-1%"
            wait 3 seconds
            make console execute command "mv unload %arg-1%_nether"
            wait 3 seconds
            make console execute command "mv unload %arg-1%_the_end"
            set {status.%arg-1%} to "Offline"
            set {latest.log.%arg-1%::*} to {console.%arg-1%::*}
            loop all players:
                if {server.name.%loop-player%} is arg-1:
                    send "&cYour Realm has been shutdown for inactivity!" to loop-player
                    send action bar "&cYour Realm has been shutdown for inactivity!" to loop-player

every 30 seconds:
    if {start.queue::*} is set:  
        set {starting.queue} to a random element out of {start.queue::*}
        wait 1 second
        remove "%{starting.queue}%" from {start.queue::*}
        wait 1 second
        if {service.phost} is "Online":
            if {suspended.%{starting.queue}%} is "true":
                #
            else:
                if {nserver_online} >= 27:
                    #
                else:
                    make console execute command "mv load %{starting.queue}%"
                    wait 3 seconds
                    make console execute command "mv load %{starting.queue}%_nether"
                    wait 3 seconds
                    make console execute command "mv load %{starting.queue}%_the_end"
                    set {status.%{starting.queue}%} to "Online"
                    clear {console.%{starting.queue}%::*}
                    wait 0.2 seconds
                    add "[Recived Start Request]" to {console.%{starting.queue}%::*}
                    add "Type = Start Request" to {console.%{starting.queue}%::*}
                    add "Starting Realm..." to {console.%{starting.queue}%::*}
                    add "Loading gamerules..." to {console.%{starting.queue}%::*}
                    add "Loading plugins..." to {console.%{starting.queue}%::*}
                    add "Realm started!" to {console.%{starting.queue}%::*}
                    wait 3 seconds
                    loop all players:
                        if {destination.queue.%loop-player%} is "%{starting.queue}%":
                            make loop-player execute command "/join %{starting.queue}%"
                            clear {destination.queue.%loop-player%}
                    wait 10 seconds
                    loop all players:
                        if {destination.queue.%loop-player%} is "%{starting.queue}%":
                            clear {destination.queue.%loop-player%}
                            send action bar "&cError: Couldn't start this Realm. Please try again later!" to loop-player

on skript load:
        clear {start.queue::*}
        clear {starting.queue}

on chat:
    loop all players:
        if message contains "%loop-player%":
            send action bar "&c[/!\] &3%player% has mentioned you in chat &c[/!\]" to loop-player
            wait 2 seconds
            send action bar "&aMessage: &3%message%" to loop-player

on food bar change:
    if player's world is "Lobby":
        cancel event

on join:
    if "%player%" contains "*":
        set {edition.%player%} to "Bedrock"
    else:
        set {edition.%player%} to "Java"

command /ram:
    permission: op
    trigger:
        send "%(max ram)-(free ram)%/%max ram%" to player

on connect:
    if first element out of (split "%event.getHostname()%" at ".") is "play" or "bedrock":
        #
    else:
        set {customip.destination.%player%} to first element out of (split "%event.getHostname()%" at ".")
        wait 1 seconds
        make console execute command "/?destination %player% %{customip.destination.%player%}%"

command /?destination <player> <text>:
    trigger:
        loop {players::*}:
            if {domain.%{server.name.%loop-value%}%} = "%arg-2%.plustis.xyz" or "%arg-2%.mcworld.xyz":
                make arg-1 execute command "/join %{server.name.%loop-value%}%"
                clear {customip.destination.%player%}

on quit:
    clear {customip.destination.%player%}

on player portal:
    cancel event
    send "%teleport cause%" to all players
    if "%teleport cause%" is "nether portal":
        if "%event-player's world%" contains "_nether":
            set {portal.%event-player%} to first element out of (split "%event-player's world%" at "_")
            make console execute command "/mvtp %event-player% %{portal.%event-player%}%"
        else:
            make console execute command "/mvtp %event-player% %event-player's world%_nether"
    if "%teleport cause%" is "end portal":
        if "%event-player's world%" contains "_the_end":
            set {portal.%event-player%} to first element out of (split "%event-player's world%" at "_")
            make console execute command "/mvtp %event-player% %{portal.%event-player%}%"
        else:
            make console execute command "/mvtp %event-player% %event-player's world%_the_end"

on join:
    if {fixed.perms.2.%player%} is not set:
        if {rank.%player%} is "&d[&aC&bO&eF&aF&bE&eE&d]":
            make console execute command "/lp user %player% parent set coffee"
        if {rank.%player%} is "&6[LEGEND]" or "&c[PROFESSIONAL CRASHER]":
            make console execute command "/lp user %player% parent set legend"
        if {rank.%player%} is "&b[PRO]":
            make console execute command "/lp user %player% parent set pro"
        if {rank.%player%} is "&a[VIP]":
            make console execute command "/lp user %player% parent set vip"
        if {rank.%player%} is "&7[User]":
            make console execute command "/lp user %player% parent set default"
        set {fixed.perms.2.%player%} to true

command /version <player>:
    trigger:
        send "%minecraft version of arg-1%" to player

on join:
    clear {_mcversion.%player%.current.temp::*}
    set {_mcversion.%player%.current.temp1} to "%minecraft version of player%"
    set {_mcversion.%player%.current.temp::*} to {_mcversion.%player%.current.temp1} split at "."
    set {mcversion.%player%.current} to "%{_mcversion.%player%.current.temp::1}%.%{_mcversion.%player%.current.temp::2}%"
